{"version":3,"file":"dist/ohif-extension-cornerstone-dicom-rt.umd.js","mappings":";CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,cAAeA,QAAQ,SAAUA,QAAQ,aACjD,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,aAAc,QAAS,YAAaJ,GAClB,iBAAZC,QACdA,QAAQ,uCAAyCD,EAAQG,QAAQ,cAAeA,QAAQ,SAAUA,QAAQ,aAE1GJ,EAAK,uCAAyCC,EAAQD,EAAK,cAAeA,EAAY,MAAGA,EAAK,YAC/F,CATD,CASGO,YAAY,CAACC,EAAkCC,EAAkCC,cCThFC,ECKAC,wHCgEJ,QArEAC,eAAmCC,GAIhC,IAJiC,aAClCC,EAAY,cACZC,EAAa,gBACbC,GACDH,EACC,MAAM,oBACJI,EAAmB,uBACnBC,EAAsB,oBACtBC,GACEH,EAAgBI,SAEdC,EAAwBP,EAAaQ,gCAE3C,IAAIC,EAAiB,KAKrBA,QAAuBN,EAAoBO,kCACzCV,EACAS,GAJqB,GAQvBN,EAAoBQ,oBAAoBX,EAAaO,uBAErD,MAAM,UAAEK,GAAcP,EAAoBQ,WAEpCC,EAAmBV,EAAuBW,0BAC9Cd,EACAM,GAoCF,OAjCAF,EAAoBW,2BAA2BF,GAQ/CF,EAAUK,SAAQ,CAACC,EAAUC,KAC3B,GAAIA,IAAUlB,EACZ,OAGuBE,EAAoBiB,yBAC3CF,EAASG,uBACTrB,EAAaO,wBAIbO,EAAiBQ,KAAK,CACpBrB,cAAekB,EACfE,uBAAwBH,EAASG,uBACjCE,gBAAiB,CACfC,oBAAqB,CACnBC,OAAQ,YAIhB,IAIFpB,EAAoBW,2BAA2BF,IACxC,CACT,ECjEMY,EAAW,CACfC,UAAW,EACXC,OAAQ,EACRC,YAAa,GAgEf,QA7DA,SAAwB9B,GAKrB,IALsB,gBACvBG,EAAe,aACfF,EAAY,cACZC,EAAa,YACb6B,EAAc,WACf/B,EACC,MAAM,wBAAEgC,GAA4B7B,EAAgBI,SAEpD,OAAO,IAAI0B,SAAQlC,eAAemC,EAASC,GACzC,MAAMC,QAkBV,SAAqBJ,EAAyB9B,GAC5C,OAAO,IAAI+B,SAAQ,SAASC,EAASC,GACnC,MAAME,EAAU,yCACVC,EAAU,CACd,CACEC,KAAM,YACNC,KAAM,KACNC,MAAOd,EAASE,QAElB,CACEU,KAAM,UACNC,KAAM,MACNC,MAAOd,EAASG,cAGdY,EAAWC,IACfX,EAAwBY,OACxBV,EAAQS,EAAO,EAGjBX,EAAwBa,KAAK,CAC3B3C,gBACAqC,KAAM,OACNF,UACAC,UACAI,WACAI,eAAgBA,KACdd,EAAwBY,OACxBV,EAAQP,EAASE,OAAO,GAG9B,GACF,CAlD+BkB,CACzBf,EACA9B,GAGF,GAAIkC,IAAiBT,EAASG,YAAa,CAQzCI,QAPyBc,EAAoB,CAC3C/C,eACAC,gBACA6B,cACA5B,oBAIJ,CACF,GACF,ECjCe,SAAS,EAAQ8C,GAG9B,OAAO,EAAU,mBAAqBC,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,CAChB,EAAI,SAAUA,GACZ,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,CAC1H,EAAG,EAAQA,EACb,CCNe,SAASK,EAAeC,GACrC,IAAIC,ECFS,SAAsBC,EAAOC,GAC1C,GAAuB,WAAnB,EAAQD,IAAiC,OAAVA,EAAgB,OAAOA,EAC1D,IAAIE,EAAOF,EAAMP,OAAOU,aACxB,QAAaC,IAATF,EAAoB,CACtB,IAAIG,EAAMH,EAAKI,KAAKN,EAAOC,GAAQ,WACnC,GAAqB,WAAjB,EAAQI,GAAmB,OAAOA,EACtC,MAAM,IAAIE,UAAU,+CACtB,CACA,OAAiB,WAATN,EAAoBO,OAASC,QAAQT,EAC/C,CDPY,CAAYF,EAAK,UAC3B,MAAwB,WAAjB,EAAQC,GAAoBA,EAAMS,OAAOT,EAClD,CEJe,SAAS,EAAgBP,EAAKO,EAAKf,GAYhD,OAXAe,EAAM,EAAcA,MACTP,EACTkB,OAAOC,eAAenB,EAAKO,EAAK,CAC9Bf,MAAOA,EACP4B,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZtB,EAAIO,GAAOf,EAENQ,CACT,QCd0rBkB,OAAOK,OAAO,MCAjsB,SAAS,IACd,GAAIC,SAAWA,QAAQC,KAAM,CAG3B,IAFA,IAAIC,EAEKC,EAAOC,UAAUC,OAAQC,EAAO,IAAIC,MAAMJ,GAAOK,EAAO,EAAGA,EAAOL,EAAMK,IAC/EF,EAAKE,GAAQJ,UAAUI,GAGF,iBAAZF,EAAK,KAAiBA,EAAK,GAAK,mBAAmBG,OAAOH,EAAK,MAEzEJ,EAAWF,SAASC,KAAKS,MAAMR,EAAUI,EAC5C,CACF,CACA,IAAIK,EAAgB,CAAC,EACd,SAAS,IACd,IAAK,IAAIC,EAAQR,UAAUC,OAAQC,EAAO,IAAIC,MAAMK,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFP,EAAKO,GAAST,UAAUS,GAGH,iBAAZP,EAAK,IAAmBK,EAAcL,EAAK,MAC/B,iBAAZA,EAAK,KAAiBK,EAAcL,EAAK,IAAM,IAAIQ,MAC9D,EAAKJ,WAAM,EAAQJ,GACrB,CAEA,IAAIS,EAAY,SAAmBC,EAAMC,GACvC,OAAO,WACL,GAAID,EAAKE,cACPD,QACK,CAQLD,EAAKG,GAAG,eAPU,SAASC,IACzBC,YAAW,WACTL,EAAKM,IAAI,cAAeF,EAC1B,GAAG,GACHH,GACF,GAGF,CACF,CACF,EAEO,SAASM,EAAeP,EAAMQ,EAAIP,GACvCD,EAAKO,eAAeC,EAAIT,EAAUC,EAAMC,GAC1C,CACO,SAASQ,EAAcT,EAAMU,EAAKF,EAAIP,GACzB,iBAAPO,IAAiBA,EAAK,CAACA,IAClCA,EAAG/E,SAAQ,SAAUkF,GACfX,EAAKY,QAAQJ,GAAGK,QAAQF,GAAK,GAAGX,EAAKY,QAAQJ,GAAG1E,KAAK6E,EAC3D,IACAX,EAAKS,cAAcC,EAAKX,EAAUC,EAAMC,GAC1C,CClDA,IAAIa,EAAkB,oGAClBC,EAAe,CACjB,QAAS,IACT,QAAS,IACT,OAAQ,IACR,QAAS,IACT,OAAQ,IACR,QAAS,IACT,SAAU,IACV,QAAS,IACT,SAAU,IACV,QAAS,IACT,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,QAAS,IACT,SAAU,IACV,WAAY,IACZ,UAAW,IACX,SAAU,IACV,QAAS,KAGPC,EAAqB,SAA4BC,GACnD,OAAOF,EAAaE,EACtB,ECnBA,ICPIC,EDOAC,EAAiB,CACnBC,SAAU,kBACVC,cAAe,GACfC,oBAAqB,GACrBC,4BAA4B,EAC5BC,mBAAoB,GACpBC,2BAA4B,CAAC,KAAM,SAAU,IAAK,KAClDC,aAAa,EACbC,SDaoB,SAAkB5E,GACtC,OAAOA,EAAK6E,QAAQd,EAAiBE,EACvC,GG7BA,SAASa,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAM1C,OAAQ2C,IAAK,CACrC,IAAIC,EAAaF,EAAMC,GACvBC,EAAWrD,WAAaqD,EAAWrD,aAAc,EACjDqD,EAAWpD,cAAe,EACtB,UAAWoD,IAAYA,EAAWnD,UAAW,GACjDJ,OAAOC,eAAemD,EAAQ,EAAcG,EAAWlE,KAAMkE,EAC/D,CACF,CCIO,IAAI,GAAc,IAAAC,iBACdC,EAAmB,WAC5B,SAASA,KCfI,SAAyBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAI9D,UAAU,oCAExB,CDYI+D,CAAgBC,KAAMJ,GAEtBI,KAAKC,eAAiB,CAAC,CACzB,CDTa,IAAsBH,EAAaI,EAAYC,EC2B5D,OD3BmCL,ECWtBF,GDXmCM,ECWjB,CAAC,CAC9B1E,IAAK,oBACLf,MAAO,SAA2B2F,GAChC,IAAIC,EAAQL,KAEZI,EAAWlH,SAAQ,SAAU+E,GACtBoC,EAAMJ,eAAehC,KAAKoC,EAAMJ,eAAehC,IAAM,EAC5D,GACF,GACC,CACDzC,IAAK,oBACLf,MAAO,WACL,OAAO0B,OAAOmE,KAAKN,KAAKC,eAC1B,MDvBcX,EAAkBQ,EAAYzE,UAAW6E,GACrDC,GAAab,EAAkBQ,EAAaK,GAChDhE,OAAOC,eAAe0D,EAAa,YAAa,CAC9CvD,UAAU,ICuBLqD,CACT,CAxB8B,GEdf,SAASW,EAAkBC,EAAKC,IAClC,MAAPA,GAAeA,EAAMD,EAAI1D,UAAQ2D,EAAMD,EAAI1D,QAC/C,IAAK,IAAI2C,EAAI,EAAGiB,EAAO,IAAI1D,MAAMyD,GAAMhB,EAAIgB,EAAKhB,IAAKiB,EAAKjB,GAAKe,EAAIf,GACnE,OAAOiB,CACT,CCAe,SAAS,EAAeF,EAAKf,GAC1C,OCLa,SAAyBe,GACtC,GAAIxD,MAAM2D,QAAQH,GAAM,OAAOA,CACjC,CDGS,CAAeA,IELT,SAA+BA,EAAKf,GACjD,IAAImB,EAAK,MAAQJ,EAAM,KAAO,oBAAsBtF,QAAUsF,EAAItF,OAAOC,WAAaqF,EAAI,cAC1F,GAAI,MAAQI,EAAI,CACd,IAAIC,EACFC,EACAC,EACAC,EACAC,EAAO,GACPC,GAAK,EACLC,GAAK,EACP,IACE,GAAIJ,GAAMH,EAAKA,EAAG7E,KAAKyE,IAAMY,KAAM,IAAM3B,EAAG,CAC1C,GAAItD,OAAOyE,KAAQA,EAAI,OACvBM,GAAK,CACP,MAAO,OAASA,GAAML,EAAKE,EAAGhF,KAAK6E,IAAKS,QAAUJ,EAAK1H,KAAKsH,EAAGpG,OAAQwG,EAAKnE,SAAW2C,GAAIyB,GAAK,GAClG,CAAE,MAAOI,GACPH,GAAK,EAAIL,EAAKQ,CAChB,CAAE,QACA,IACE,IAAKJ,GAAM,MAAQN,EAAW,SAAMI,EAAKJ,EAAW,SAAKzE,OAAO6E,KAAQA,GAAK,MAC/E,CAAE,QACA,GAAIG,EAAI,MAAML,CAChB,CACF,CACA,OAAOG,CACT,CACF,CFrBgC,CAAqBT,EAAKf,IGJ3C,SAAqC8B,EAAGC,GACrD,GAAKD,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAO,EAAiBA,EAAGC,GACtD,IAAIpD,EAAIjC,OAAOd,UAAUoG,SAAS1F,KAAKwF,GAAGG,MAAM,GAAI,GAEpD,MADU,WAANtD,GAAkBmD,EAAEnG,cAAagD,EAAImD,EAAEnG,YAAYuG,MAC7C,QAANvD,GAAqB,QAANA,EAAoBpB,MAAM4E,KAAKL,GACxC,cAANnD,GAAqB,2CAA2CyD,KAAKzD,GAAW,EAAiBmD,EAAGC,QAAxG,CALc,CAMhB,CHHgE,CAA2BhB,EAAKf,IILjF,WACb,MAAM,IAAIzD,UAAU,4IACtB,CJGsG,EACtG,CKFA,SAAS,EAAQ8F,EAAQC,GAAkB,IAAIzB,EAAOnE,OAAOmE,KAAKwB,GAAS,GAAI3F,OAAO6F,sBAAuB,CAAE,IAAIC,EAAU9F,OAAO6F,sBAAsBF,GAAaC,IAAkBE,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOhG,OAAOiG,yBAAyBN,EAAQK,GAAK9F,UAAY,KAAMiE,EAAK/G,KAAK4D,MAAMmD,EAAM2B,EAAU,CAAE,OAAO3B,CAAM,CAExV,SAAS,EAAcf,GAAU,IAAK,IAAIE,EAAI,EAAGA,EAAI5C,UAAUC,OAAQ2C,IAAK,CAAE,IAAI4C,EAAyB,MAAhBxF,UAAU4C,GAAa5C,UAAU4C,GAAK,CAAC,EAAOA,EAAI,EAAK,EAAQtD,OAAOkG,IAAS,GAAMnJ,SAAQ,SAAUsC,GAAO,EAAgB+D,EAAQ/D,EAAK6G,EAAO7G,GAAO,IAAeW,OAAOmG,0BAA6BnG,OAAOoG,iBAAiBhD,EAAQpD,OAAOmG,0BAA0BD,IAAmB,EAAQlG,OAAOkG,IAASnJ,SAAQ,SAAUsC,GAAOW,OAAOC,eAAemD,EAAQ/D,EAAKW,OAAOiG,yBAAyBC,EAAQ7G,GAAO,GAAM,CAAE,OAAO+D,CAAQ,CAMrhB,IAAIiD,EAAc,SAAqB/H,EAAOgI,GAC5C,IAAIC,GAAM,IAAAC,UAIV,OAHA,IAAAC,YAAU,WACRF,EAAIG,QAAUJ,EAASC,EAAIG,QAAUpI,CACvC,GAAG,CAACA,EAAOgI,IACJC,EAAIG,OACb,EAEO,SAAS,EAAe5E,GAC7B,IAAIuB,EAAQ3C,UAAUC,OAAS,QAAsBjB,IAAjBgB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC7EiG,EAAgBtD,EAAM/B,KAEtBzF,GAAO,IAAA+K,YAAW,IAAgB,CAAC,EACnCC,EAAkBhL,EAAKyF,KACvBwF,EAAuBjL,EAAKkL,UAE5BzF,EAAOqF,GAAiBE,GVvBrBrE,EU0BP,GAFIlB,IAASA,EAAK0F,mBAAkB1F,EAAK0F,iBAAmB,IAAIvD,IAE3DnC,EAAM,CACT,EAAS,0EAET,IAAI2F,EAAY,SAAmBC,EAAGC,GACpC,MAAkC,iBAAvBA,EAAwCA,EAC/CA,GAAsD,WAAhC,EAAQA,IAA+E,iBAApCA,EAAmBC,aAAkCD,EAAmBC,aAC9IvG,MAAM2D,QAAQ0C,GAAKA,EAAEA,EAAEvG,OAAS,GAAKuG,CAC9C,EAEIG,EAAc,CAACJ,EAAW,CAAC,GAAG,GAIlC,OAHAI,EAAYC,EAAIL,EAChBI,EAAY/F,KAAO,CAAC,EACpB+F,EAAYE,OAAQ,EACbF,CACT,CAEI/F,EAAKY,QAAQsF,YAAqC9H,IAA5B4B,EAAKY,QAAQsF,MAAMC,MAAoB,EAAS,uGAE1E,IAAIC,EAAc,EAAc,EAAc,EAAc,CAAC,EX3BtDjF,GW2ByEnB,EAAKY,QAAQsF,OAAQnE,GAEjGL,EAAc0E,EAAY1E,YAC1B2E,EAAYD,EAAYC,UACxB1D,EAAanC,GAAMgF,GAAwBxF,EAAKY,SAAWZ,EAAKY,QAAQ6E,UAC5E9C,EAAmC,iBAAfA,EAA0B,CAACA,GAAcA,GAAc,CAAC,eACxE3C,EAAK0F,iBAAiBY,mBAAmBtG,EAAK0F,iBAAiBY,kBAAkB3D,GACrF,IAAIsD,GAASjG,EAAKE,eAAiBF,EAAKuG,uBAAyB5D,EAAW6D,OAAM,SAAU7F,GAC1F,ObcG,SAA4BH,EAAIR,GACrC,IAAIY,EAAUxB,UAAUC,OAAS,QAAsBjB,IAAjBgB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAEnF,OAAKY,EAAKyG,WAAczG,EAAKyG,UAAUpH,YAKmBjB,IAArC4B,EAAKY,QAAQ8F,oBAM3B1G,EAAK2G,mBAAmBnG,EAAI,CACjCE,IAAKE,EAAQF,IACbkG,SAAU,SAAkB1F,EAAc2F,GACxC,GAAIjG,EAAQQ,UAAYR,EAAQQ,SAASP,QAAQ,qBAAuB,GAAKK,EAAapG,SAASgM,iBAAiBC,SAAW7F,EAAa8F,uBAAyBH,EAAe3F,EAAa8F,qBAAsBxG,GAAK,OAAO,CACrO,IArCJ,SAAsCA,EAAIR,GACxC,IAAIY,EAAUxB,UAAUC,OAAS,QAAsBjB,IAAjBgB,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC/EsB,EAAMV,EAAKyG,UAAU,GACrBQ,IAAcjH,EAAKY,SAAUZ,EAAKY,QAAQqG,YAC1CC,EAAUlH,EAAKyG,UAAUzG,EAAKyG,UAAUpH,OAAS,GACrD,GAA0B,WAAtBqB,EAAIyG,cAA4B,OAAO,EAE3C,IAAIN,EAAiB,SAAwBO,EAAGzG,GAC9C,IAAI0G,EAAYrH,EAAKlF,SAASgM,iBAAiBQ,MAAM,GAAG7H,OAAO2H,EAAG,KAAK3H,OAAOkB,IAC9E,OAAsB,IAAf0G,GAAkC,IAAdA,CAC7B,EAEA,QAAIzG,EAAQQ,UAAYR,EAAQQ,SAASP,QAAQ,qBAAuB,GAAKb,EAAKlF,SAASgM,iBAAiBC,SAAW/G,EAAKgH,uBAAyBH,EAAe7G,EAAKgH,qBAAsBxG,KAC3LR,EAAKuH,kBAAkB7G,EAAKF,IAC3BR,EAAKlF,SAASgM,iBAAiBC,WAAW/G,EAAKY,QAAQ4G,WAAcxH,EAAKY,QAAQ6G,4BACnFZ,EAAenG,EAAKF,IAASyG,IAAeJ,EAAeK,EAAS1G,IAE1E,CAaWkH,CAA6BlH,EAAIR,EAAMY,IAP9C,EAAS,yCAA0CZ,EAAKyG,YACjD,EAeX,CalCWE,CAAmBhG,EAAGX,EAAMoG,EACrC,IAEA,SAASuB,IACP,OAAO3H,EAAK4H,UAAU7F,EAAMrB,KAAO,KAA6B,aAAvB0F,EAAYyB,OAAwBlF,EAAaA,EAAW,GAAI0D,EAC3G,CAEA,IACIyB,EAAa,GADD,IAAAC,UAASJ,GACkB,GACvC3B,EAAI8B,EAAW,GACfE,EAAOF,EAAW,GAElBG,EAAWtF,EAAWuF,OACtBnG,EAAMrB,MAAKuH,EAAW,GAAGxI,OAAOsC,EAAMrB,KAAKjB,OAAOwI,IACtD,IAAIE,EAAmBpD,EAAYkD,GAC/BG,GAAY,IAAAlD,SAAO,IACvB,IAAAC,YAAU,WACR,IAAI/D,EAAWgF,EAAYhF,SACvBC,EAAgB+E,EAAY/E,cAmBhC,SAASgH,IACHD,EAAUhD,SAAS4C,EAAKL,EAC9B,CAIA,OAxBAS,EAAUhD,SAAU,EAEfa,GAAUvE,IACTK,EAAMrB,IACRD,EAAcT,EAAM+B,EAAMrB,IAAKiC,GAAY,WACrCyF,EAAUhD,SAAS4C,EAAKL,EAC9B,IAEApH,EAAeP,EAAM2C,GAAY,WAC3ByF,EAAUhD,SAAS4C,EAAKL,EAC9B,KAIA1B,GAASkC,GAAoBA,IAAqBF,GAAYG,EAAUhD,SAC1E4C,EAAKL,GAOHvG,GAAYpB,GAAMA,EAAKG,GAAGiB,EAAUiH,GACpChH,GAAiBrB,GAAMA,EAAKsI,MAAMnI,GAAGkB,EAAegH,GACjD,WACLD,EAAUhD,SAAU,EAChBhE,GAAYpB,GAAMoB,EAASmH,MAAM,KAAK9M,SAAQ,SAAU+M,GAC1D,OAAOxI,EAAKM,IAAIkI,EAAGH,EACrB,IACIhH,GAAiBrB,GAAMqB,EAAckH,MAAM,KAAK9M,SAAQ,SAAU+M,GACpE,OAAOxI,EAAKsI,MAAMhI,IAAIkI,EAAGH,EAC3B,GACF,CACF,GAAG,CAACrI,EAAMiI,IACV,IAAIQ,GAAY,IAAAvD,SAAO,IACvB,IAAAC,YAAU,WACJiD,EAAUhD,UAAYqD,EAAUrD,SAClC4C,EAAKL,GAGPc,EAAUrD,SAAU,CACtB,GAAG,CAACpF,EAAMqG,IACV,IAAIqC,EAAM,CAAC1C,EAAGhG,EAAMiG,GAIpB,GAHAyC,EAAI1C,EAAIA,EACR0C,EAAI1I,KAAOA,EACX0I,EAAIzC,MAAQA,EACRA,EAAO,OAAOyC,EAClB,IAAKzC,IAAUvE,EAAa,OAAOgH,EACnC,MAAM,IAAIlM,SAAQ,SAAUC,GACtBsF,EAAMrB,IACRD,EAAcT,EAAM+B,EAAMrB,IAAKiC,GAAY,WACzC,OAAOlG,GACT,IAEA8D,EAAeP,EAAM2C,GAAY,WAC/B,OAAOlG,GACT,GAEJ,GACF,CC5HA,QAXA,SACEkM,EACAC,EACAtM,GAEA,MAAM,MAAEuM,GACND,EAAqBE,IAAI,qCAAuC,CAAC,EAEnE,OAAOH,EAAiBI,2BAA2BzM,EAAauM,EAAO,CAAC,EAC1E,sOCMA,MAAM,WAAEG,GAAeC,EAAAA,MAGvB,SAASC,EAA0BnH,GACjC,MAAM,SACJoH,EAAQ,YACRC,EAAW,gBACXrN,EAAe,cACftB,EAAa,cACb4O,EAAa,gBACb3O,EAAe,iBACf4O,GACEvH,GAEE,kBACJwH,EAAiB,iBACjBC,EAAgB,oBAChB7O,EAAmB,sBACnB8O,EAAqB,qBACrBb,GACElO,EAAgBI,SAEdwB,EAAe,eAA4B7B,IAGjD,GAAI2O,EAAY/J,OAAS,EACvB,MAAM,IAAIqK,MAAM,qDAGlB,MAAMlP,EAAe4O,EAAY,IAE1BO,EAAc9O,IAAuB+O,EAAAA,EAAAA,oBAGrCC,EAAoBC,IAAuB/B,EAAAA,EAAAA,WAAS,IACpDgC,EAAiBC,IAAsBjC,EAAAA,EAAAA,UAAS,IAOhDkC,EAAYC,IAAiBnC,EAAAA,EAAAA,UAASvN,EAAayP,aACnDE,EAAaC,IAAkBrC,EAAAA,EAAAA,WAAUvN,EAAa6P,WACtDC,EAASC,IAAcxC,EAAAA,EAAAA,UAAS,OAChCyC,EAAoBC,IAAyB1C,EAAAA,EAAAA,UAAS,CAC3D2C,gBAAiB,KACjBC,cAAe,OAIXC,GAA0B1F,EAAAA,EAAAA,QAAO,OAEjC,UAAE9J,EAAS,oBAAEyP,GAAwBlB,EAErCmB,EAAuBtQ,EAAauQ,yBACpCC,EAoTR,SAA0CF,GACxC,MAAMG,EAASH,EAAqBI,OAAO,GACrCF,EAA+B,CACnCG,UAAWF,EAAOE,UAClBC,YAAaH,EAAOG,YACpBC,WAAYJ,EAAOI,WACnBC,WAAYL,EAAOK,WACnBC,eAAgBN,EAAOM,eACvBC,UAAWP,EAAOO,UAClBC,kBAAmBR,EAAOQ,kBAC1BC,kBAAmBT,EAAOS,kBAC1BC,aAAcV,EAAOU,aACrBC,sBAAuBX,EAAOW,sBAC9BC,qBAAsBZ,EAAOY,sBAG/B,OAAOb,CACT,CArUuCc,CACnChB,GAGFF,EAAwBxF,QAAU,CAChC2G,WAAYjB,EACZkB,SAAUhB,GAQZ,MAAMiB,EAAmBC,IACvB3B,EAAW2B,EAAIC,OAAO7B,QAAQ,EAG1B8B,EAAoBA,KACxB7B,EAAW,KAAK,EAGZ8B,GAAyBC,EAAAA,EAAAA,cAAY,KACzC,MAAQC,UAAWC,GAAclD,EAAiBmD,eAChD,2DAIAV,WAAYjB,GACVF,EAAwBxF,QAG5B,OACEsH,EAAAA,cAACF,EAASG,EAAA,GACJ5K,EAAK,CACTqH,YAAa,CAAC0B,EAAsBtQ,GACpCuB,gBAAiB,CACf6Q,aAAc,SACdtQ,YAAaA,EACbuQ,YAAa9Q,EAAgB8Q,YAC7BC,WAAY/Q,EAAgB+Q,YAE9Bb,iBAAkBA,EAClBG,kBAAmBA,IACR,GAEd,CAAC3R,EAAeD,EAAc8B,IAE3ByQ,GAAkBT,EAAAA,EAAAA,cACtBU,IACEA,EAA0B,SAAdA,GAAwB,EAAI,EACxC,MAAM/R,EAAiBT,EAAaO,sBAC9BkS,EAAetS,EAAoBuS,gBAAgBjS,IAEnD,SAAEkS,GAAaF,EAEfG,EAAmB1O,OAAOmE,KAAKsK,GAAU9N,OAE/C,IAAIgO,EAA0BtD,EAAkBiD,EAG5CK,GAA2BD,EAAmB,EAChDC,EAA0B,EACW,IAA5BA,IACTA,EAA0BD,EAAmB,GAG/CzS,EAAoB2S,oBAClBrS,EACAoS,EACA/Q,GAEF0N,EAAmBqD,EAAwB,GAE7C,CAACtD,KAGH5E,EAAAA,EAAAA,YAAU,KACJgF,GAIJoD,EAAgB,CACd7S,kBACAD,gBACAD,iBACCgT,MAAKvD,IACFA,GACFC,GAAc,EAChB,GACA,GACD,CAACxP,EAAiBD,EAAeD,EAAc2P,KAElDhF,EAAAA,EAAAA,YAAU,KACR,MAAM,YAAEsI,GAAgB9S,EAAoB+S,UAC1C/S,EAAoBgT,OAAOC,+BAC3B1B,IAEIA,EAAI1R,aAAaO,wBACjBP,EAAaO,uBAEbqP,GAAe,GAGb8B,EAAI2B,qBACNpE,EAAsBrM,KAAK,CACzB0Q,MAAO,uBACPlR,QACE,iEACFE,KAAM,WAEV,IAIJ,MAAO,KACL2Q,GAAa,CACd,GACA,CAACjT,KAEJ2K,EAAAA,EAAAA,YAAU,KACR,MAAM,YAAEsI,GAAgB9S,EAAoB+S,UAC1C/S,EAAoBgT,OAAOI,0BAC3BxT,IAAsC,IAArC,gBAAEmQ,EAAe,YAAEsD,GAAazT,EAC/BkQ,EAAsB,CACpBC,kBACAC,cAAeqD,GACf,IAIN,MAAO,KACLP,GAAa,CACd,GACA,CAACjT,KAKJ2K,EAAAA,EAAAA,YAAU,KACR,MAAM8I,EAAmC1E,EAAkBmE,UACzDnE,EAAkBoE,OAAOO,sBACzBC,IAAgC,IAA/B,uBAAEtS,GAAwBsS,EACzB,MAAMC,EAAiBhT,EAAUyP,GAE/BhP,EAAuBwS,SAASD,EAAerT,wBAE/CF,EAAoByT,0BAA0B,CAC5C7T,cAAeoQ,EACfhP,uBAAwB,IAE5B,IAIJ,MAAO,KACLoS,EAAiCR,aAAa,CAC/C,GACA,KAEHtI,EAAAA,EAAAA,YAAU,KACR,IAAIoJ,EAAY/E,EAAiBgF,aAAalS,GAE9C,IAAIiS,EAYJ,OARAA,EAAYE,EACVjF,EACAZ,EACAtM,GAGFwN,GAAoB,GAEb,KAELnP,EAAoB+T,8CAClBpS,GAGFkN,EAAiBmF,iBAAiBrS,EAAY,CAC/C,GACA,KAEH6I,EAAAA,EAAAA,YAAU,KACR+E,EAAc1P,EAAayP,YAEpB,KAELtP,EAAoB+T,8CAClBpS,GAEFsO,EAAwBxF,QAAU,IAAI,IAEvC,CAAC5K,IAGJ,IAAIoU,EAAoB,KAExB,IACGhE,EAAwBxF,SACzB0F,EAAqB/P,wBACnB6P,EAAwBxF,QAAQ2G,WAAWhR,sBAE7C,OAAO,KAGLoO,GAAYA,EAAS9J,SACvBuP,EAAoBzF,EAAS0F,KAAI,CAACC,EAAOnT,IAErCmT,GACApC,EAAAA,aAAmBoC,EAAO,CACxBrU,gBACAsD,IAAKpC,OAMb,MAAM,UACJwP,EAAS,YACTC,EAAW,WACXC,EAAU,WACVC,EAAU,eACVC,EAAc,sBACdK,EAAqB,UACrBJ,GAAS,kBACTC,GAAiB,qBACjBI,GAAoB,aACpBF,IACEf,EAAwBxF,QAAQ4G,SAE9B+C,GAAgBzU,UACpB,MAAM2P,QAAmB+E,EAAqB,CAC5CxU,eACAC,gBACAC,oBAGFwP,EAAcD,EAAW,EAG3B,OACEyC,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAACuC,EAAAA,kBAAiB,CAChBC,cAAehD,IACbA,EAAIiD,kBACJjD,EAAIkD,gBAAgB,EAEtBC,cAAetC,EACfuC,mBAAoBA,IC9Tb,SAA4B/U,GAAgC,IAA/B,WAAE0P,EAAU,cAAE8E,GAAexU,EACnEgV,EAAiB,KACjBC,EAAa,KAEjB,MAAM,EAAExJ,GAAMyJ,EAAe,UACvBC,EAAU1J,EAAE,QAElB,OAAQiE,GACN,KAAK,EACHuF,EAAaA,IAAM9C,EAAAA,cAACiD,EAAAA,KAAI,CAACzL,KAAK,iBAE9BqL,EAAiBA,IACf7C,EAAAA,cAAA,WAAK,yDAEP,MACF,KAAK,EACH8C,EAAaA,IAAM9C,EAAAA,cAACiD,EAAAA,KAAI,CAACzL,KAAK,qBAE9BqL,EAAiBA,IAAM7C,EAAAA,cAAA,WAAK,gCAGhC,MAAMkD,EAAaA,IACjBlD,EAAAA,cAAA,OAAKmD,UAAU,wDACbnD,EAAAA,cAAA,OAAKmD,UAAU,+EACbnD,EAAAA,cAAC8C,EAAU,MACX9C,EAAAA,cAAA,QAAMmD,UAAU,QAAO,cAEvB5F,GACAyC,EAAAA,cAAA,OACEmD,UAAU,6FAEVC,UAAWf,GAEVW,IAMT,OACEhD,EAAAA,cAAAA,EAAAA,SAAA,KACG6C,GACC7C,EAAAA,cAACqD,EAAAA,QAAO,CAACC,QAAStD,EAAAA,cAAC6C,EAAc,MAAKU,SAAS,eAC7CvD,EAAAA,cAACkD,EAAU,QAGbL,GAAkB7C,EAAAA,cAACkD,EAAU,MAGrC,CD8QiBM,CAAoB,CACzBjG,aACA8E,mBAGJoB,UAAW,CACTC,MAAO/G,EACPgH,eAAe,EACfC,UAAWtH,EAAWwC,IACtB+E,cAAe5E,GACf6E,kBAAoB,eAAc/E,KAClCgF,mBAAoB,CAClBC,YAAatF,EACTuF,IAAAA,MAAWC,SAASxF,EAAYyF,YAChC,GACJC,WAAYzF,GAAc,GAC1B0F,WAAYzF,GAAc,GAC1B0F,IAAK7F,GAAa,GAClB8F,UAAW1F,EAAkB,GAAEA,EAAe2F,QAAQ,OAAS,GAC/DC,aAC2B/S,IAAzByN,GACK,GAAEA,GAAqBqF,QAAQ,OAChC,GACNE,QAASxF,GAAyB,OAKxCc,EAAAA,cAAA,OAAKmD,UAAU,wDACZ1F,GACCuC,EAAAA,cAAC2E,EAAAA,6BAA4B,CAC3BxB,UAAU,gBACVyB,aAAc9G,EAAmBG,cACjCD,gBAAiBF,EAAmBE,gBACpC6G,YAAY,wBAGflF,IACAuC,GAIT,CAEA1F,EAA0BsI,UAAY,CACpCpI,YAAaqI,IAAAA,QAAkBA,IAAAA,QAC/BhX,cAAegX,IAAAA,OAAiBC,WAChCC,WAAYF,IAAAA,OACZtI,SAAUsI,IAAAA,KACVG,YAAaH,IAAAA,QAGfvI,EAA0B2I,aAAe,CACvCD,YAAa,CAAC,GAsBhB,gCEtYA,IAAIrN,EAAwB7F,OAAO6F,sBAC/BuN,EAAiBpT,OAAOd,UAAUkU,eAClCC,EAAmBrT,OAAOd,UAAUoU,qBAsDxCpY,EAAOD,QA5CP,WACC,IACC,IAAK+E,OAAOuT,OACX,OAAO,EAMR,IAAIC,EAAQ,IAAI1T,OAAO,OAEvB,GADA0T,EAAM,GAAK,KACkC,MAAzCxT,OAAOyT,oBAAoBD,GAAO,GACrC,OAAO,EAKR,IADA,IAAIE,EAAQ,CAAC,EACJpQ,EAAI,EAAGA,EAAI,GAAIA,IACvBoQ,EAAM,IAAM5T,OAAO6T,aAAarQ,IAAMA,EAKvC,GAAwB,eAHXtD,OAAOyT,oBAAoBC,GAAOvD,KAAI,SAAUlO,GAC5D,OAAOyR,EAAMzR,EACd,IACWuH,KAAK,IACf,OAAO,EAIR,IAAIoK,EAAQ,CAAC,EAIb,MAHA,uBAAuB/J,MAAM,IAAI9M,SAAQ,SAAU8W,GAClDD,EAAMC,GAAUA,CACjB,IAEE,yBADE7T,OAAOmE,KAAKnE,OAAOuT,OAAO,CAAC,EAAGK,IAAQpK,KAAK,GAMhD,CAAE,MAAOrE,GAER,OAAO,CACR,CACD,CAEiB2O,GAAoB9T,OAAOuT,OAAS,SAAUnQ,EAAQ8C,GAKtE,IAJA,IAAIT,EAEAK,EADAiO,EAtDL,SAAkBC,GACjB,GAAIA,QACH,MAAM,IAAInU,UAAU,yDAGrB,OAAOG,OAAOgU,EACf,CAgDUC,CAAS7Q,GAGT8Q,EAAI,EAAGA,EAAIxT,UAAUC,OAAQuT,IAAK,CAG1C,IAAK,IAAI7U,KAFToG,EAAOzF,OAAOU,UAAUwT,IAGnBd,EAAexT,KAAK6F,EAAMpG,KAC7B0U,EAAG1U,GAAOoG,EAAKpG,IAIjB,GAAIwG,EAAuB,CAC1BC,EAAUD,EAAsBJ,GAChC,IAAK,IAAInC,EAAI,EAAGA,EAAIwC,EAAQnF,OAAQ2C,IAC/B+P,EAAiBzT,KAAK6F,EAAMK,EAAQxC,MACvCyQ,EAAGjO,EAAQxC,IAAMmC,EAAKK,EAAQxC,IAGjC,CACD,CAEA,OAAOyQ,CACR,8BChFA,IAAII,EAAuB,EAAQ,KAEnC,SAASC,IAAiB,CAC1B,SAASC,IAA0B,CACnCA,EAAuBC,kBAAoBF,EAE3ClZ,EAAOD,QAAU,WACf,SAASsZ,EAAKlR,EAAOmR,EAAUC,EAAeC,EAAUC,EAAcC,GACpE,GAAIA,IAAWT,EAAf,CAIA,IAAIhP,EAAM,IAAI6F,MACZ,mLAKF,MADA7F,EAAIK,KAAO,sBACLL,CAPN,CAQF,CAEA,SAAS0P,IACP,OAAON,CACT,CAHAA,EAAKvB,WAAauB,EAMlB,IAAIO,EAAiB,CACnBC,MAAOR,EACPS,OAAQT,EACRU,KAAMV,EACNW,KAAMX,EACNY,OAAQZ,EACR5O,OAAQ4O,EACRa,OAAQb,EACRc,OAAQd,EAERe,IAAKf,EACLgB,QAASV,EACTjJ,QAAS2I,EACTiB,YAAajB,EACbkB,WAAYZ,EACZa,KAAMnB,EACNoB,SAAUd,EACVe,MAAOf,EACPgB,UAAWhB,EACXiB,MAAOjB,EACPkB,MAAOlB,EAEPmB,eAAgB3B,EAChBC,kBAAmBF,GAKrB,OAFAU,EAAe/B,UAAY+B,EAEpBA,CACT,iBC/CE5Z,EAAOD,QAAU,EAAQ,IAAR,yBCNnBC,EAAOD,QAFoB,2ECDd,IAAIyN,EAAE,EAAQ,KAAiBzG,EAAE,MAAMgU,EAAE,MAAMhb,EAAQib,SAAS,MAAMjb,EAAQkb,WAAW,MAAMlb,EAAQmb,SAAS,MAAM,IAAIC,EAAE,MAAMC,EAAE,MAAMhP,EAAE,MAAMrM,EAAQsb,SAAS,MAAM,IAAIC,EAAE,MAAMC,EAAE,MACpM,GAAG,mBAAoB1X,QAAQA,OAAO2X,IAAI,CAAC,IAAIC,EAAE5X,OAAO2X,IAAIzU,EAAE0U,EAAE,iBAAiBV,EAAEU,EAAE,gBAAgB1b,EAAQib,SAASS,EAAE,kBAAkB1b,EAAQkb,WAAWQ,EAAE,qBAAqB1b,EAAQmb,SAASO,EAAE,kBAAkBN,EAAEM,EAAE,kBAAkBL,EAAEK,EAAE,iBAAiBrP,EAAEqP,EAAE,qBAAqB1b,EAAQsb,SAASI,EAAE,kBAAkBH,EAAEG,EAAE,cAAcF,EAAEE,EAAE,aAAa,CAAC,IAAIC,EAAE,mBAAoB7X,QAAQA,OAAOC,SACtR,SAAS6X,EAAEC,GAAG,IAAI,IAAIC,EAAE,yDAAyDD,EAAEE,EAAE,EAAEA,EAAEtW,UAAUC,OAAOqW,IAAID,GAAG,WAAWE,mBAAmBvW,UAAUsW,IAAI,MAAM,yBAAyBF,EAAE,WAAWC,EAAE,gHAAgH,CACpb,IAAIG,EAAE,CAACxN,UAAU,WAAW,OAAM,CAAE,EAAEyN,mBAAmB,WAAW,EAAEC,oBAAoB,WAAW,EAAEC,gBAAgB,WAAW,GAAGC,EAAE,CAAC,EAAE,SAASC,EAAET,EAAEC,EAAEC,GAAGnT,KAAKR,MAAMyT,EAAEjT,KAAK2T,QAAQT,EAAElT,KAAK4T,KAAKH,EAAEzT,KAAK6T,QAAQV,GAAGE,CAAC,CACrN,SAASS,IAAI,CAAyB,SAASC,EAAEd,EAAEC,EAAEC,GAAGnT,KAAKR,MAAMyT,EAAEjT,KAAK2T,QAAQT,EAAElT,KAAK4T,KAAKH,EAAEzT,KAAK6T,QAAQV,GAAGE,CAAC,CADqGK,EAAErY,UAAU2Y,iBAAiB,CAAC,EAAEN,EAAErY,UAAU4Y,SAAS,SAAShB,EAAEC,GAAG,GAAG,iBAAkBD,GAAG,mBAAoBA,GAAG,MAAMA,EAAE,MAAM9L,MAAM6L,EAAE,KAAKhT,KAAK6T,QAAQL,gBAAgBxT,KAAKiT,EAAEC,EAAE,WAAW,EAAEQ,EAAErY,UAAU6Y,YAAY,SAASjB,GAAGjT,KAAK6T,QAAQP,mBAAmBtT,KAAKiT,EAAE,cAAc,EACjea,EAAEzY,UAAUqY,EAAErY,UAAsF,IAAI8Y,EAAEJ,EAAE1Y,UAAU,IAAIyY,EAAEK,EAAE/Y,YAAY2Y,EAAElP,EAAEsP,EAAET,EAAErY,WAAW8Y,EAAEC,sBAAqB,EAAG,IAAIC,EAAE,CAACxR,QAAQ,MAAMyR,EAAEnY,OAAOd,UAAUkU,eAAegF,EAAE,CAAC/Y,KAAI,EAAGkH,KAAI,EAAG8R,QAAO,EAAGC,UAAS,GAChS,SAASC,EAAEzB,EAAEC,EAAEC,GAAG,IAAIlN,EAAE0O,EAAE,CAAC,EAAEtR,EAAE,KAAKuR,EAAE,KAAK,GAAG,MAAM1B,EAAE,IAAIjN,UAAK,IAASiN,EAAExQ,MAAMkS,EAAE1B,EAAExQ,UAAK,IAASwQ,EAAE1X,MAAM6H,EAAE,GAAG6P,EAAE1X,KAAK0X,EAAEoB,EAAEvY,KAAKmX,EAAEjN,KAAKsO,EAAEhF,eAAetJ,KAAK0O,EAAE1O,GAAGiN,EAAEjN,IAAI,IAAI4O,EAAEhY,UAAUC,OAAO,EAAE,GAAG,IAAI+X,EAAEF,EAAE/N,SAASuM,OAAO,GAAG,EAAE0B,EAAE,CAAC,IAAI,IAAIC,EAAE9X,MAAM6X,GAAGnW,EAAE,EAAEA,EAAEmW,EAAEnW,IAAIoW,EAAEpW,GAAG7B,UAAU6B,EAAE,GAAGiW,EAAE/N,SAASkO,CAAC,CAAC,GAAG7B,GAAGA,EAAE3D,aAAa,IAAIrJ,KAAK4O,EAAE5B,EAAE3D,kBAAe,IAASqF,EAAE1O,KAAK0O,EAAE1O,GAAG4O,EAAE5O,IAAI,MAAM,CAAC8O,SAAS3W,EAAE7D,KAAK0Y,EAAEzX,IAAI6H,EAAEX,IAAIkS,EAAEpV,MAAMmV,EAAEK,OAAOX,EAAExR,QAAQ,CAChV,SAASoS,EAAEhC,GAAG,MAAM,iBAAkBA,GAAG,OAAOA,GAAGA,EAAE8B,WAAW3W,CAAC,CAAoG,IAAI8W,EAAE,OAAO,SAASC,EAAElC,EAAEC,GAAG,MAAM,iBAAkBD,GAAG,OAAOA,GAAG,MAAMA,EAAEzX,IAA7K,SAAgByX,GAAG,IAAIC,EAAE,CAAC,IAAI,KAAK,IAAI,MAAM,MAAM,IAAID,EAAE5T,QAAQ,SAAQ,SAAS4T,GAAG,OAAOC,EAAED,EAAE,GAAE,CAA+EmC,CAAO,GAAGnC,EAAEzX,KAAK0X,EAAEzR,SAAS,GAAG,CAC/W,SAAS4T,EAAEpC,EAAEC,EAAEC,EAAElN,EAAE0O,GAAG,IAAItR,SAAS4P,EAAK,cAAc5P,GAAG,YAAYA,IAAE4P,EAAE,MAAK,IAAI2B,GAAE,EAAG,GAAG,OAAO3B,EAAE2B,GAAE,OAAQ,OAAOvR,GAAG,IAAK,SAAS,IAAK,SAASuR,GAAE,EAAG,MAAM,IAAK,SAAS,OAAO3B,EAAE8B,UAAU,KAAK3W,EAAE,KAAKgU,EAAEwC,GAAE,GAAI,GAAGA,EAAE,OAAWD,EAAEA,EAANC,EAAE3B,GAASA,EAAE,KAAKhN,EAAE,IAAIkP,EAAEP,EAAE,GAAG3O,EAAEjJ,MAAM2D,QAAQgU,IAAIxB,EAAE,GAAG,MAAMF,IAAIE,EAAEF,EAAE5T,QAAQ6V,EAAE,OAAO,KAAKG,EAAEV,EAAEzB,EAAEC,EAAE,IAAG,SAASF,GAAG,OAAOA,CAAC,KAAI,MAAM0B,IAAIM,EAAEN,KAAKA,EAD/W,SAAW1B,EAAEC,GAAG,MAAM,CAAC6B,SAAS3W,EAAE7D,KAAK0Y,EAAE1Y,KAAKiB,IAAI0X,EAAExQ,IAAIuQ,EAAEvQ,IAAIlD,MAAMyT,EAAEzT,MAAMwV,OAAO/B,EAAE+B,OAAO,CACqRM,CAAEX,EAAExB,IAAIwB,EAAEnZ,KAAKoZ,GAAGA,EAAEpZ,MAAMmZ,EAAEnZ,IAAI,IAAI,GAAGmZ,EAAEnZ,KAAK6D,QAAQ6V,EAAE,OAAO,KAAKjC,IAAIC,EAAE3Z,KAAKob,IAAI,EAAyB,GAAvBC,EAAE,EAAE3O,EAAE,KAAKA,EAAE,IAAIA,EAAE,IAAOjJ,MAAM2D,QAAQsS,GAAG,IAAI,IAAI4B,EACzf,EAAEA,EAAE5B,EAAEnW,OAAO+X,IAAI,CAAQ,IAAIC,EAAE7O,EAAEkP,EAAf9R,EAAE4P,EAAE4B,GAAeA,GAAGD,GAAGS,EAAEhS,EAAE6P,EAAEC,EAAE2B,EAAEH,EAAE,MAAM,GAAGG,EANhE,SAAW7B,GAAG,OAAG,OAAOA,GAAG,iBAAkBA,EAAS,KAAsC,mBAAjCA,EAAEF,GAAGE,EAAEF,IAAIE,EAAE,eAA0CA,EAAE,IAAI,CAMtDsC,CAAEtC,GAAG,mBAAoB6B,EAAE,IAAI7B,EAAE6B,EAAE/Y,KAAKkX,GAAG4B,EAAE,IAAIxR,EAAE4P,EAAE7R,QAAQC,MAA6BuT,GAAGS,EAA1BhS,EAAEA,EAAE5I,MAA0ByY,EAAEC,EAAtB2B,EAAE7O,EAAEkP,EAAE9R,EAAEwR,KAAkBF,QAAQ,GAAG,WAAWtR,EAAE,MAAM6P,EAAE,GAAGD,EAAE9L,MAAM6L,EAAE,GAAG,oBAAoBE,EAAE,qBAAqB/W,OAAOmE,KAAK2S,GAAGtN,KAAK,MAAM,IAAIuN,IAAI,OAAO0B,CAAC,CAAC,SAASY,EAAEvC,EAAEC,EAAEC,GAAG,GAAG,MAAMF,EAAE,OAAOA,EAAE,IAAIhN,EAAE,GAAG0O,EAAE,EAAmD,OAAjDU,EAAEpC,EAAEhN,EAAE,GAAG,IAAG,SAASgN,GAAG,OAAOC,EAAEnX,KAAKoX,EAAEF,EAAE0B,IAAI,IAAU1O,CAAC,CAC3Z,SAASwP,EAAExC,GAAG,IAAI,IAAIA,EAAEyC,QAAQ,CAAC,IAAIxC,EAAED,EAAE0C,QAAQzC,EAAEA,IAAID,EAAEyC,QAAQ,EAAEzC,EAAE0C,QAAQzC,EAAEA,EAAEjI,MAAK,SAASiI,GAAG,IAAID,EAAEyC,UAAUxC,EAAEA,EAAE0C,QAAQ3C,EAAEyC,QAAQ,EAAEzC,EAAE0C,QAAQzC,EAAE,IAAE,SAASA,GAAG,IAAID,EAAEyC,UAAUzC,EAAEyC,QAAQ,EAAEzC,EAAE0C,QAAQzC,EAAE,GAAE,CAAC,GAAG,IAAID,EAAEyC,QAAQ,OAAOzC,EAAE0C,QAAQ,MAAM1C,EAAE0C,OAAQ,CAAC,IAAIE,EAAE,CAAChT,QAAQ,MAAM,SAASiT,IAAI,IAAI7C,EAAE4C,EAAEhT,QAAQ,GAAG,OAAOoQ,EAAE,MAAM9L,MAAM6L,EAAE,MAAM,OAAOC,CAAC,CAAC,IAAI8C,EAAE,CAACC,uBAAuBH,EAAEI,wBAAwB,CAACC,WAAW,GAAGC,kBAAkB9B,EAAE+B,qBAAqB,CAACvT,SAAQ,GAAI6M,OAAO7K,GACjezN,EAAQif,SAAS,CAAC/J,IAAIkJ,EAAEtc,QAAQ,SAAS+Z,EAAEC,EAAEC,GAAGqC,EAAEvC,GAAE,WAAWC,EAAE/V,MAAM6C,KAAKnD,UAAU,GAAEsW,EAAE,EAAEmD,MAAM,SAASrD,GAAG,IAAIC,EAAE,EAAuB,OAArBsC,EAAEvC,GAAE,WAAWC,GAAG,IAAUA,CAAC,EAAEqD,QAAQ,SAAStD,GAAG,OAAOuC,EAAEvC,GAAE,SAASA,GAAG,OAAOA,CAAC,KAAI,EAAE,EAAEuD,KAAK,SAASvD,GAAG,IAAIgC,EAAEhC,GAAG,MAAM9L,MAAM6L,EAAE,MAAM,OAAOC,CAAC,GAAG7b,EAAQ6S,UAAUyJ,EAAEtc,EAAQqf,cAAc1C,EAAE3c,EAAQsf,mDAAmDX,EAChX3e,EAAQuf,aAAa,SAAS1D,EAAEC,EAAEC,GAAG,GAAG,MAAOF,EAAc,MAAM9L,MAAM6L,EAAE,IAAIC,IAAI,IAAIhN,EAAEpB,EAAE,CAAC,EAAEoO,EAAEzT,OAAOmV,EAAE1B,EAAEzX,IAAI6H,EAAE4P,EAAEvQ,IAAIkS,EAAE3B,EAAE+B,OAAO,GAAG,MAAM9B,EAAE,CAAoE,QAAnE,IAASA,EAAExQ,MAAMW,EAAE6P,EAAExQ,IAAIkS,EAAEP,EAAExR,cAAS,IAASqQ,EAAE1X,MAAMmZ,EAAE,GAAGzB,EAAE1X,KAAQyX,EAAE1Y,MAAM0Y,EAAE1Y,KAAK+U,aAAa,IAAIuF,EAAE5B,EAAE1Y,KAAK+U,aAAa,IAAIwF,KAAK5B,EAAEoB,EAAEvY,KAAKmX,EAAE4B,KAAKP,EAAEhF,eAAeuF,KAAK7O,EAAE6O,QAAG,IAAS5B,EAAE4B,SAAI,IAASD,EAAEA,EAAEC,GAAG5B,EAAE4B,GAAG,CAAC,IAAIA,EAAEjY,UAAUC,OAAO,EAAE,GAAG,IAAIgY,EAAE7O,EAAEW,SAASuM,OAAO,GAAG,EAAE2B,EAAE,CAACD,EAAE7X,MAAM8X,GAAG,IAAI,IAAIpW,EAAE,EAAEA,EAAEoW,EAAEpW,IAAImW,EAAEnW,GAAG7B,UAAU6B,EAAE,GAAGuH,EAAEW,SAASiO,CAAC,CAAC,MAAM,CAACE,SAAS3W,EAAE7D,KAAK0Y,EAAE1Y,KACxfiB,IAAImZ,EAAEjS,IAAIW,EAAE7D,MAAMyG,EAAE+O,OAAOJ,EAAE,EAAExd,EAAQuI,cAAc,SAASsT,EAAEC,GAA8K,YAA3K,IAASA,IAAIA,EAAE,OAAMD,EAAE,CAAC8B,SAAStC,EAAEmE,sBAAsB1D,EAAE2D,cAAc5D,EAAE6D,eAAe7D,EAAE8D,aAAa,EAAEC,SAAS,KAAKC,SAAS,OAAQD,SAAS,CAACjC,SAASvC,EAAE0E,SAASjE,GAAUA,EAAEgE,SAAShE,CAAC,EAAE7b,EAAQ+f,cAAczC,EAAEtd,EAAQggB,cAAc,SAASnE,GAAG,IAAIC,EAAEwB,EAAE2C,KAAK,KAAKpE,GAAY,OAATC,EAAE3Y,KAAK0Y,EAASC,CAAC,EAAE9b,EAAQkgB,UAAU,WAAW,MAAM,CAACzU,QAAQ,KAAK,EAAEzL,EAAQmgB,WAAW,SAAStE,GAAG,MAAM,CAAC8B,SAAStR,EAAE+T,OAAOvE,EAAE,EAAE7b,EAAQqgB,eAAexC,EAC3e7d,EAAQsgB,KAAK,SAASzE,GAAG,MAAM,CAAC8B,SAASnC,EAAE+E,SAAS,CAACjC,SAAS,EAAEC,QAAQ1C,GAAG2E,MAAMnC,EAAE,EAAEre,EAAQygB,KAAK,SAAS5E,EAAEC,GAAG,MAAM,CAAC6B,SAASpC,EAAEpY,KAAK0Y,EAAE6E,aAAQ,IAAS5E,EAAE,KAAKA,EAAE,EAAE9b,EAAQ2S,YAAY,SAASkJ,EAAEC,GAAG,OAAO4C,IAAI/L,YAAYkJ,EAAEC,EAAE,EAAE9b,EAAQ2L,WAAW,SAASkQ,EAAEC,GAAG,OAAO4C,IAAI/S,WAAWkQ,EAAEC,EAAE,EAAE9b,EAAQ2gB,cAAc,WAAW,EAAE3gB,EAAQwL,UAAU,SAASqQ,EAAEC,GAAG,OAAO4C,IAAIlT,UAAUqQ,EAAEC,EAAE,EAAE9b,EAAQ4gB,oBAAoB,SAAS/E,EAAEC,EAAEC,GAAG,OAAO2C,IAAIkC,oBAAoB/E,EAAEC,EAAEC,EAAE,EAChd/b,EAAQ6gB,gBAAgB,SAAShF,EAAEC,GAAG,OAAO4C,IAAImC,gBAAgBhF,EAAEC,EAAE,EAAE9b,EAAQ8gB,QAAQ,SAASjF,EAAEC,GAAG,OAAO4C,IAAIoC,QAAQjF,EAAEC,EAAE,EAAE9b,EAAQ+gB,WAAW,SAASlF,EAAEC,EAAEC,GAAG,OAAO2C,IAAIqC,WAAWlF,EAAEC,EAAEC,EAAE,EAAE/b,EAAQuL,OAAO,SAASsQ,GAAG,OAAO6C,IAAInT,OAAOsQ,EAAE,EAAE7b,EAAQoO,SAAS,SAASyN,GAAG,OAAO6C,IAAItQ,SAASyN,EAAE,EAAE7b,EAAQghB,QAAQ,qCCnBnT/gB,EAAOD,QAAU,EAAjB,cCEFC,EAAOD,QAAU,CACf,MAAQ,EACR,MAAQ,EACR,IAAM,EACN,KAAO,EACP,OAAS,EACT,IAAM,EACN,KAAO,EACP,OAAS,EACT,MAAQ,EACR,MAAQ,EACR,OAAS,EACT,QAAU,EACV,OAAS,EACT,KAAO,yBCnBTC,EAAOD,QAAUM,wBCAjBL,EAAOD,QAAUQ,wBCAjBP,EAAOD,QAAUO,ICCb0gB,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB1c,IAAjB2c,EACH,OAAOA,EAAaphB,QAGrB,IAAIC,EAASghB,EAAyBE,GAAY,CAGjDnhB,QAAS,CAAC,GAOX,OAHAqhB,EAAoBF,GAAUlhB,EAAQA,EAAOD,QAASkhB,GAG/CjhB,EAAOD,OACf,CAGAkhB,EAAoB5Z,EAAI+Z,EpCzBpB5gB,EAAW,GACfygB,EAAoBjD,EAAI,CAAC1a,EAAQ+d,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASrZ,EAAI,EAAGA,EAAI5H,EAASiF,OAAQ2C,IAAK,CAGzC,IAFA,IAAKiZ,EAAUC,EAAIC,GAAY/gB,EAAS4H,GACpCsZ,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAAS5b,OAAQkc,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAazc,OAAOmE,KAAKgY,EAAoBjD,GAAGpR,OAAOzI,GAAS8c,EAAoBjD,EAAE7Z,GAAKkd,EAASM,MAC9IN,EAASO,OAAOD,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACblhB,EAASohB,OAAOxZ,IAAK,GACrB,IAAIgT,EAAIkG,SACE9c,IAAN4W,IAAiB9X,EAAS8X,EAC/B,CACD,CACA,OAAO9X,CAnBP,CAJCie,EAAWA,GAAY,EACvB,IAAI,IAAInZ,EAAI5H,EAASiF,OAAQ2C,EAAI,GAAK5H,EAAS4H,EAAI,GAAG,GAAKmZ,EAAUnZ,IAAK5H,EAAS4H,GAAK5H,EAAS4H,EAAI,GACrG5H,EAAS4H,GAAK,CAACiZ,EAAUC,EAAIC,EAqBjB,EqC1BdN,EAAoBnE,EAAI,CAAC,EACzBmE,EAAoBvE,EAAKmF,IACxB/c,OAAOmE,KAAKgY,EAAoBnE,GAAG7H,KAAK9Q,IACvC8c,EAAoBnE,EAAE3Y,GAAK0d,EAAQ,GAClC,ECHHZ,EAAoBla,EAAK/G,IACxB,IAAI8hB,EAAS9hB,GAAUA,EAAO+hB,WAC7B,IAAO/hB,EAAiB,QACxB,IAAM,EAEP,OADAihB,EAAoB3D,EAAEwE,EAAQ,CAAElG,EAAGkG,IAC5BA,CAAM,ECLdb,EAAoB3D,EAAI,CAACvd,EAASiiB,KACjC,IAAI,IAAI7d,KAAO6d,EACXf,EAAoB/W,EAAE8X,EAAY7d,KAAS8c,EAAoB/W,EAAEnK,EAASoE,IAC5EW,OAAOC,eAAehF,EAASoE,EAAK,CAAEa,YAAY,EAAMkK,IAAK8S,EAAW7d,IAE1E,ECND8c,EAAoB/W,EAAI,CAACtG,EAAKqe,IAAUnd,OAAOd,UAAUkU,eAAexT,KAAKd,EAAKqe,GCClFhB,EAAoB7F,EAAKrb,IACH,oBAAX8D,QAA0BA,OAAOqe,aAC1Cpd,OAAOC,eAAehF,EAAS8D,OAAOqe,YAAa,CAAE9e,MAAO,WAE7D0B,OAAOC,eAAehF,EAAS,aAAc,CAAEqD,OAAO,GAAO,ExCA1D3C,EAAkB,CACrB,IAAK,GAKNwgB,EAAoBnE,EAAE6E,EAAKE,IAC1B,IAAKZ,EAAoB/W,EAAEzJ,EAAiBohB,SAAyCrd,IAA7B/D,EAAgBohB,GAAiC,CACxGphB,EAAgBohB,GAAW,KAC3B,IAAIM,EAAOC,SAAStC,cAAc,QAE9BmB,EAAoBoB,IACvBF,EAAKG,aAAa,QAASrB,EAAoBoB,IAEhDF,EAAKI,IAAM,WACXJ,EAAKK,GAAK,SACVL,EAAKM,KAAOxB,EAAoBlG,EAAIkG,EAAoB3F,EAAEuG,GAC1DO,SAASM,KAAKC,YAAYR,EAC3B,GASDlB,EAAoBjD,EAAE2D,EAAKE,GAA0C,IAA7BphB,EAAgBohB,GyChCxDZ,EAAoBjD,EAAE,EAAG,CAAC,MAAM,KAC/BiD,EAAoBvE,EAAE,IAAI,GACxB,yECAGkG,8DAAKC,GAELC,EAAqB,GAAEF,2ECH7B,MAAM,aAAEG,EAAY,oBAAEC,GAAwBC,IAAAA,KACxCC,EAAeD,IAAAA,KAAWE,OAAOD,aA2GxBxiB,eAAe0iB,EAC5B1T,EACA2T,EACAnS,EACAoS,GAEA,MAAMC,EAAgB7T,EAAiBmD,eACrC,oDAEIkF,EAAarI,EAAiB8T,sBAAsB,IACpD,YAAEC,GAAgB1L,EAAW2L,eAAiB,CAAC,GAE/C,mBAAEC,GAAuBJ,EAAcxjB,QACvC6jB,EAwHR,SAAqD1S,GACnD,OAAOA,EAAqBI,OAAO2D,KAAI4O,IAC9B,CACLC,QAASD,EAAMC,QACfC,eAAgBF,EAAMG,kBAG5B,CA/HqCC,CACjC/S,GAKFmS,EAAmB5S,UAAW,EAC9B,IAAIjI,EAAW6a,EAAmB7a,SAElC,GAAKib,GAAgBA,EAAYS,cA/HnCxjB,eAAuC8H,EAAU2b,GAC/C,IAAK3b,IAAaA,EAAS4b,mBACzB,OAAOxhB,QAAQE,OAAO,iDAGxB,MAAMuhB,EAAc,IAAIC,IAExB,IAAK,MAAMC,KAAc/b,EAAS4b,mBAAoB,CACpD,MAAMI,EAAsBD,EAAWE,oBACvC,GAAKF,GAAeA,EAAWG,gBAK/B,IAAK,MAAMC,KAAWJ,EAAWG,gBAAiB,CAChD,IAAKC,IAAYA,EAAQC,YACvB,OAAOhiB,QAAQE,OAAO,kCAGxB,MAAM+hB,EAAcF,EAAQC,YAE5B,GAAIjf,MAAM2D,QAAQub,GAChBR,EAAYS,IAAIN,GACZH,EACGnV,IAAIsV,GACJtiB,KAAKU,QAAQC,QAAQgiB,IACxBR,EAAYU,IAAIP,EAAqB,CACnC5hB,QAAQC,QAAQgiB,SAEjB,KAAIA,IAAeA,EAAYG,YAwBpC,OAAOpiB,QAAQE,OAAQ,wBAAuB+hB,KAxBG,CACjD,MAAMpB,EAAcoB,EAAYG,YAEhC,IACGb,IACAA,EAAWc,WACXd,EAAWc,SAASxB,YAErB,OAAO7gB,QAAQE,OACb,kDAIJ,MAAMoiB,EAAkBf,EAAWc,SAASxB,YAAY,CACtDuB,YAAavB,EACb0B,iBAAkB3c,EAAS2c,iBAC3BrT,kBAAmBtJ,EAASsJ,kBAC5BkS,eAAgBxb,EAASwb,iBAG3BK,EAAYS,IAAIN,GACZH,EAAYnV,IAAIsV,GAAqBtiB,KAAKgjB,GAC1Cb,EAAYU,IAAIP,EAAqB,CAACU,GAC5C,CAEA,CACF,MA7CEb,EAAYU,IAAIP,EAAqB,CAAC5hB,QAAQC,QAAQ,KA8C1D,CAEA,MAAMuiB,EAAsB,IAAId,IAChC,IAAK,MAAOngB,EAAKkhB,KAAiBhB,EAAYiB,UAC5CF,EAAoBL,IAAI5gB,QAAWvB,QAAQ2iB,WAAWF,IAGxD7c,EAAS4b,mBAAmBviB,SAAQ0iB,IAClC,IACE,MAAMC,EAAsBD,EAAWE,oBACjCe,EAAmBJ,EAAoBlW,IAAIsV,GAE7CD,EAAWG,iBACbH,EAAWG,gBAAgB7iB,SAAQ,CAAC8iB,EAAS5iB,KAC3C,MAAM0jB,EAAUD,EAAiBzjB,GACjC,GAAuB,cAAnB0jB,EAAQC,OACV,GACE/f,MAAM2D,QAAQmc,EAAQriB,QACtBqiB,EAAQriB,MAAMwJ,MAAM/H,OAAO8gB,UAG3BhB,EAAQC,YAAca,EAAQriB,UACzB,CAEL,MAAMwiB,EAAa,IAAIC,WAAWJ,EAAQriB,OAEpC0iB,GADc,IAAIC,aACWC,OAAOJ,GAEd,iBAAnBE,GACPA,EAAerR,SAAS,MAExBkQ,EAAQC,YAAckB,EACnBnX,MAAM,MACNsG,IAAIgR,YAEPtB,EAAQC,YAAc,EAE1B,MAEAxf,QAAQ8gB,MAAMT,EAAQU,OACxB,GAGN,CAAE,MAAOD,GACP9gB,QAAQ8gB,MAAMA,EAChB,IAEJ,CAsCUE,CAAwB5d,EAAUuP,OAdA,CACxC,MAAMsO,QAAuB1C,EAAmB2C,qBAC9CjD,EACA,KACAC,GAGIiD,EAAYxD,EAAayD,SAASH,GAClCI,EAAkBzD,EAAoB0D,kBAC1CH,EAAUI,MAEZF,EAAgBG,MAAQ5D,EAAoB6D,cAAcN,EAAUO,MACpEte,EAAWie,CACb,CAIA,MAAM,wBACJM,EAAuB,mBACvB3C,EAAkB,0BAClB4C,GACExe,EAGEye,EAAe,CACnBC,kBAAmB1e,EAAS0e,kBAC5BpV,kBAAmBtJ,EAASsJ,kBAC5BqV,YAAa,GACbC,SAAS,GAGX,IAAK,IAAIhf,EAAI,EAAGA,EAAIgc,EAAmB3e,OAAQ2C,IAAK,CAClD,MAAMmc,EAAaH,EAAmBhc,IAChC,gBAAEsc,GAAoBH,EAE5B,IAAKG,EACH,SAGF,MAAM2C,GAAc,EAEdC,GA4JQC,EA5JwB7C,EA6JjC/e,MAAM2D,QAAQie,GAAcA,EAAa,CAACA,IA3JzCC,EAAgB,GACtB,IAAK,IAAI1L,EAAI,EAAGA,EAAIwL,EAAqB7hB,OAAQqW,IAAK,CACpD,MAAM,qBACJ2L,EAAoB,YACpB7C,EAAW,sBACX8C,EAAqB,qBACrBC,GACEL,EAAqBxL,GAEnBiI,EAAiB0D,EAAqBG,yBAG5C,IAFgBC,EAAYjE,EAA4BG,GAGtD,SAEF,IAAIsD,GAAc,EAElB,MAAMS,EAAS,GACf,IAAK,IAAI/M,EAAI,EAAGA,EAA4B,EAAxB2M,EAA2B3M,GAAK,EAClD+M,EAAO5lB,KAAK,CACVwZ,EAAGkJ,EAAY7J,GACfmD,EAAG0G,EAAY7J,EAAI,GACnBY,EAAGiJ,EAAY7J,EAAI,KAIvB,OAAQ4M,GACN,IAAK,gBACL,IAAK,cACL,IAAK,QACHN,GAAc,EAEd,MACF,QACE,SAGJG,EAActlB,KAAK,CACjB6lB,eAAgBL,EAChBI,SACA5kB,KAAMykB,EACNN,eAEJ,CAEAW,EACEf,EACAF,EACAC,EACAzC,EACAiD,EACAH,EAEJ,CAqGF,IAAkBE,EApGhB,OAAON,CACT,CAEA,MAAMY,EAAcA,CAACjE,EAA4BG,KAC/C,MAAMkE,EAAkCrE,EAA2BsE,MACjED,GACEA,EAAgClE,iBAAmBA,IAGvD,OAAOkE,EACHA,EAAgCnE,QAChC,IAAI,EAYV,SAASkE,EACPf,EACAF,EACAC,EACAzC,EACAiD,EACAH,GAEA,MAAMc,EAAkBpB,EAAwBmB,MAC9CE,GACEA,EAAgBC,YAAc9D,EAAWE,sBAGvC6D,EAAiB,CACrBD,UAAWF,EAAgBE,UAC3BE,QAASJ,EAAgBI,QACzBC,uBAAwBL,EAAgBK,uBACxCC,eAAgBN,EAAgBM,eAChCpB,cACAG,gBACAJ,SAAS,IAiBb,SAAiC7C,EAAY+D,GAC3C,IAAI,gBAAEI,EAAe,8BAAEC,GAAkCpE,GAEpDmE,GAAmBC,IAEtBD,EAAkBxF,EAAayF,IAG7BD,IACFJ,EAAeM,WAAa,IAAIF,GAEpC,CAzBEG,CAAwBtE,EAAY+D,GAEhCtB,GAyBN,SACEsB,EACAtB,EACAqB,GAEA,MAAMS,EAAoB9B,EAA0BkB,MAClDY,GAAqBA,EAAkBrE,sBAAwB4D,IAGjE,GAAIS,EAAmB,CAErB,MAAM,kBACJC,EAAiB,0BACjBC,EAAyB,qBACzBC,EAAoB,eACpBC,GACEJ,EAEJR,EAAeQ,kBAAoB,CACjCC,oBACAC,4BACAC,uBACAC,iBAEJ,CACF,CAhDIC,CACEb,EACAtB,EACAzC,EAAWE,qBAIfwC,EAAaE,YAAYjlB,KAAKomB,EAChC,CCzRA,MAAMc,EAAe,CAAC,iCAEtB,IAAIC,EAAe,CAAC,EAEpB,SAASC,EACPC,EACAzoB,EACA4O,GAEA,MAAMlH,EAAW+gB,EAAU,IAErB,iBACJpE,EAAgB,kBAChBrT,EAAiB,eACjBkS,EAAc,kBACdnS,EAAiB,aACjBE,EAAY,WACZyX,EAAU,YACVC,EAAW,SACXC,EAAQ,QACRC,EAAO,YACPC,GACEphB,EAEE2J,EAAa,CACjB0X,SAAU,WACVC,SAAS,EACTC,mBAAmB,EACnB5oB,sBAAuBkO,EAAAA,MAAM2a,OAC7BnY,oBACAE,eACAyX,aACAxF,iBACAlS,oBACAqT,mBACArC,kBAAiB,EACjB2G,cACAQ,iBAAkB,KAClBC,4BAA6B,KAC7B9oB,gCAAiC,KACjC+oB,qBAAqB,EACrB1Z,UAAU,EACVJ,YAAY,EACZ4W,aAAc,KACdmC,eACA5gB,WACAkhB,WACAE,cACAD,UACAS,qBAAqB,GAGvB,IAAIC,EAA2B7hB,EAAS8hB,yBAWxC,GATE9hB,EAAS+hB,qCACR/hB,EAAS8hB,2BAEV9hB,EAAS8hB,yBAmFb,SACEC,GAEA,MAAMD,EAA2B,GA6BjC,OA3BAC,EAAmC1oB,SAAQ2oB,IACzC,MAAM,0BAAEC,GAA8BD,EAEtCC,EAA0B5oB,SAAQ6oB,IAChC,MAAM,2BAAEC,GAA+BD,EAEvCC,EAA2B9oB,SAAQ+oB,IACjC,MAAMC,EAA6B,IAC7B,qBAAEpD,EAAoB,kBAAE3V,GAAsB8Y,EAEpDnD,EAAqB5lB,SAAQipB,IAC3BD,EAA2B3oB,KAAK,CAC9B0lB,yBAA0BkD,EAAalD,yBACvCmD,sBAAuBD,EAAaC,uBACpC,IAGJ,MAAMC,EAAmB,CACvBlZ,oBACA+Y,8BAGFP,EAAyBpoB,KAAK8oB,EAAiB,GAC/C,GACF,IAGGV,CACT,CApHwCW,CAClCziB,EAAS+hB,oCAEXF,EAA2B7hB,EAAS8hB,2BAGjCD,EACH,MAAM,IAAIva,MAAM,wDAGlB,MAAMkb,EAAmBX,EAAyB,GA2BlD,OAzBAlY,EAAW8X,iBACTzhB,EAAS8hB,yBAAyBO,2BACpC1Y,EAAW+X,4BAA8Bc,EAAiBlZ,kBAE1DK,EAAWhB,uBAAyB,KAClC,MAAM,kBAAE+Z,GAAsBpqB,EAAgBI,SACxCiqB,EAAwBD,EAAkBE,wBAC9CjZ,EAAW+X,6BAGb,IAAKiB,GAA0D,IAAjCA,EAAsB1lB,OAClD,MAAM,IAAIqK,MAAM,+CAGlB,MAAMoB,EAAuBia,EAAsB,GAKnD,OAHAhZ,EAAW/Q,gCACT8P,EAAqB/P,sBAEhB+P,CAAoB,EAG7BiB,EAAWkZ,KAAO1qB,IAAA,IAAC,QAAE2iB,GAAS3iB,EAAA,OAMhC,SAAeC,EAAcE,EAAiB4O,EAAkB4T,GAC9D,MAAM,eAAEU,GAAmBpjB,GACrB,oBAAEG,GAAwBD,EAAgBI,UAE7CN,EAAakpB,SAAWlpB,EAAa6P,WACtC4Y,EAAarF,GADb,EAoCF,OA7BApjB,EAAakpB,SAAU,EAIvBT,EAAarF,GAAkB,IAAIphB,SAAQlC,MAAOmC,EAASC,KACzD,IAAKlC,EAAaqmB,aAAc,CAC9B,MAAMA,QAAqB7D,EACzB1T,EACA9O,EACAA,EAAauQ,yBACbmS,GAGF1iB,EAAaqmB,aAAeA,CAC9B,CAEA,MAAMqE,GAAiB,EACvBvqB,EACGO,kCAAkCV,EAAc,KAAM0qB,GACtD1X,MAAK,KACJhT,EAAakpB,SAAU,EACvBjnB,GAAS,IAEV0oB,OAAMrF,IACLtlB,EAAakpB,SAAU,EACvBhnB,EAAOojB,EAAM,GACb,IAGCmD,EAAarF,EACtB,CA9CIwH,CAAMrZ,EAAYrR,EAAiB4O,EAAkB4T,EAAQ,EAExD,CAACnR,EACV,CA0GA,QAhBA,SAAiCoC,GAAwC,IAAvC,gBAAEzT,EAAe,iBAAE4O,GAAkB6E,EACrE,MAAO,CACL,CACEjK,KAAM,WACN8e,eACAqC,yBAA0BlC,GACjBD,EACLC,EACAzoB,EACA4O,IAKV,sOCvMA,MAAMkD,EAAYE,EAAAA,MAAW,IACpB,wCAKHxD,EAA4BnH,GAE9B2K,EAAAA,cAACA,EAAAA,SAAc,CAAC4Y,SAAU5Y,EAAAA,cAAA,WAAK,eAC7BA,EAAAA,cAACF,EAAczK,IA8CrB,EAtC8C,CAK5Cya,GAAE,EAQF+I,kBAAiBhrB,GAGoB,IAHnB,gBAChBG,EAAe,iBACf4O,GACiC/O,EAWjC,MAAO,CAAC,CAAE2J,KAAM,WAAYqI,UAVcxK,GAEtC2K,EAAAA,cAACxD,EAAyByD,EAAA,CACxBjS,gBAAiBA,EACjB4O,iBAAkBA,GACdvH,KAMZ,EAOAyjB,yBAAwBA","sources":["webpack://ohif-extension-cornerstone-dicom-rt/webpack/universalModuleDefinition","webpack://ohif-extension-cornerstone-dicom-rt/webpack/runtime/chunk loaded","webpack://ohif-extension-cornerstone-dicom-rt/webpack/runtime/jsonp chunk loading","webpack://ohif-extension-cornerstone-dicom-rt/./utils/_hydrateRT.ts","webpack://ohif-extension-cornerstone-dicom-rt/./utils/promptHydrateRT.ts","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/react-i18next/dist/es/utils.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/react-i18next/dist/es/unescape.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/react-i18next/dist/es/defaults.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/react-i18next/dist/es/i18nInstance.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/react-i18next/dist/es/context.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/react-i18next/dist/es/useTranslation.js","webpack://ohif-extension-cornerstone-dicom-rt/./utils/initRTToolGroup.ts","webpack://ohif-extension-cornerstone-dicom-rt/./viewports/OHIFCornerstoneRTViewport.tsx","webpack://ohif-extension-cornerstone-dicom-rt/./viewports/_getStatusComponent.tsx","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/object-assign/index.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/prop-types/factoryWithThrowingShims.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/prop-types/index.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/react/cjs/react.production.min.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/react/index.js","webpack://ohif-extension-cornerstone-dicom-rt/../../../node_modules/void-elements/index.js","webpack://ohif-extension-cornerstone-dicom-rt/external umd \"@ohif/core\"","webpack://ohif-extension-cornerstone-dicom-rt/external umd \"@ohif/ui\"","webpack://ohif-extension-cornerstone-dicom-rt/external umd \"dcmjs\"","webpack://ohif-extension-cornerstone-dicom-rt/webpack/bootstrap","webpack://ohif-extension-cornerstone-dicom-rt/webpack/runtime/chunk prefetch function","webpack://ohif-extension-cornerstone-dicom-rt/webpack/runtime/compat get default export","webpack://ohif-extension-cornerstone-dicom-rt/webpack/runtime/define property getters","webpack://ohif-extension-cornerstone-dicom-rt/webpack/runtime/hasOwnProperty shorthand","webpack://ohif-extension-cornerstone-dicom-rt/webpack/runtime/make namespace object","webpack://ohif-extension-cornerstone-dicom-rt/webpack/runtime/startup prefetch","webpack://ohif-extension-cornerstone-dicom-rt/./id.js","webpack://ohif-extension-cornerstone-dicom-rt/./loadRTStruct.js","webpack://ohif-extension-cornerstone-dicom-rt/./getSopClassHandlerModule.js","webpack://ohif-extension-cornerstone-dicom-rt/./index.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@ohif/core\"), require(\"dcmjs\"), require(\"@ohif/ui\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@ohif/core\", \"dcmjs\", \"@ohif/ui\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ohif-extension-cornerstone-dicom-rt\"] = factory(require(\"@ohif/core\"), require(\"dcmjs\"), require(\"@ohif/ui\"));\n\telse\n\t\troot[\"ohif-extension-cornerstone-dicom-rt\"] = factory(root[\"@ohif/core\"], root[\"dcmjs\"], root[\"@ohif/ui\"]);\n})(globalThis, (__WEBPACK_EXTERNAL_MODULE__762__, __WEBPACK_EXTERNAL_MODULE__836__, __WEBPACK_EXTERNAL_MODULE__369__) => {\nreturn ","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n__webpack_require__.F.j = (chunkId) => {\n\tif((!__webpack_require__.o(installedChunks, chunkId) || installedChunks[chunkId] === undefined) && true) {\n\t\tinstalledChunks[chunkId] = null;\n\t\tvar link = document.createElement('link');\n\n\t\tif (__webpack_require__.nc) {\n\t\t\tlink.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tlink.rel = \"prefetch\";\n\t\tlink.as = \"script\";\n\t\tlink.href = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\tdocument.head.appendChild(link);\n\t}\n};\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// no jsonp function","async function _hydrateRTDisplaySet({\n  rtDisplaySet,\n  viewportIndex,\n  servicesManager,\n}) {\n  const {\n    segmentationService,\n    hangingProtocolService,\n    viewportGridService,\n  } = servicesManager.services;\n\n  const displaySetInstanceUID = rtDisplaySet.referencedDisplaySetInstanceUID;\n\n  let segmentationId = null;\n\n  // We need the hydration to notify panels about the new segmentation added\n  const suppressEvents = false;\n\n  segmentationId = await segmentationService.createSegmentationForRTDisplaySet(\n    rtDisplaySet,\n    segmentationId,\n    suppressEvents\n  );\n\n  segmentationService.hydrateSegmentation(rtDisplaySet.displaySetInstanceUID);\n\n  const { viewports } = viewportGridService.getState();\n\n  const updatedViewports = hangingProtocolService.getViewportsRequireUpdate(\n    viewportIndex,\n    displaySetInstanceUID\n  );\n\n  viewportGridService.setDisplaySetsForViewports(updatedViewports);\n\n  // Todo: fix this after we have a better way for stack viewport segmentations\n\n  // check every viewport in the viewports to see if the displaySetInstanceUID\n  // is being displayed, if so we need to update the viewport to use volume viewport\n  // (if already is not using it) since Cornerstone3D currently only supports\n  // volume viewport for segmentation\n  viewports.forEach((viewport, index) => {\n    if (index === viewportIndex) {\n      return;\n    }\n\n    const shouldDisplaySeg = segmentationService.shouldRenderSegmentation(\n      viewport.displaySetInstanceUIDs,\n      rtDisplaySet.displaySetInstanceUID\n    );\n\n    if (shouldDisplaySeg) {\n      updatedViewports.push({\n        viewportIndex: index,\n        displaySetInstanceUIDs: viewport.displaySetInstanceUIDs,\n        viewportOptions: {\n          initialImageOptions: {\n            preset: 'middle',\n          },\n        },\n      });\n    }\n  });\n\n  // Do the entire update at once\n  viewportGridService.setDisplaySetsForViewports(updatedViewports);\n  return true;\n}\n\nexport default _hydrateRTDisplaySet;\n","import hydrateRTDisplaySet from './_hydrateRT';\n\nconst RESPONSE = {\n  NO_NEVER: -1,\n  CANCEL: 0,\n  HYDRATE_SEG: 5,\n};\n\nfunction promptHydrateRT({\n  servicesManager,\n  rtDisplaySet,\n  viewportIndex,\n  toolGroupId = 'default',\n}) {\n  const { uiViewportDialogService } = servicesManager.services;\n\n  return new Promise(async function(resolve, reject) {\n    const promptResult = await _askHydrate(\n      uiViewportDialogService,\n      viewportIndex\n    );\n\n    if (promptResult === RESPONSE.HYDRATE_SEG) {\n      const isHydrated = await hydrateRTDisplaySet({\n        rtDisplaySet,\n        viewportIndex,\n        toolGroupId,\n        servicesManager,\n      });\n\n      resolve(isHydrated);\n    }\n  });\n}\n\nfunction _askHydrate(uiViewportDialogService, viewportIndex) {\n  return new Promise(function(resolve, reject) {\n    const message = 'Do you want to open this Segmentation?';\n    const actions = [\n      {\n        type: 'secondary',\n        text: 'No',\n        value: RESPONSE.CANCEL,\n      },\n      {\n        type: 'primary',\n        text: 'Yes',\n        value: RESPONSE.HYDRATE_SEG,\n      },\n    ];\n    const onSubmit = result => {\n      uiViewportDialogService.hide();\n      resolve(result);\n    };\n\n    uiViewportDialogService.show({\n      viewportIndex,\n      type: 'info',\n      message,\n      actions,\n      onSubmit,\n      onOutsideClick: () => {\n        uiViewportDialogService.hide();\n        resolve(RESPONSE.CANCEL);\n      },\n    });\n  });\n}\n\nexport default promptHydrateRT;\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import e from\"void-elements\";var t=/\\s([^'\"/\\s><]+?)[\\s/>]|([^\\s=]+)=\\s?(\".*?\"|'.*?')/g;function n(n){var r={type:\"tag\",name:\"\",voidElement:!1,attrs:{},children:[]},i=n.match(/<\\/?([^\\s]+?)[/\\s>]/);if(i&&(r.name=i[1],(e[i[1]]||\"/\"===n.charAt(n.length-2))&&(r.voidElement=!0),r.name.startsWith(\"!--\"))){var s=n.indexOf(\"--\\x3e\");return{type:\"comment\",comment:-1!==s?n.slice(4,s):\"\"}}for(var a=new RegExp(t),c=null;null!==(c=a.exec(n));)if(c[0].trim())if(c[1]){var o=c[1].trim(),l=[o,\"\"];o.indexOf(\"=\")>-1&&(l=o.split(\"=\")),r.attrs[l[0]]=l[1],a.lastIndex--}else c[2]&&(r.attrs[c[2]]=c[3].trim().substring(1,c[3].length-1));return r}var r=/<[a-zA-Z0-9\\-\\!\\/](?:\"[^\"]*\"|'[^']*'|[^'\">])*>/g,i=/^\\s*$/,s=Object.create(null);function a(e,t){switch(t.type){case\"text\":return e+t.content;case\"tag\":return e+=\"<\"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'=\"'+e[n]+'\"');return t.length?\" \"+t.join(\" \"):\"\"}(t.attrs):\"\")+(t.voidElement?\"/>\":\">\"),t.voidElement?e:e+t.children.reduce(a,\"\")+\"</\"+t.name+\">\";case\"comment\":return e+\"\\x3c!--\"+t.comment+\"--\\x3e\"}}var c={parse:function(e,t){t||(t={}),t.components||(t.components=s);var a,c=[],o=[],l=-1,m=!1;if(0!==e.indexOf(\"<\")){var u=e.indexOf(\"<\");c.push({type:\"text\",content:-1===u?e:e.substring(0,u)})}return e.replace(r,function(r,s){if(m){if(r!==\"</\"+a.name+\">\")return;m=!1}var u,f=\"/\"!==r.charAt(1),h=r.startsWith(\"\\x3c!--\"),p=s+r.length,d=e.charAt(p);if(h){var v=n(r);return l<0?(c.push(v),c):((u=o[l]).children.push(v),c)}if(f&&(l++,\"tag\"===(a=n(r)).type&&t.components[a.name]&&(a.type=\"component\",m=!0),a.voidElement||m||!d||\"<\"===d||a.children.push({type:\"text\",content:e.slice(p,e.indexOf(\"<\",p))}),0===l&&c.push(a),(u=o[l-1])&&u.children.push(a),o[l]=a),(!f||a.voidElement)&&(l>-1&&(a.voidElement||a.name===r.slice(2,-1))&&(l--,a=-1===l?c:o[l]),!m&&\"<\"!==d&&d)){u=-1===l?c:o[l].children;var x=e.indexOf(\"<\",p),g=e.slice(p,-1===x?void 0:x);i.test(g)&&(g=\" \"),(x>-1&&l+u.length>=0||\" \"!==g)&&u.push({type:\"text\",content:g})}}),c},stringify:function(e){return e.reduce(function(e,t){return e+a(\"\",t)},\"\")}};export default c;\n//# sourceMappingURL=html-parse-stringify.module.js.map\n","export function warn() {\n  if (console && console.warn) {\n    var _console;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[0] === 'string') args[0] = \"react-i18next:: \".concat(args[0]);\n\n    (_console = console).warn.apply(_console, args);\n  }\n}\nvar alreadyWarned = {};\nexport function warnOnce() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  if (typeof args[0] === 'string' && alreadyWarned[args[0]]) return;\n  if (typeof args[0] === 'string') alreadyWarned[args[0]] = new Date();\n  warn.apply(void 0, args);\n}\n\nvar loadedClb = function loadedClb(i18n, cb) {\n  return function () {\n    if (i18n.isInitialized) {\n      cb();\n    } else {\n      var initialized = function initialized() {\n        setTimeout(function () {\n          i18n.off('initialized', initialized);\n        }, 0);\n        cb();\n      };\n\n      i18n.on('initialized', initialized);\n    }\n  };\n};\n\nexport function loadNamespaces(i18n, ns, cb) {\n  i18n.loadNamespaces(ns, loadedClb(i18n, cb));\n}\nexport function loadLanguages(i18n, lng, ns, cb) {\n  if (typeof ns === 'string') ns = [ns];\n  ns.forEach(function (n) {\n    if (i18n.options.ns.indexOf(n) < 0) i18n.options.ns.push(n);\n  });\n  i18n.loadLanguages(lng, loadedClb(i18n, cb));\n}\n\nfunction oldI18nextHasLoadedNamespace(ns, i18n) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var lng = i18n.languages[0];\n  var fallbackLng = i18n.options ? i18n.options.fallbackLng : false;\n  var lastLng = i18n.languages[i18n.languages.length - 1];\n  if (lng.toLowerCase() === 'cimode') return true;\n\n  var loadNotPending = function loadNotPending(l, n) {\n    var loadState = i18n.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n    return loadState === -1 || loadState === 2;\n  };\n\n  if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18n.services.backendConnector.backend && i18n.isLanguageChangingTo && !loadNotPending(i18n.isLanguageChangingTo, ns)) return false;\n  if (i18n.hasResourceBundle(lng, ns)) return true;\n  if (!i18n.services.backendConnector.backend || i18n.options.resources && !i18n.options.partialBundledLanguages) return true;\n  if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n  return false;\n}\n\nexport function hasLoadedNamespace(ns, i18n) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (!i18n.languages || !i18n.languages.length) {\n    warnOnce('i18n.languages were undefined or empty', i18n.languages);\n    return true;\n  }\n\n  var isNewerI18next = i18n.options.ignoreJSONStructure !== undefined;\n\n  if (!isNewerI18next) {\n    return oldI18nextHasLoadedNamespace(ns, i18n, options);\n  }\n\n  return i18n.hasLoadedNamespace(ns, {\n    lng: options.lng,\n    precheck: function precheck(i18nInstance, loadNotPending) {\n      if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18nInstance.services.backendConnector.backend && i18nInstance.isLanguageChangingTo && !loadNotPending(i18nInstance.isLanguageChangingTo, ns)) return false;\n    }\n  });\n}\nexport function getDisplayName(Component) {\n  return Component.displayName || Component.name || (typeof Component === 'string' && Component.length > 0 ? Component : 'Unknown');\n}","var matchHtmlEntity = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g;\nvar htmlEntities = {\n  '&amp;': '&',\n  '&#38;': '&',\n  '&lt;': '<',\n  '&#60;': '<',\n  '&gt;': '>',\n  '&#62;': '>',\n  '&apos;': \"'\",\n  '&#39;': \"'\",\n  '&quot;': '\"',\n  '&#34;': '\"',\n  '&nbsp;': ' ',\n  '&#160;': ' ',\n  '&copy;': '',\n  '&#169;': '',\n  '&reg;': '',\n  '&#174;': '',\n  '&hellip;': '',\n  '&#8230;': '',\n  '&#x2F;': '/',\n  '&#47;': '/'\n};\n\nvar unescapeHtmlEntity = function unescapeHtmlEntity(m) {\n  return htmlEntities[m];\n};\n\nexport var unescape = function unescape(text) {\n  return text.replace(matchHtmlEntity, unescapeHtmlEntity);\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { unescape } from './unescape.js';\nvar defaultOptions = {\n  bindI18n: 'languageChanged',\n  bindI18nStore: '',\n  transEmptyNodeValue: '',\n  transSupportBasicHtmlNodes: true,\n  transWrapTextNodes: '',\n  transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'p'],\n  useSuspense: true,\n  unescape: unescape\n};\nexport function setDefaults() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  defaultOptions = _objectSpread(_objectSpread({}, defaultOptions), options);\n}\nexport function getDefaults() {\n  return defaultOptions;\n}","var i18nInstance;\nexport function setI18n(instance) {\n  i18nInstance = instance;\n}\nexport function getI18n() {\n  return i18nInstance;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createContext } from 'react';\nimport { getDefaults, setDefaults } from './defaults.js';\nimport { getI18n, setI18n } from './i18nInstance.js';\nimport { initReactI18next } from './initReactI18next.js';\nexport { getDefaults, setDefaults, getI18n, setI18n, initReactI18next };\nexport var I18nContext = createContext();\nexport var ReportNamespaces = function () {\n  function ReportNamespaces() {\n    _classCallCheck(this, ReportNamespaces);\n\n    this.usedNamespaces = {};\n  }\n\n  _createClass(ReportNamespaces, [{\n    key: \"addUsedNamespaces\",\n    value: function addUsedNamespaces(namespaces) {\n      var _this = this;\n\n      namespaces.forEach(function (ns) {\n        if (!_this.usedNamespaces[ns]) _this.usedNamespaces[ns] = true;\n      });\n    }\n  }, {\n    key: \"getUsedNamespaces\",\n    value: function getUsedNamespaces() {\n      return Object.keys(this.usedNamespaces);\n    }\n  }]);\n\n  return ReportNamespaces;\n}();\nexport function composeInitialProps(ForComponent) {\n  return function (ctx) {\n    return new Promise(function (resolve) {\n      var i18nInitialProps = getInitialProps();\n\n      if (ForComponent.getInitialProps) {\n        ForComponent.getInitialProps(ctx).then(function (componentsInitialProps) {\n          resolve(_objectSpread(_objectSpread({}, componentsInitialProps), i18nInitialProps));\n        });\n      } else {\n        resolve(i18nInitialProps);\n      }\n    });\n  };\n}\nexport function getInitialProps() {\n  var i18n = getI18n();\n  var namespaces = i18n.reportNamespaces ? i18n.reportNamespaces.getUsedNamespaces() : [];\n  var ret = {};\n  var initialI18nStore = {};\n  i18n.languages.forEach(function (l) {\n    initialI18nStore[l] = {};\n    namespaces.forEach(function (ns) {\n      initialI18nStore[l][ns] = i18n.getResourceBundle(l, ns) || {};\n    });\n  });\n  ret.initialI18nStore = initialI18nStore;\n  ret.initialLanguage = i18n.language;\n  return ret;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useContext, useRef } from 'react';\nimport { getI18n, getDefaults, ReportNamespaces, I18nContext } from './context.js';\nimport { warnOnce, loadNamespaces, loadLanguages, hasLoadedNamespace } from './utils.js';\n\nvar usePrevious = function usePrevious(value, ignore) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = ignore ? ref.current : value;\n  }, [value, ignore]);\n  return ref.current;\n};\n\nexport function useTranslation(ns) {\n  var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var i18nFromProps = props.i18n;\n\n  var _ref = useContext(I18nContext) || {},\n      i18nFromContext = _ref.i18n,\n      defaultNSFromContext = _ref.defaultNS;\n\n  var i18n = i18nFromProps || i18nFromContext || getI18n();\n  if (i18n && !i18n.reportNamespaces) i18n.reportNamespaces = new ReportNamespaces();\n\n  if (!i18n) {\n    warnOnce('You will need to pass in an i18next instance by using initReactI18next');\n\n    var notReadyT = function notReadyT(k, optsOrDefaultValue) {\n      if (typeof optsOrDefaultValue === 'string') return optsOrDefaultValue;\n      if (optsOrDefaultValue && _typeof(optsOrDefaultValue) === 'object' && typeof optsOrDefaultValue.defaultValue === 'string') return optsOrDefaultValue.defaultValue;\n      return Array.isArray(k) ? k[k.length - 1] : k;\n    };\n\n    var retNotReady = [notReadyT, {}, false];\n    retNotReady.t = notReadyT;\n    retNotReady.i18n = {};\n    retNotReady.ready = false;\n    return retNotReady;\n  }\n\n  if (i18n.options.react && i18n.options.react.wait !== undefined) warnOnce('It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.');\n\n  var i18nOptions = _objectSpread(_objectSpread(_objectSpread({}, getDefaults()), i18n.options.react), props);\n\n  var useSuspense = i18nOptions.useSuspense,\n      keyPrefix = i18nOptions.keyPrefix;\n  var namespaces = ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;\n  namespaces = typeof namespaces === 'string' ? [namespaces] : namespaces || ['translation'];\n  if (i18n.reportNamespaces.addUsedNamespaces) i18n.reportNamespaces.addUsedNamespaces(namespaces);\n  var ready = (i18n.isInitialized || i18n.initializedStoreOnce) && namespaces.every(function (n) {\n    return hasLoadedNamespace(n, i18n, i18nOptions);\n  });\n\n  function getT() {\n    return i18n.getFixedT(props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);\n  }\n\n  var _useState = useState(getT),\n      _useState2 = _slicedToArray(_useState, 2),\n      t = _useState2[0],\n      setT = _useState2[1];\n\n  var joinedNS = namespaces.join();\n  if (props.lng) joinedNS = \"\".concat(props.lng).concat(joinedNS);\n  var previousJoinedNS = usePrevious(joinedNS);\n  var isMounted = useRef(true);\n  useEffect(function () {\n    var bindI18n = i18nOptions.bindI18n,\n        bindI18nStore = i18nOptions.bindI18nStore;\n    isMounted.current = true;\n\n    if (!ready && !useSuspense) {\n      if (props.lng) {\n        loadLanguages(i18n, props.lng, namespaces, function () {\n          if (isMounted.current) setT(getT);\n        });\n      } else {\n        loadNamespaces(i18n, namespaces, function () {\n          if (isMounted.current) setT(getT);\n        });\n      }\n    }\n\n    if (ready && previousJoinedNS && previousJoinedNS !== joinedNS && isMounted.current) {\n      setT(getT);\n    }\n\n    function boundReset() {\n      if (isMounted.current) setT(getT);\n    }\n\n    if (bindI18n && i18n) i18n.on(bindI18n, boundReset);\n    if (bindI18nStore && i18n) i18n.store.on(bindI18nStore, boundReset);\n    return function () {\n      isMounted.current = false;\n      if (bindI18n && i18n) bindI18n.split(' ').forEach(function (e) {\n        return i18n.off(e, boundReset);\n      });\n      if (bindI18nStore && i18n) bindI18nStore.split(' ').forEach(function (e) {\n        return i18n.store.off(e, boundReset);\n      });\n    };\n  }, [i18n, joinedNS]);\n  var isInitial = useRef(true);\n  useEffect(function () {\n    if (isMounted.current && !isInitial.current) {\n      setT(getT);\n    }\n\n    isInitial.current = false;\n  }, [i18n, keyPrefix]);\n  var ret = [t, i18n, ready];\n  ret.t = t;\n  ret.i18n = i18n;\n  ret.ready = ready;\n  if (ready) return ret;\n  if (!ready && !useSuspense) return ret;\n  throw new Promise(function (resolve) {\n    if (props.lng) {\n      loadLanguages(i18n, props.lng, namespaces, function () {\n        return resolve();\n      });\n    } else {\n      loadNamespaces(i18n, namespaces, function () {\n        return resolve();\n      });\n    }\n  });\n}","function createRTToolGroupAndAddTools(\n  ToolGroupService,\n  customizationService,\n  toolGroupId\n) {\n  const { tools } =\n    customizationService.get('cornerstone.overlayViewportTools') ?? {};\n\n  return ToolGroupService.createToolGroupAndAddTools(toolGroupId, tools, {});\n}\n\nexport default createRTToolGroupAndAddTools;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport OHIF, { utils } from '@ohif/core';\nimport {\n  ViewportActionBar,\n  useViewportGrid,\n  LoadingIndicatorTotalPercent,\n} from '@ohif/ui';\n\nimport _hydrateRTdisplaySet from '../utils/_hydrateRT';\nimport promptHydrateRT from '../utils/promptHydrateRT';\nimport _getStatusComponent from './_getStatusComponent';\nimport createRTToolGroupAndAddTools from '../utils/initRTToolGroup';\nimport _hydrateRTDisplaySet from '../utils/_hydrateRT';\n\nconst { formatDate } = utils;\nconst RT_TOOLGROUP_BASE_NAME = 'RTToolGroup';\n\nfunction OHIFCornerstoneRTViewport(props) {\n  const {\n    children,\n    displaySets,\n    viewportOptions,\n    viewportIndex,\n    viewportLabel,\n    servicesManager,\n    extensionManager,\n  } = props;\n\n  const {\n    displaySetService,\n    toolGroupService,\n    segmentationService,\n    uiNotificationService,\n    customizationService,\n  } = servicesManager.services;\n\n  const toolGroupId = `${RT_TOOLGROUP_BASE_NAME}-${viewportIndex}`;\n\n  // RT viewport will always have a single display set\n  if (displaySets.length > 1) {\n    throw new Error('RT viewport should only have a single display set');\n  }\n\n  const rtDisplaySet = displaySets[0];\n\n  const [viewportGrid, viewportGridService] = useViewportGrid();\n\n  // States\n  const [isToolGroupCreated, setToolGroupCreated] = useState(false);\n  const [selectedSegment, setSelectedSegment] = useState(1);\n\n  // Hydration means that the RT is opened and segments are loaded into the\n  // segmentation panel, and RT is also rendered on any viewport that is in the\n  // same frameOfReferenceUID as the referencedSeriesUID of the RT. However,\n  // loading basically means RT loading over network and bit unpacking of the\n  // RT data.\n  const [isHydrated, setIsHydrated] = useState(rtDisplaySet.isHydrated);\n  const [rtIsLoading, setRtIsLoading] = useState(!rtDisplaySet.isLoaded);\n  const [element, setElement] = useState(null);\n  const [processingProgress, setProcessingProgress] = useState({\n    percentComplete: null,\n    totalSegments: null,\n  });\n\n  // refs\n  const referencedDisplaySetRef = useRef(null);\n\n  const { viewports, activeViewportIndex } = viewportGrid;\n\n  const referencedDisplaySet = rtDisplaySet.getReferenceDisplaySet();\n  const referencedDisplaySetMetadata = _getReferencedDisplaySetMetadata(\n    referencedDisplaySet\n  );\n\n  referencedDisplaySetRef.current = {\n    displaySet: referencedDisplaySet,\n    metadata: referencedDisplaySetMetadata,\n  };\n  /**\n   * OnElementEnabled callback which is called after the cornerstoneExtension\n   * has enabled the element. Note: we delegate all the image rendering to\n   * cornerstoneExtension, so we don't need to do anything here regarding\n   * the image rendering, element enabling etc.\n   */\n  const onElementEnabled = evt => {\n    setElement(evt.detail.element);\n  };\n\n  const onElementDisabled = () => {\n    setElement(null);\n  };\n\n  const getCornerstoneViewport = useCallback(() => {\n    const { component: Component } = extensionManager.getModuleEntry(\n      '@ohif/extension-cornerstone.viewportModule.cornerstone'\n    );\n\n    const {\n      displaySet: referencedDisplaySet,\n    } = referencedDisplaySetRef.current;\n\n    // Todo: jump to the center of the first segment\n    return (\n      <Component\n        {...props}\n        displaySets={[referencedDisplaySet, rtDisplaySet]}\n        viewportOptions={{\n          viewportType: 'volume',\n          toolGroupId: toolGroupId,\n          orientation: viewportOptions.orientation,\n          viewportId: viewportOptions.viewportId,\n        }}\n        onElementEnabled={onElementEnabled}\n        onElementDisabled={onElementDisabled}\n      ></Component>\n    );\n  }, [viewportIndex, rtDisplaySet, toolGroupId]);\n\n  const onSegmentChange = useCallback(\n    direction => {\n      direction = direction === 'left' ? -1 : 1;\n      const segmentationId = rtDisplaySet.displaySetInstanceUID;\n      const segmentation = segmentationService.getSegmentation(segmentationId);\n\n      const { segments } = segmentation;\n\n      const numberOfSegments = Object.keys(segments).length;\n\n      let newSelectedSegmentIndex = selectedSegment + direction;\n\n      // Segment 0 is always background\n      if (newSelectedSegmentIndex >= numberOfSegments - 1) {\n        newSelectedSegmentIndex = 1;\n      } else if (newSelectedSegmentIndex === 0) {\n        newSelectedSegmentIndex = numberOfSegments - 1;\n      }\n\n      segmentationService.jumpToSegmentCenter(\n        segmentationId,\n        newSelectedSegmentIndex,\n        toolGroupId\n      );\n      setSelectedSegment(newSelectedSegmentIndex);\n    },\n    [selectedSegment]\n  );\n\n  useEffect(() => {\n    if (rtIsLoading) {\n      return;\n    }\n\n    promptHydrateRT({\n      servicesManager,\n      viewportIndex,\n      rtDisplaySet,\n    }).then(isHydrated => {\n      if (isHydrated) {\n        setIsHydrated(true);\n      }\n    });\n  }, [servicesManager, viewportIndex, rtDisplaySet, rtIsLoading]);\n\n  useEffect(() => {\n    const { unsubscribe } = segmentationService.subscribe(\n      segmentationService.EVENTS.SEGMENTATION_LOADING_COMPLETE,\n      evt => {\n        if (\n          evt.rtDisplaySet.displaySetInstanceUID ===\n          rtDisplaySet.displaySetInstanceUID\n        ) {\n          setRtIsLoading(false);\n        }\n\n        if (evt.overlappingSegments) {\n          uiNotificationService.show({\n            title: 'Overlapping Segments',\n            message:\n              'Overlapping segments detected which is not currently supported',\n            type: 'warning',\n          });\n        }\n      }\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  }, [rtDisplaySet]);\n\n  useEffect(() => {\n    const { unsubscribe } = segmentationService.subscribe(\n      segmentationService.EVENTS.SEGMENT_LOADING_COMPLETE,\n      ({ percentComplete, numSegments }) => {\n        setProcessingProgress({\n          percentComplete,\n          totalSegments: numSegments,\n        });\n      }\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  }, [rtDisplaySet]);\n\n  /**\n   Cleanup the SEG viewport when the viewport is destroyed\n   */\n  useEffect(() => {\n    const onDisplaySetsRemovedSubscription = displaySetService.subscribe(\n      displaySetService.EVENTS.DISPLAY_SETS_REMOVED,\n      ({ displaySetInstanceUIDs }) => {\n        const activeViewport = viewports[activeViewportIndex];\n        if (\n          displaySetInstanceUIDs.includes(activeViewport.displaySetInstanceUID)\n        ) {\n          viewportGridService.setDisplaySetsForViewport({\n            viewportIndex: activeViewportIndex,\n            displaySetInstanceUIDs: [],\n          });\n        }\n      }\n    );\n\n    return () => {\n      onDisplaySetsRemovedSubscription.unsubscribe();\n    };\n  }, []);\n\n  useEffect(() => {\n    let toolGroup = toolGroupService.getToolGroup(toolGroupId);\n\n    if (toolGroup) {\n      return;\n    }\n\n    toolGroup = createRTToolGroupAndAddTools(\n      toolGroupService,\n      customizationService,\n      toolGroupId\n    );\n\n    setToolGroupCreated(true);\n\n    return () => {\n      // remove the segmentation representations if seg displayset changed\n      segmentationService.removeSegmentationRepresentationFromToolGroup(\n        toolGroupId\n      );\n\n      toolGroupService.destroyToolGroup(toolGroupId);\n    };\n  }, []);\n\n  useEffect(() => {\n    setIsHydrated(rtDisplaySet.isHydrated);\n\n    return () => {\n      // remove the segmentation representations if seg displayset changed\n      segmentationService.removeSegmentationRepresentationFromToolGroup(\n        toolGroupId\n      );\n      referencedDisplaySetRef.current = null;\n    };\n  }, [rtDisplaySet]);\n\n  // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  let childrenWithProps = null;\n\n  if (\n    !referencedDisplaySetRef.current ||\n    referencedDisplaySet.displaySetInstanceUID !==\n      referencedDisplaySetRef.current.displaySet.displaySetInstanceUID\n  ) {\n    return null;\n  }\n\n  if (children && children.length) {\n    childrenWithProps = children.map((child, index) => {\n      return (\n        child &&\n        React.cloneElement(child, {\n          viewportIndex,\n          key: index,\n        })\n      );\n    });\n  }\n\n  const {\n    PatientID,\n    PatientName,\n    PatientSex,\n    PatientAge,\n    SliceThickness,\n    ManufacturerModelName,\n    StudyDate,\n    SeriesDescription,\n    SpacingBetweenSlices,\n    SeriesNumber,\n  } = referencedDisplaySetRef.current.metadata;\n\n  const onStatusClick = async () => {\n    const isHydrated = await _hydrateRTDisplaySet({\n      rtDisplaySet,\n      viewportIndex,\n      servicesManager,\n    });\n\n    setIsHydrated(isHydrated);\n  };\n\n  return (\n    <>\n      <ViewportActionBar\n        onDoubleClick={evt => {\n          evt.stopPropagation();\n          evt.preventDefault();\n        }}\n        onArrowsClick={onSegmentChange}\n        getStatusComponent={() => {\n          return _getStatusComponent({\n            isHydrated,\n            onStatusClick,\n          });\n        }}\n        studyData={{\n          label: viewportLabel,\n          useAltStyling: true,\n          studyDate: formatDate(StudyDate),\n          currentSeries: SeriesNumber,\n          seriesDescription: `RT Viewport ${SeriesDescription}`,\n          patientInformation: {\n            patientName: PatientName\n              ? OHIF.utils.formatPN(PatientName.Alphabetic)\n              : '',\n            patientSex: PatientSex || '',\n            patientAge: PatientAge || '',\n            MRN: PatientID || '',\n            thickness: SliceThickness ? `${SliceThickness.toFixed(2)}mm` : '',\n            spacing:\n              SpacingBetweenSlices !== undefined\n                ? `${SpacingBetweenSlices.toFixed(2)}mm`\n                : '',\n            scanner: ManufacturerModelName || '',\n          },\n        }}\n      />\n\n      <div className=\"relative flex flex-row w-full h-full overflow-hidden\">\n        {rtIsLoading && (\n          <LoadingIndicatorTotalPercent\n            className=\"w-full h-full\"\n            totalNumbers={processingProgress.totalSegments}\n            percentComplete={processingProgress.percentComplete}\n            loadingText=\"Loading RTSTRUCT...\"\n          />\n        )}\n        {getCornerstoneViewport()}\n        {childrenWithProps}\n      </div>\n    </>\n  );\n}\n\nOHIFCornerstoneRTViewport.propTypes = {\n  displaySets: PropTypes.arrayOf(PropTypes.object),\n  viewportIndex: PropTypes.number.isRequired,\n  dataSource: PropTypes.object,\n  children: PropTypes.node,\n  customProps: PropTypes.object,\n};\n\nOHIFCornerstoneRTViewport.defaultProps = {\n  customProps: {},\n};\n\nfunction _getReferencedDisplaySetMetadata(referencedDisplaySet) {\n  const image0 = referencedDisplaySet.images[0];\n  const referencedDisplaySetMetadata = {\n    PatientID: image0.PatientID,\n    PatientName: image0.PatientName,\n    PatientSex: image0.PatientSex,\n    PatientAge: image0.PatientAge,\n    SliceThickness: image0.SliceThickness,\n    StudyDate: image0.StudyDate,\n    SeriesDescription: image0.SeriesDescription,\n    SeriesInstanceUID: image0.SeriesInstanceUID,\n    SeriesNumber: image0.SeriesNumber,\n    ManufacturerModelName: image0.ManufacturerModelName,\n    SpacingBetweenSlices: image0.SpacingBetweenSlices,\n  };\n\n  return referencedDisplaySetMetadata;\n}\n\nexport default OHIFCornerstoneRTViewport;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Icon, Tooltip } from '@ohif/ui';\n\nexport default function _getStatusComponent({ isHydrated, onStatusClick }) {\n  let ToolTipMessage = null;\n  let StatusIcon = null;\n\n  const { t } = useTranslation('Common');\n  const loadStr = t('LOAD');\n\n  switch (isHydrated) {\n    case true:\n      StatusIcon = () => <Icon name=\"status-alert\" />;\n\n      ToolTipMessage = () => (\n        <div>This Segmentation is loaded in the segmentation panel</div>\n      );\n      break;\n    case false:\n      StatusIcon = () => <Icon name=\"status-untracked\" />;\n\n      ToolTipMessage = () => <div>Click LOAD to load RTSTRUCT.</div>;\n  }\n\n  const StatusArea = () => (\n    <div className=\"flex h-6 leading-6 cursor-default text-sm text-white\">\n      <div className=\"min-w-[45px] flex items-center p-1 rounded-l-xl rounded-r bg-customgray-100\">\n        <StatusIcon />\n        <span className=\"ml-1\">RTSTRUCT</span>\n      </div>\n      {!isHydrated && (\n        <div\n          className=\"ml-1 px-1.5 rounded cursor-pointer hover:text-black bg-primary-main hover:bg-primary-light\"\n          // Using onMouseUp here because onClick is not working when the viewport is not active and is styled with pointer-events:none\n          onMouseUp={onStatusClick}\n        >\n          {loadStr}\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <>\n      {ToolTipMessage && (\n        <Tooltip content={<ToolTipMessage />} position=\"bottom-left\">\n          <StatusArea />\n        </Tooltip>\n      )}\n      {!ToolTipMessage && <StatusArea />}\n    </>\n  );\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * This file automatically generated from `pre-publish.js`.\n * Do not manually edit.\n */\n\nmodule.exports = {\n  \"area\": true,\n  \"base\": true,\n  \"br\": true,\n  \"col\": true,\n  \"embed\": true,\n  \"hr\": true,\n  \"img\": true,\n  \"input\": true,\n  \"link\": true,\n  \"meta\": true,\n  \"param\": true,\n  \"source\": true,\n  \"track\": true,\n  \"wbr\": true\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__762__;","module.exports = __WEBPACK_EXTERNAL_MODULE__369__;","module.exports = __WEBPACK_EXTERNAL_MODULE__836__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.F = {};\n__webpack_require__.E = (chunkId) => {\n\tObject.keys(__webpack_require__.F).map((key) => {\n\t\t__webpack_require__.F[key](chunkId);\n\t});\n}","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.O(0, [143], () => {\n\t__webpack_require__.E(143);\n}, 5);","import packageJson from '../package.json';\n\nconst id = packageJson.name;\nconst SOPClassHandlerName = 'dicom-rt';\nconst SOPClassHandlerId = `${id}.sopClassHandlerModule.${SOPClassHandlerName}`;\n\nexport { id, SOPClassHandlerId, SOPClassHandlerName };\n","import dcmjs from 'dcmjs';\nconst { DicomMessage, DicomMetaDictionary } = dcmjs.data;\nconst dicomlab2RGB = dcmjs.data.Colors.dicomlab2RGB;\n\nasync function checkAndLoadContourData(instance, datasource) {\n  if (!instance || !instance.ROIContourSequence) {\n    return Promise.reject('Invalid instance object or ROIContourSequence');\n  }\n\n  const promisesMap = new Map();\n\n  for (const ROIContour of instance.ROIContourSequence) {\n    const referencedROINumber = ROIContour.ReferencedROINumber;\n    if (!ROIContour || !ROIContour.ContourSequence) {\n      promisesMap.set(referencedROINumber, [Promise.resolve([])]);\n      continue;\n    }\n\n    for (const Contour of ROIContour.ContourSequence) {\n      if (!Contour || !Contour.ContourData) {\n        return Promise.reject('Invalid Contour or ContourData');\n      }\n\n      const contourData = Contour.ContourData;\n\n      if (Array.isArray(contourData)) {\n        promisesMap.has(referencedROINumber)\n          ? promisesMap\n              .get(referencedROINumber)\n              .push(Promise.resolve(contourData))\n          : promisesMap.set(referencedROINumber, [\n              Promise.resolve(contourData),\n            ]);\n      } else if (contourData && contourData.BulkDataURI) {\n        const bulkDataURI = contourData.BulkDataURI;\n\n        if (\n          !datasource ||\n          !datasource.retrieve ||\n          !datasource.retrieve.bulkDataURI\n        ) {\n          return Promise.reject(\n            'Invalid datasource object or retrieve function'\n          );\n        }\n\n        const bulkDataPromise = datasource.retrieve.bulkDataURI({\n          BulkDataURI: bulkDataURI,\n          StudyInstanceUID: instance.StudyInstanceUID,\n          SeriesInstanceUID: instance.SeriesInstanceUID,\n          SOPInstanceUID: instance.SOPInstanceUID,\n        });\n\n        promisesMap.has(referencedROINumber)\n          ? promisesMap.get(referencedROINumber).push(bulkDataPromise)\n          : promisesMap.set(referencedROINumber, [bulkDataPromise]);\n      } else {\n        return Promise.reject(`Invalid ContourData: ${contourData}`);\n      }\n    }\n  }\n\n  const resolvedPromisesMap = new Map();\n  for (const [key, promiseArray] of promisesMap.entries()) {\n    resolvedPromisesMap.set(key, await Promise.allSettled(promiseArray));\n  }\n\n  instance.ROIContourSequence.forEach(ROIContour => {\n    try {\n      const referencedROINumber = ROIContour.ReferencedROINumber;\n      const resolvedPromises = resolvedPromisesMap.get(referencedROINumber);\n\n      if (ROIContour.ContourSequence) {\n        ROIContour.ContourSequence.forEach((Contour, index) => {\n          const promise = resolvedPromises[index];\n          if (promise.status === 'fulfilled') {\n            if (\n              Array.isArray(promise.value) &&\n              promise.value.every(Number.isFinite)\n            ) {\n              // If promise.value is already an array of numbers, use it directly\n              Contour.ContourData = promise.value;\n            } else {\n              // If the resolved promise value is a byte array (Blob), it needs to be decoded\n              const uint8Array = new Uint8Array(promise.value);\n              const textDecoder = new TextDecoder();\n              const dataUint8Array = textDecoder.decode(uint8Array);\n              if (\n                typeof dataUint8Array === 'string' &&\n                dataUint8Array.includes('\\\\')\n              ) {\n                Contour.ContourData = dataUint8Array\n                  .split('\\\\')\n                  .map(parseFloat);\n              } else {\n                Contour.ContourData = [];\n              }\n            }\n          } else {\n            console.error(promise.reason);\n          }\n        });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  });\n}\n\nexport default async function loadRTStruct(\n  extensionManager,\n  rtStructDisplaySet,\n  referencedDisplaySet,\n  headers\n) {\n  const utilityModule = extensionManager.getModuleEntry(\n    '@ohif/extension-cornerstone.utilityModule.common'\n  );\n  const dataSource = extensionManager.getActiveDataSource()[0];\n  const { bulkDataURI } = dataSource.getConfig?.() || {};\n\n  const { dicomLoaderService } = utilityModule.exports;\n  const imageIdSopInstanceUidPairs = _getImageIdSopInstanceUidPairsForDisplaySet(\n    referencedDisplaySet\n  );\n\n  // Set here is loading is asynchronous.\n  // If this function throws its set back to false.\n  rtStructDisplaySet.isLoaded = true;\n  let instance = rtStructDisplaySet.instance;\n\n  if (!bulkDataURI || !bulkDataURI.enabled) {\n    const segArrayBuffer = await dicomLoaderService.findDicomDataPromise(\n      rtStructDisplaySet,\n      null,\n      headers\n    );\n\n    const dicomData = DicomMessage.readFile(segArrayBuffer);\n    const rtStructDataset = DicomMetaDictionary.naturalizeDataset(\n      dicomData.dict\n    );\n    rtStructDataset._meta = DicomMetaDictionary.namifyDataset(dicomData.meta);\n    instance = rtStructDataset;\n  } else {\n    await checkAndLoadContourData(instance, dataSource);\n  }\n\n  const {\n    StructureSetROISequence,\n    ROIContourSequence,\n    RTROIObservationsSequence,\n  } = instance;\n\n  // Define our structure set entry and add it to the rtstruct module state.\n  const structureSet = {\n    StructureSetLabel: instance.StructureSetLabel,\n    SeriesInstanceUID: instance.SeriesInstanceUID,\n    ROIContours: [],\n    visible: true,\n  };\n\n  for (let i = 0; i < ROIContourSequence.length; i++) {\n    const ROIContour = ROIContourSequence[i];\n    const { ContourSequence } = ROIContour;\n\n    if (!ContourSequence) {\n      continue;\n    }\n\n    const isSupported = false;\n\n    const ContourSequenceArray = _toArray(ContourSequence);\n\n    const contourPoints = [];\n    for (let c = 0; c < ContourSequenceArray.length; c++) {\n      const {\n        ContourImageSequence,\n        ContourData,\n        NumberOfContourPoints,\n        ContourGeometricType,\n      } = ContourSequenceArray[c];\n\n      const sopInstanceUID = ContourImageSequence.ReferencedSOPInstanceUID;\n      const imageId = _getImageId(imageIdSopInstanceUidPairs, sopInstanceUID);\n\n      if (!imageId) {\n        continue;\n      }\n      let isSupported = false;\n\n      const points = [];\n      for (let p = 0; p < NumberOfContourPoints * 3; p += 3) {\n        points.push({\n          x: ContourData[p],\n          y: ContourData[p + 1],\n          z: ContourData[p + 2],\n        });\n      }\n\n      switch (ContourGeometricType) {\n        case 'CLOSED_PLANAR':\n        case 'OPEN_PLANAR':\n        case 'POINT':\n          isSupported = true;\n\n          break;\n        default:\n          continue;\n      }\n\n      contourPoints.push({\n        numberOfPoints: NumberOfContourPoints,\n        points,\n        type: ContourGeometricType,\n        isSupported,\n      });\n    }\n\n    _setROIContourMetadata(\n      structureSet,\n      StructureSetROISequence,\n      RTROIObservationsSequence,\n      ROIContour,\n      contourPoints,\n      isSupported\n    );\n  }\n  return structureSet;\n}\n\nconst _getImageId = (imageIdSopInstanceUidPairs, sopInstanceUID) => {\n  const imageIdSopInstanceUidPairsEntry = imageIdSopInstanceUidPairs.find(\n    imageIdSopInstanceUidPairsEntry =>\n      imageIdSopInstanceUidPairsEntry.sopInstanceUID === sopInstanceUID\n  );\n\n  return imageIdSopInstanceUidPairsEntry\n    ? imageIdSopInstanceUidPairsEntry.imageId\n    : null;\n};\n\nfunction _getImageIdSopInstanceUidPairsForDisplaySet(referencedDisplaySet) {\n  return referencedDisplaySet.images.map(image => {\n    return {\n      imageId: image.imageId,\n      sopInstanceUID: image.SOPInstanceUID,\n    };\n  });\n}\n\nfunction _setROIContourMetadata(\n  structureSet,\n  StructureSetROISequence,\n  RTROIObservationsSequence,\n  ROIContour,\n  contourPoints,\n  isSupported\n) {\n  const StructureSetROI = StructureSetROISequence.find(\n    structureSetROI =>\n      structureSetROI.ROINumber === ROIContour.ReferencedROINumber\n  );\n\n  const ROIContourData = {\n    ROINumber: StructureSetROI.ROINumber,\n    ROIName: StructureSetROI.ROIName,\n    ROIGenerationAlgorithm: StructureSetROI.ROIGenerationAlgorithm,\n    ROIDescription: StructureSetROI.ROIDescription,\n    isSupported,\n    contourPoints,\n    visible: true,\n  };\n\n  _setROIContourDataColor(ROIContour, ROIContourData);\n\n  if (RTROIObservationsSequence) {\n    // If present, add additional RTROIObservations metadata.\n    _setROIContourRTROIObservations(\n      ROIContourData,\n      RTROIObservationsSequence,\n      ROIContour.ReferencedROINumber\n    );\n  }\n\n  structureSet.ROIContours.push(ROIContourData);\n}\n\nfunction _setROIContourDataColor(ROIContour, ROIContourData) {\n  let { ROIDisplayColor, RecommendedDisplayCIELabValue } = ROIContour;\n\n  if (!ROIDisplayColor && RecommendedDisplayCIELabValue) {\n    // If ROIDisplayColor is absent, try using the RecommendedDisplayCIELabValue color.\n    ROIDisplayColor = dicomlab2RGB(RecommendedDisplayCIELabValue);\n  }\n\n  if (ROIDisplayColor) {\n    ROIContourData.colorArray = [...ROIDisplayColor];\n  }\n}\n\nfunction _setROIContourRTROIObservations(\n  ROIContourData,\n  RTROIObservationsSequence,\n  ROINumber\n) {\n  const RTROIObservations = RTROIObservationsSequence.find(\n    RTROIObservations => RTROIObservations.ReferencedROINumber === ROINumber\n  );\n\n  if (RTROIObservations) {\n    // Deep copy so we don't keep the reference to the dcmjs dataset entry.\n    const {\n      ObservationNumber,\n      ROIObservationDescription,\n      RTROIInterpretedType,\n      ROIInterpreter,\n    } = RTROIObservations;\n\n    ROIContourData.RTROIObservations = {\n      ObservationNumber,\n      ROIObservationDescription,\n      RTROIInterpretedType,\n      ROIInterpreter,\n    };\n  }\n}\n\nfunction _toArray(objOrArray) {\n  return Array.isArray(objOrArray) ? objOrArray : [objOrArray];\n}\n","import { utils } from '@ohif/core';\n\nimport { SOPClassHandlerId } from './id';\nimport loadRTStruct from './loadRTStruct';\n\nconst sopClassUids = ['1.2.840.10008.5.1.4.1.1.481.3'];\n\nlet loadPromises = {};\n\nfunction _getDisplaySetsFromSeries(\n  instances,\n  servicesManager,\n  extensionManager\n) {\n  const instance = instances[0];\n\n  const {\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID,\n    SeriesDescription,\n    SeriesNumber,\n    SeriesDate,\n    SOPClassUID,\n    wadoRoot,\n    wadoUri,\n    wadoUriRoot,\n  } = instance;\n\n  const displaySet = {\n    Modality: 'RTSTRUCT',\n    loading: false,\n    isReconstructable: false, // by default for now since it is a volumetric SEG currently\n    displaySetInstanceUID: utils.guid(),\n    SeriesDescription,\n    SeriesNumber,\n    SeriesDate,\n    SOPInstanceUID,\n    SeriesInstanceUID,\n    StudyInstanceUID,\n    SOPClassHandlerId,\n    SOPClassUID,\n    referencedImages: null,\n    referencedSeriesInstanceUID: null,\n    referencedDisplaySetInstanceUID: null,\n    isDerivedDisplaySet: true,\n    isLoaded: false,\n    isHydrated: false,\n    structureSet: null,\n    sopClassUids,\n    instance,\n    wadoRoot,\n    wadoUriRoot,\n    wadoUri,\n    isOverlayDisplaySet: true,\n  };\n\n  let referencedSeriesSequence = instance.ReferencedSeriesSequence;\n  if (\n    instance.ReferencedFrameOfReferenceSequence &&\n    !instance.ReferencedSeriesSequence\n  ) {\n    instance.ReferencedSeriesSequence = _deriveReferencedSeriesSequenceFromFrameOfReferenceSequence(\n      instance.ReferencedFrameOfReferenceSequence\n    );\n    referencedSeriesSequence = instance.ReferencedSeriesSequence;\n  }\n\n  if (!referencedSeriesSequence) {\n    throw new Error('ReferencedSeriesSequence is missing for the RTSTRUCT');\n  }\n\n  const referencedSeries = referencedSeriesSequence[0];\n\n  displaySet.referencedImages =\n    instance.ReferencedSeriesSequence.ReferencedInstanceSequence;\n  displaySet.referencedSeriesInstanceUID = referencedSeries.SeriesInstanceUID;\n\n  displaySet.getReferenceDisplaySet = () => {\n    const { DisplaySetService } = servicesManager.services;\n    const referencedDisplaySets = DisplaySetService.getDisplaySetsForSeries(\n      displaySet.referencedSeriesInstanceUID\n    );\n\n    if (!referencedDisplaySets || referencedDisplaySets.length === 0) {\n      throw new Error('Referenced DisplaySet is missing for the RT');\n    }\n\n    const referencedDisplaySet = referencedDisplaySets[0];\n\n    displaySet.referencedDisplaySetInstanceUID =\n      referencedDisplaySet.displaySetInstanceUID;\n\n    return referencedDisplaySet;\n  };\n\n  displaySet.load = ({ headers }) =>\n    _load(displaySet, servicesManager, extensionManager, headers);\n\n  return [displaySet];\n}\n\nfunction _load(rtDisplaySet, servicesManager, extensionManager, headers) {\n  const { SOPInstanceUID } = rtDisplaySet;\n  const { segmentationService } = servicesManager.services;\n  if (\n    (rtDisplaySet.loading || rtDisplaySet.isLoaded) &&\n    loadPromises[SOPInstanceUID] &&\n    _segmentationExistsInCache(rtDisplaySet, segmentationService)\n  ) {\n    return loadPromises[SOPInstanceUID];\n  }\n\n  rtDisplaySet.loading = true;\n\n  // We don't want to fire multiple loads, so we'll wait for the first to finish\n  // and also return the same promise to any other callers.\n  loadPromises[SOPInstanceUID] = new Promise(async (resolve, reject) => {\n    if (!rtDisplaySet.structureSet) {\n      const structureSet = await loadRTStruct(\n        extensionManager,\n        rtDisplaySet,\n        rtDisplaySet.getReferenceDisplaySet(),\n        headers\n      );\n\n      rtDisplaySet.structureSet = structureSet;\n    }\n\n    const suppressEvents = true;\n    segmentationService\n      .createSegmentationForRTDisplaySet(rtDisplaySet, null, suppressEvents)\n      .then(() => {\n        rtDisplaySet.loading = false;\n        resolve();\n      })\n      .catch(error => {\n        rtDisplaySet.loading = false;\n        reject(error);\n      });\n  });\n\n  return loadPromises[SOPInstanceUID];\n}\n\nfunction _deriveReferencedSeriesSequenceFromFrameOfReferenceSequence(\n  ReferencedFrameOfReferenceSequence\n) {\n  const ReferencedSeriesSequence = [];\n\n  ReferencedFrameOfReferenceSequence.forEach(referencedFrameOfReference => {\n    const { RTReferencedStudySequence } = referencedFrameOfReference;\n\n    RTReferencedStudySequence.forEach(rtReferencedStudy => {\n      const { RTReferencedSeriesSequence } = rtReferencedStudy;\n\n      RTReferencedSeriesSequence.forEach(rtReferencedSeries => {\n        const ReferencedInstanceSequence = [];\n        const { ContourImageSequence, SeriesInstanceUID } = rtReferencedSeries;\n\n        ContourImageSequence.forEach(contourImage => {\n          ReferencedInstanceSequence.push({\n            ReferencedSOPInstanceUID: contourImage.ReferencedSOPInstanceUID,\n            ReferencedSOPClassUID: contourImage.ReferencedSOPClassUID,\n          });\n        });\n\n        const referencedSeries = {\n          SeriesInstanceUID,\n          ReferencedInstanceSequence,\n        };\n\n        ReferencedSeriesSequence.push(referencedSeries);\n      });\n    });\n  });\n\n  return ReferencedSeriesSequence;\n}\n\nfunction _segmentationExistsInCache(rtDisplaySet, segmentationService) {\n  // Todo: fix this\n  return false;\n  // This should be abstracted with the CornerstoneCacheService\n  const rtContourId = rtDisplaySet.displaySetInstanceUID;\n  const contour = segmentationService.getContour(rtContourId);\n\n  return contour !== undefined;\n}\n\nfunction getSopClassHandlerModule({ servicesManager, extensionManager }) {\n  return [\n    {\n      name: 'dicom-rt',\n      sopClassUids,\n      getDisplaySetsFromSeries: instances => {\n        return _getDisplaySetsFromSeries(\n          instances,\n          servicesManager,\n          extensionManager\n        );\n      },\n    },\n  ];\n}\n\nexport default getSopClassHandlerModule;\n","import { id } from './id';\nimport React from 'react';\nimport { Types } from '@ohif/core';\nimport getSopClassHandlerModule from './getSopClassHandlerModule';\n\nconst Component = React.lazy(() => {\n  return import(\n    /* webpackPrefetch: true */ './viewports/OHIFCornerstoneRTViewport'\n  );\n});\n\nconst OHIFCornerstoneRTViewport = props => {\n  return (\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <Component {...props} />\n    </React.Suspense>\n  );\n};\n\n/**\n * You can remove any of the following modules if you don't need them.\n */\nconst extension: Types.Extensions.Extension = {\n  /**\n   * Only required property. Should be a unique value across all extensions.\n   * You ID can be anything you want, but it should be unique.\n   */\n  id,\n\n  /**\n   * PanelModule should provide a list of panels that will be available in OHIF\n   * for Modes to consume and render. Each panel is defined by a {name,\n   * iconName, iconLabel, label, component} object. Example of a panel module\n   * is the StudyBrowserPanel that is provided by the default extension in OHIF.\n   */\n  getViewportModule({\n    servicesManager,\n    extensionManager,\n  }: Types.Extensions.ExtensionParams) {\n    const ExtendedOHIFCornerstoneRTViewport = props => {\n      return (\n        <OHIFCornerstoneRTViewport\n          servicesManager={servicesManager}\n          extensionManager={extensionManager}\n          {...props}\n        />\n      );\n    };\n\n    return [{ name: 'dicom-rt', component: ExtendedOHIFCornerstoneRTViewport }];\n  },\n  /**\n   * SopClassHandlerModule should provide a list of sop class handlers that will be\n   * available in OHIF for Modes to consume and use to create displaySets from Series.\n   * Each sop class handler is defined by a { name, sopClassUids, getDisplaySetsFromSeries}.\n   * Examples include the default sop class handler provided by the default extension\n   */\n  getSopClassHandlerModule,\n};\n\nexport default extension;\n"],"names":["root","factory","exports","module","require","define","amd","globalThis","__WEBPACK_EXTERNAL_MODULE__762__","__WEBPACK_EXTERNAL_MODULE__836__","__WEBPACK_EXTERNAL_MODULE__369__","deferred","installedChunks","async","_ref","rtDisplaySet","viewportIndex","servicesManager","segmentationService","hangingProtocolService","viewportGridService","services","displaySetInstanceUID","referencedDisplaySetInstanceUID","segmentationId","createSegmentationForRTDisplaySet","hydrateSegmentation","viewports","getState","updatedViewports","getViewportsRequireUpdate","setDisplaySetsForViewports","forEach","viewport","index","shouldRenderSegmentation","displaySetInstanceUIDs","push","viewportOptions","initialImageOptions","preset","RESPONSE","NO_NEVER","CANCEL","HYDRATE_SEG","toolGroupId","uiViewportDialogService","Promise","resolve","reject","promptResult","message","actions","type","text","value","onSubmit","result","hide","show","onOutsideClick","_askHydrate","hydrateRTDisplaySet","obj","Symbol","iterator","constructor","prototype","_toPropertyKey","arg","key","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","Number","Object","defineProperty","enumerable","configurable","writable","create","console","warn","_console","_len","arguments","length","args","Array","_key","concat","apply","alreadyWarned","_len2","_key2","Date","loadedClb","i18n","cb","isInitialized","on","initialized","setTimeout","off","loadNamespaces","ns","loadLanguages","lng","n","options","indexOf","matchHtmlEntity","htmlEntities","unescapeHtmlEntity","m","i18nInstance","defaultOptions","bindI18n","bindI18nStore","transEmptyNodeValue","transSupportBasicHtmlNodes","transWrapTextNodes","transKeepBasicHtmlNodesFor","useSuspense","unescape","replace","_defineProperties","target","props","i","descriptor","createContext","ReportNamespaces","instance","Constructor","_classCallCheck","this","usedNamespaces","protoProps","staticProps","namespaces","_this","keys","_arrayLikeToArray","arr","len","arr2","isArray","_i","_s","_e","_x","_r","_arr","_n","_d","next","done","err","o","minLen","toString","slice","name","from","test","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","source","getOwnPropertyDescriptors","defineProperties","usePrevious","ignore","ref","useRef","useEffect","current","i18nFromProps","useContext","i18nFromContext","defaultNSFromContext","defaultNS","reportNamespaces","notReadyT","k","optsOrDefaultValue","defaultValue","retNotReady","t","ready","react","wait","i18nOptions","keyPrefix","addUsedNamespaces","initializedStoreOnce","every","languages","ignoreJSONStructure","hasLoadedNamespace","precheck","loadNotPending","backendConnector","backend","isLanguageChangingTo","fallbackLng","lastLng","toLowerCase","l","loadState","state","hasResourceBundle","resources","partialBundledLanguages","oldI18nextHasLoadedNamespace","getT","getFixedT","nsMode","_useState2","useState","setT","joinedNS","join","previousJoinedNS","isMounted","boundReset","store","split","e","isInitial","ret","ToolGroupService","customizationService","tools","get","createToolGroupAndAddTools","formatDate","utils","OHIFCornerstoneRTViewport","children","displaySets","viewportLabel","extensionManager","displaySetService","toolGroupService","uiNotificationService","Error","viewportGrid","useViewportGrid","isToolGroupCreated","setToolGroupCreated","selectedSegment","setSelectedSegment","isHydrated","setIsHydrated","rtIsLoading","setRtIsLoading","isLoaded","element","setElement","processingProgress","setProcessingProgress","percentComplete","totalSegments","referencedDisplaySetRef","activeViewportIndex","referencedDisplaySet","getReferenceDisplaySet","referencedDisplaySetMetadata","image0","images","PatientID","PatientName","PatientSex","PatientAge","SliceThickness","StudyDate","SeriesDescription","SeriesInstanceUID","SeriesNumber","ManufacturerModelName","SpacingBetweenSlices","_getReferencedDisplaySetMetadata","displaySet","metadata","onElementEnabled","evt","detail","onElementDisabled","getCornerstoneViewport","useCallback","component","Component","getModuleEntry","React","_extends","viewportType","orientation","viewportId","onSegmentChange","direction","segmentation","getSegmentation","segments","numberOfSegments","newSelectedSegmentIndex","jumpToSegmentCenter","promptHydrateRT","then","unsubscribe","subscribe","EVENTS","SEGMENTATION_LOADING_COMPLETE","overlappingSegments","title","SEGMENT_LOADING_COMPLETE","numSegments","onDisplaySetsRemovedSubscription","DISPLAY_SETS_REMOVED","_ref2","activeViewport","includes","setDisplaySetsForViewport","toolGroup","getToolGroup","createRTToolGroupAndAddTools","removeSegmentationRepresentationFromToolGroup","destroyToolGroup","childrenWithProps","map","child","onStatusClick","_hydrateRTDisplaySet","ViewportActionBar","onDoubleClick","stopPropagation","preventDefault","onArrowsClick","getStatusComponent","ToolTipMessage","StatusIcon","useTranslation","loadStr","Icon","StatusArea","className","onMouseUp","Tooltip","content","position","_getStatusComponent","studyData","label","useAltStyling","studyDate","currentSeries","seriesDescription","patientInformation","patientName","OHIF","formatPN","Alphabetic","patientSex","patientAge","MRN","thickness","toFixed","spacing","scanner","LoadingIndicatorTotalPercent","totalNumbers","loadingText","propTypes","PropTypes","isRequired","dataSource","customProps","defaultProps","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","assign","test1","getOwnPropertyNames","test2","fromCharCode","test3","letter","shouldUseNative","to","val","toObject","s","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","location","propFullName","secret","getShim","ReactPropTypes","array","bigint","bool","func","number","string","symbol","any","arrayOf","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","p","Fragment","StrictMode","Profiler","q","r","Suspense","u","v","for","w","x","z","a","b","c","encodeURIComponent","A","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","B","C","context","refs","updater","D","E","isReactComponent","setState","forceUpdate","F","isPureReactComponent","G","H","I","__self","__source","J","d","h","g","f","$$typeof","_owner","L","M","N","escape","O","K","y","P","Q","_status","_result","default","R","S","T","ReactCurrentDispatcher","ReactCurrentBatchConfig","transition","ReactCurrentOwner","IsSomeRendererActing","Children","count","toArray","only","PureComponent","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","cloneElement","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_context","createElement","createFactory","bind","createRef","forwardRef","render","isValidElement","lazy","_payload","_init","memo","compare","useDebugValue","useImperativeHandle","useLayoutEffect","useMemo","useReducer","version","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","splice","chunkId","getter","__esModule","definition","prop","toStringTag","link","document","nc","setAttribute","rel","as","href","head","appendChild","id","packageJson","SOPClassHandlerId","DicomMessage","DicomMetaDictionary","dcmjs","dicomlab2RGB","Colors","loadRTStruct","rtStructDisplaySet","headers","utilityModule","getActiveDataSource","bulkDataURI","getConfig","dicomLoaderService","imageIdSopInstanceUidPairs","image","imageId","sopInstanceUID","SOPInstanceUID","_getImageIdSopInstanceUidPairsForDisplaySet","enabled","datasource","ROIContourSequence","promisesMap","Map","ROIContour","referencedROINumber","ReferencedROINumber","ContourSequence","Contour","ContourData","contourData","has","set","BulkDataURI","retrieve","bulkDataPromise","StudyInstanceUID","resolvedPromisesMap","promiseArray","entries","allSettled","resolvedPromises","promise","status","isFinite","uint8Array","Uint8Array","dataUint8Array","TextDecoder","decode","parseFloat","error","reason","checkAndLoadContourData","segArrayBuffer","findDicomDataPromise","dicomData","readFile","rtStructDataset","naturalizeDataset","dict","_meta","namifyDataset","meta","StructureSetROISequence","RTROIObservationsSequence","structureSet","StructureSetLabel","ROIContours","visible","isSupported","ContourSequenceArray","objOrArray","contourPoints","ContourImageSequence","NumberOfContourPoints","ContourGeometricType","ReferencedSOPInstanceUID","_getImageId","points","numberOfPoints","_setROIContourMetadata","imageIdSopInstanceUidPairsEntry","find","StructureSetROI","structureSetROI","ROINumber","ROIContourData","ROIName","ROIGenerationAlgorithm","ROIDescription","ROIDisplayColor","RecommendedDisplayCIELabValue","colorArray","_setROIContourDataColor","RTROIObservations","ObservationNumber","ROIObservationDescription","RTROIInterpretedType","ROIInterpreter","_setROIContourRTROIObservations","sopClassUids","loadPromises","_getDisplaySetsFromSeries","instances","SeriesDate","SOPClassUID","wadoRoot","wadoUri","wadoUriRoot","Modality","loading","isReconstructable","guid","referencedImages","referencedSeriesInstanceUID","isDerivedDisplaySet","isOverlayDisplaySet","referencedSeriesSequence","ReferencedSeriesSequence","ReferencedFrameOfReferenceSequence","referencedFrameOfReference","RTReferencedStudySequence","rtReferencedStudy","RTReferencedSeriesSequence","rtReferencedSeries","ReferencedInstanceSequence","contourImage","ReferencedSOPClassUID","referencedSeries","_deriveReferencedSeriesSequenceFromFrameOfReferenceSequence","DisplaySetService","referencedDisplaySets","getDisplaySetsForSeries","load","suppressEvents","catch","_load","getDisplaySetsFromSeries","fallback","getViewportModule","getSopClassHandlerModule"],"sourceRoot":""}