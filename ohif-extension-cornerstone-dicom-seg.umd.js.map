{"version":3,"file":"dist/ohif-extension-cornerstone-dicom-seg.umd.js","mappings":"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","sources":["webpack://ohif-extension-cornerstone-dicom-seg/webpack/universalModuleDefinition","webpack://ohif-extension-cornerstone-dicom-seg/webpack/runtime/chunk loaded","webpack://ohif-extension-cornerstone-dicom-seg/webpack/runtime/jsonp chunk loading","webpack://ohif-extension-cornerstone-dicom-seg/./utils/initSEGToolGroup.ts","webpack://ohif-extension-cornerstone-dicom-seg/./utils/_hydrateSEG.ts","webpack://ohif-extension-cornerstone-dicom-seg/./utils/promptHydrateSEG.ts","webpack://ohif-extension-cornerstone-dicom-seg/./viewports/OHIFCornerstoneSEGViewport.tsx","webpack://ohif-extension-cornerstone-dicom-seg/./viewports/_getStatusComponent.tsx","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/object-assign/index.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/prop-types/factoryWithThrowingShims.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/prop-types/index.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react/cjs/react.production.min.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react/index.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/void-elements/index.js","webpack://ohif-extension-cornerstone-dicom-seg/external umd \"@kitware/vtk.js/Common/Core/Math\"","webpack://ohif-extension-cornerstone-dicom-seg/external umd \"@ohif/core\"","webpack://ohif-extension-cornerstone-dicom-seg/external umd \"@ohif/ui\"","webpack://ohif-extension-cornerstone-dicom-seg/external umd \"dcmjs\"","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/html-parse-stringify/dist/html-parse-stringify.module.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react-i18next/dist/es/utils.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react-i18next/dist/es/unescape.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react-i18next/dist/es/defaults.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react-i18next/dist/es/TransWithoutContext.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react-i18next/dist/es/i18nInstance.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react-i18next/dist/es/context.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://ohif-extension-cornerstone-dicom-seg/../../../node_modules/react-i18next/dist/es/useTranslation.js","webpack://ohif-extension-cornerstone-dicom-seg/webpack/bootstrap","webpack://ohif-extension-cornerstone-dicom-seg/webpack/runtime/chunk prefetch function","webpack://ohif-extension-cornerstone-dicom-seg/webpack/runtime/compat get default export","webpack://ohif-extension-cornerstone-dicom-seg/webpack/runtime/define property getters","webpack://ohif-extension-cornerstone-dicom-seg/webpack/runtime/hasOwnProperty shorthand","webpack://ohif-extension-cornerstone-dicom-seg/webpack/runtime/make namespace object","webpack://ohif-extension-cornerstone-dicom-seg/webpack/runtime/startup prefetch","webpack://ohif-extension-cornerstone-dicom-seg/./id.js","webpack://ohif-extension-cornerstone-dicom-seg/./getSopClassHandlerModule.js","webpack://ohif-extension-cornerstone-dicom-seg/./panels/callInputDialog.tsx","webpack://ohif-extension-cornerstone-dicom-seg/./panels/PanelSegmentation.tsx","webpack://ohif-extension-cornerstone-dicom-seg/./getHangingProtocolModule.ts","webpack://ohif-extension-cornerstone-dicom-seg/./index.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@kitware/vtk.js/Common/Core/Math\"), require(\"@ohif/core\"), require(\"dcmjs\"), require(\"@ohif/ui\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@kitware/vtk.js/Common/Core/Math\", \"@ohif/core\", \"dcmjs\", \"@ohif/ui\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ohif-extension-cornerstone-dicom-seg\"] = factory(require(\"@kitware/vtk.js/Common/Core/Math\"), require(\"@ohif/core\"), require(\"dcmjs\"), require(\"@ohif/ui\"));\n\telse\n\t\troot[\"ohif-extension-cornerstone-dicom-seg\"] = factory(root[\"@kitware/vtk.js/Common/Core/Math\"], root[\"@ohif/core\"], root[\"dcmjs\"], root[\"@ohif/ui\"]);\n})(globalThis, (__WEBPACK_EXTERNAL_MODULE__807__, __WEBPACK_EXTERNAL_MODULE__762__, __WEBPACK_EXTERNAL_MODULE__836__, __WEBPACK_EXTERNAL_MODULE__369__) => {\nreturn ","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n__webpack_require__.F.j = (chunkId) => {\n\tif((!__webpack_require__.o(installedChunks, chunkId) || installedChunks[chunkId] === undefined) && true) {\n\t\tinstalledChunks[chunkId] = null;\n\t\tvar link = document.createElement('link');\n\n\t\tif (__webpack_require__.nc) {\n\t\t\tlink.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tlink.rel = \"prefetch\";\n\t\tlink.as = \"script\";\n\t\tlink.href = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\tdocument.head.appendChild(link);\n\t}\n};\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// no jsonp function","function createSEGToolGroupAndAddTools(\n  ToolGroupService,\n  customizationService,\n  toolGroupId\n) {\n  const { tools } =\n    customizationService.get('cornerstone.overlayViewportTools') ?? {};\n\n  return ToolGroupService.createToolGroupAndAddTools(toolGroupId, tools, {});\n}\n\nexport default createSEGToolGroupAndAddTools;\n","async function _hydrateSEGDisplaySet({\n  segDisplaySet,\n  viewportIndex,\n  servicesManager,\n}) {\n  const {\n    segmentationService,\n    hangingProtocolService,\n    viewportGridService,\n  } = servicesManager.services;\n\n  const displaySetInstanceUID = segDisplaySet.referencedDisplaySetInstanceUID;\n\n  let segmentationId = null;\n\n  // We need the hydration to notify panels about the new segmentation added\n  const suppressEvents = false;\n\n  segmentationId = await segmentationService.createSegmentationForSEGDisplaySet(\n    segDisplaySet,\n    segmentationId,\n    suppressEvents\n  );\n\n  segmentationService.hydrateSegmentation(segDisplaySet.displaySetInstanceUID);\n\n  const { viewports } = viewportGridService.getState();\n\n  const updatedViewports = hangingProtocolService.getViewportsRequireUpdate(\n    viewportIndex,\n    displaySetInstanceUID\n  );\n\n  // Todo: fix this after we have a better way for stack viewport segmentations\n\n  // check every viewport in the viewports to see if the displaySetInstanceUID\n  // is being displayed, if so we need to update the viewport to use volume viewport\n  // (if already is not using it) since Cornerstone3D currently only supports\n  // volume viewport for segmentation\n  viewports.forEach((viewport, index) => {\n    if (index === viewportIndex) {\n      return;\n    }\n\n    const shouldDisplaySeg = segmentationService.shouldRenderSegmentation(\n      viewport.displaySetInstanceUIDs,\n      segDisplaySet.displaySetInstanceUID\n    );\n\n    if (shouldDisplaySeg) {\n      updatedViewports.push({\n        viewportIndex: index,\n        displaySetInstanceUIDs: viewport.displaySetInstanceUIDs,\n        viewportOptions: {\n          initialImageOptions: {\n            preset: 'middle',\n          },\n        },\n      });\n    }\n  });\n\n  // Do the entire update at once\n  viewportGridService.setDisplaySetsForViewports(updatedViewports);\n\n  return true;\n}\n\nexport default _hydrateSEGDisplaySet;\n","import hydrateSEGDisplaySet from './_hydrateSEG';\n\nconst RESPONSE = {\n  NO_NEVER: -1,\n  CANCEL: 0,\n  HYDRATE_SEG: 5,\n};\n\nfunction promptHydrateSEG({\n  servicesManager,\n  segDisplaySet,\n  viewportIndex,\n}) {\n  const { uiViewportDialogService } = servicesManager.services;\n\n  return new Promise(async function(resolve, reject) {\n    const promptResult = await _askHydrate(\n      uiViewportDialogService,\n      viewportIndex\n    );\n\n    if (promptResult === RESPONSE.HYDRATE_SEG) {\n      const isHydrated = await hydrateSEGDisplaySet({\n        segDisplaySet,\n        viewportIndex,\n        servicesManager,\n      });\n\n      resolve(isHydrated);\n    }\n  });\n}\n\nfunction _askHydrate(uiViewportDialogService, viewportIndex) {\n  return new Promise(function(resolve, reject) {\n    const message = 'Do you want to open this Segmentation?';\n    const actions = [\n      {\n        type: 'secondary',\n        text: 'No',\n        value: RESPONSE.CANCEL,\n      },\n      {\n        type: 'primary',\n        text: 'Yes',\n        value: RESPONSE.HYDRATE_SEG,\n      },\n    ];\n    const onSubmit = result => {\n      uiViewportDialogService.hide();\n      resolve(result);\n    };\n\n    uiViewportDialogService.show({\n      viewportIndex,\n      type: 'info',\n      message,\n      actions,\n      onSubmit,\n      onOutsideClick: () => {\n        uiViewportDialogService.hide();\n        resolve(RESPONSE.CANCEL);\n      },\n    });\n  });\n}\n\nexport default promptHydrateSEG;\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport OHIF, { utils } from '@ohif/core';\nimport {\n  LoadingIndicatorTotalPercent,\n  useViewportGrid,\n  ViewportActionBar,\n} from '@ohif/ui';\nimport createSEGToolGroupAndAddTools from '../utils/initSEGToolGroup';\nimport promptHydrateSEG from '../utils/promptHydrateSEG';\nimport hydrateSEGDisplaySet from '../utils/_hydrateSEG';\nimport _getStatusComponent from './_getStatusComponent';\n\nconst { formatDate } = utils;\nconst SEG_TOOLGROUP_BASE_NAME = 'SEGToolGroup';\n\nfunction OHIFCornerstoneSEGViewport(props) {\n  const {\n    children,\n    displaySets,\n    viewportOptions,\n    viewportIndex,\n    viewportLabel,\n    servicesManager,\n    extensionManager,\n  } = props;\n\n  const { t } = useTranslation('SEGViewport');\n\n  const {\n    displaySetService,\n    toolGroupService,\n    segmentationService,\n    uiNotificationService,\n    customizationService,\n  } = servicesManager.services;\n\n  const toolGroupId = `${SEG_TOOLGROUP_BASE_NAME}-${viewportIndex}`;\n\n  // SEG viewport will always have a single display set\n  if (displaySets.length > 1) {\n    throw new Error('SEG viewport should only have a single display set');\n  }\n\n  const segDisplaySet = displaySets[0];\n\n  const [viewportGrid, viewportGridService] = useViewportGrid();\n\n  // States\n  const [isToolGroupCreated, setToolGroupCreated] = useState(false);\n  const [selectedSegment, setSelectedSegment] = useState(1);\n\n  // Hydration means that the SEG is opened and segments are loaded into the\n  // segmentation panel, and SEG is also rendered on any viewport that is in the\n  // same frameOfReferenceUID as the referencedSeriesUID of the SEG. However,\n  // loading basically means SEG loading over network and bit unpacking of the\n  // SEG data.\n  const [isHydrated, setIsHydrated] = useState(segDisplaySet.isHydrated);\n  const [segIsLoading, setSegIsLoading] = useState(!segDisplaySet.isLoaded);\n  const [element, setElement] = useState(null);\n  const [processingProgress, setProcessingProgress] = useState({\n    percentComplete: null,\n    totalSegments: null,\n  });\n\n  // refs\n  const referencedDisplaySetRef = useRef(null);\n\n  const { viewports, activeViewportIndex } = viewportGrid;\n\n  const referencedDisplaySet = segDisplaySet.getReferenceDisplaySet();\n  const referencedDisplaySetMetadata = _getReferencedDisplaySetMetadata(\n    referencedDisplaySet\n  );\n\n  referencedDisplaySetRef.current = {\n    displaySet: referencedDisplaySet,\n    metadata: referencedDisplaySetMetadata,\n  };\n  /**\n   * OnElementEnabled callback which is called after the cornerstoneExtension\n   * has enabled the element. Note: we delegate all the image rendering to\n   * cornerstoneExtension, so we don't need to do anything here regarding\n   * the image rendering, element enabling etc.\n   */\n  const onElementEnabled = evt => {\n    setElement(evt.detail.element);\n  };\n\n  const onElementDisabled = () => {\n    setElement(null);\n  };\n\n  const getCornerstoneViewport = useCallback(() => {\n    const { component: Component } = extensionManager.getModuleEntry(\n      '@ohif/extension-cornerstone.viewportModule.cornerstone'\n    );\n\n    const {\n      displaySet: referencedDisplaySet,\n    } = referencedDisplaySetRef.current;\n\n    // Todo: jump to the center of the first segment\n    return (\n      <Component\n        {...props}\n        displaySets={[referencedDisplaySet, segDisplaySet]}\n        viewportOptions={{\n          viewportType: 'volume',\n          toolGroupId: toolGroupId,\n          orientation: viewportOptions.orientation,\n          viewportId: viewportOptions.viewportId,\n        }}\n        onElementEnabled={onElementEnabled}\n        onElementDisabled={onElementDisabled}\n        // initialImageIndex={initialImageIndex}\n      ></Component>\n    );\n  }, [viewportIndex, segDisplaySet, toolGroupId]);\n\n  const onSegmentChange = useCallback(\n    direction => {\n      direction = direction === 'left' ? -1 : 1;\n      const segmentationId = segDisplaySet.displaySetInstanceUID;\n      const segmentation = segmentationService.getSegmentation(segmentationId);\n\n      const { segments } = segmentation;\n\n      const numberOfSegments = Object.keys(segments).length;\n\n      let newSelectedSegmentIndex = selectedSegment + direction;\n\n      // Segment 0 is always background\n\n      if (newSelectedSegmentIndex > numberOfSegments - 1) {\n        newSelectedSegmentIndex = 1;\n      } else if (newSelectedSegmentIndex === 0) {\n        newSelectedSegmentIndex = numberOfSegments - 1;\n      }\n\n      segmentationService.jumpToSegmentCenter(\n        segmentationId,\n        newSelectedSegmentIndex,\n        toolGroupId\n      );\n      setSelectedSegment(newSelectedSegmentIndex);\n    },\n    [selectedSegment]\n  );\n\n  useEffect(() => {\n    if (segIsLoading) {\n      return;\n    }\n\n    promptHydrateSEG({\n      servicesManager,\n      viewportIndex,\n      segDisplaySet,\n    }).then(isHydrated => {\n      if (isHydrated) {\n        setIsHydrated(true);\n      }\n    });\n  }, [servicesManager, viewportIndex, segDisplaySet, segIsLoading]);\n\n  useEffect(() => {\n    const { unsubscribe } = segmentationService.subscribe(\n      segmentationService.EVENTS.SEGMENTATION_LOADING_COMPLETE,\n      evt => {\n        if (\n          evt.segDisplaySet.displaySetInstanceUID ===\n          segDisplaySet.displaySetInstanceUID\n        ) {\n          setSegIsLoading(false);\n        }\n\n        if (evt.overlappingSegments) {\n          uiNotificationService.show({\n            title: 'Overlapping Segments',\n            message:\n              'Overlapping segments detected which is not currently supported',\n            type: 'warning',\n          });\n        }\n      }\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  }, [segDisplaySet]);\n\n  useEffect(() => {\n    const { unsubscribe } = segmentationService.subscribe(\n      segmentationService.EVENTS.SEGMENT_LOADING_COMPLETE,\n      ({ percentComplete, numSegments }) => {\n        setProcessingProgress({\n          percentComplete,\n          totalSegments: numSegments,\n        });\n      }\n    );\n\n    return () => {\n      unsubscribe();\n    };\n  }, [segDisplaySet]);\n\n  /**\n   Cleanup the SEG viewport when the viewport is destroyed\n   */\n  useEffect(() => {\n    const onDisplaySetsRemovedSubscription = displaySetService.subscribe(\n      displaySetService.EVENTS.DISPLAY_SETS_REMOVED,\n      ({ displaySetInstanceUIDs }) => {\n        const activeViewport = viewports[activeViewportIndex];\n        if (\n          displaySetInstanceUIDs.includes(activeViewport.displaySetInstanceUID)\n        ) {\n          viewportGridService.setDisplaySetsForViewport({\n            viewportIndex: activeViewportIndex,\n            displaySetInstanceUIDs: [],\n          });\n        }\n      }\n    );\n\n    return () => {\n      onDisplaySetsRemovedSubscription.unsubscribe();\n    };\n  }, []);\n\n  useEffect(() => {\n    let toolGroup = toolGroupService.getToolGroup(toolGroupId);\n\n    if (toolGroup) {\n      return;\n    }\n\n    // This creates a custom tool group which has the lifetime of this view\n    // only, and does NOT interfere with currently displayed segmentations.\n    toolGroup = createSEGToolGroupAndAddTools(\n      toolGroupService,\n      customizationService,\n      toolGroupId\n    );\n\n    setToolGroupCreated(true);\n\n    return () => {\n      // remove the segmentation representations if seg displayset changed\n      segmentationService.removeSegmentationRepresentationFromToolGroup(\n        toolGroupId\n      );\n\n      // Only destroy the viewport specific implementation\n      toolGroupService.destroyToolGroup(toolGroupId);\n    };\n  }, []);\n\n  useEffect(() => {\n    setIsHydrated(segDisplaySet.isHydrated);\n\n    return () => {\n      // remove the segmentation representations if seg displayset changed\n      segmentationService.removeSegmentationRepresentationFromToolGroup(\n        toolGroupId\n      );\n      referencedDisplaySetRef.current = null;\n    };\n  }, [segDisplaySet]);\n\n  // ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  let childrenWithProps = null;\n\n  if (\n    !referencedDisplaySetRef.current ||\n    referencedDisplaySet.displaySetInstanceUID !==\n      referencedDisplaySetRef.current.displaySet.displaySetInstanceUID\n  ) {\n    return null;\n  }\n\n  if (children && children.length) {\n    childrenWithProps = children.map((child, index) => {\n      return (\n        child &&\n        React.cloneElement(child, {\n          viewportIndex,\n          key: index,\n        })\n      );\n    });\n  }\n\n  const {\n    PatientID,\n    PatientName,\n    PatientSex,\n    PatientAge,\n    SliceThickness,\n    ManufacturerModelName,\n    StudyDate,\n    SeriesDescription,\n    SpacingBetweenSlices,\n  } = referencedDisplaySetRef.current.metadata;\n\n  const onStatusClick = async () => {\n    const isHydrated = await hydrateSEGDisplaySet({\n      segDisplaySet,\n      viewportIndex,\n      servicesManager,\n    });\n\n    setIsHydrated(isHydrated);\n  };\n\n  return (\n    <>\n      <ViewportActionBar\n        onDoubleClick={evt => {\n          evt.stopPropagation();\n          evt.preventDefault();\n        }}\n        onArrowsClick={onSegmentChange}\n        getStatusComponent={() => {\n          return _getStatusComponent({\n            isHydrated,\n            onStatusClick,\n          });\n        }}\n        studyData={{\n          label: viewportLabel,\n          useAltStyling: true,\n          studyDate: formatDate(StudyDate),\n          seriesDescription: `SEG Viewport ${SeriesDescription}`,\n          patientInformation: {\n            patientName: PatientName\n              ? OHIF.utils.formatPN(PatientName.Alphabetic)\n              : '',\n            patientSex: PatientSex || '',\n            patientAge: PatientAge || '',\n            MRN: PatientID || '',\n            thickness: SliceThickness ? `${SliceThickness.toFixed(2)}mm` : '',\n            spacing:\n              SpacingBetweenSlices !== undefined\n                ? `${SpacingBetweenSlices.toFixed(2)}mm`\n                : '',\n            scanner: ManufacturerModelName || '',\n          },\n        }}\n      />\n\n      <div className=\"relative flex flex-row w-full h-full overflow-hidden\">\n        {segIsLoading && (\n          <LoadingIndicatorTotalPercent\n            className=\"w-full h-full\"\n            totalNumbers={processingProgress.totalSegments}\n            percentComplete={processingProgress.percentComplete}\n            loadingText=\"Loading SEG...\"\n          />\n        )}\n        {getCornerstoneViewport()}\n        {childrenWithProps}\n      </div>\n    </>\n  );\n}\n\nOHIFCornerstoneSEGViewport.propTypes = {\n  displaySets: PropTypes.arrayOf(PropTypes.object),\n  viewportIndex: PropTypes.number.isRequired,\n  dataSource: PropTypes.object,\n  children: PropTypes.node,\n  customProps: PropTypes.object,\n};\n\nOHIFCornerstoneSEGViewport.defaultProps = {\n  customProps: {},\n};\n\nfunction _getReferencedDisplaySetMetadata(referencedDisplaySet) {\n  const image0 = referencedDisplaySet.images[0];\n  const referencedDisplaySetMetadata = {\n    PatientID: image0.PatientID,\n    PatientName: image0.PatientName,\n    PatientSex: image0.PatientSex,\n    PatientAge: image0.PatientAge,\n    SliceThickness: image0.SliceThickness,\n    StudyDate: image0.StudyDate,\n    SeriesDescription: image0.SeriesDescription,\n    SeriesInstanceUID: image0.SeriesInstanceUID,\n    SeriesNumber: image0.SeriesNumber,\n    ManufacturerModelName: image0.ManufacturerModelName,\n    SpacingBetweenSlices: image0.SpacingBetweenSlices,\n  };\n\n  return referencedDisplaySetMetadata;\n}\n\nexport default OHIFCornerstoneSEGViewport;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Icon, Tooltip } from '@ohif/ui';\n\n\nexport default function _getStatusComponent({ isHydrated, onStatusClick }) {\n  let ToolTipMessage = null;\n  let StatusIcon = null;\n\n  const {t} = useTranslation(\"Common\");\n  const loadStr = t(\"LOAD\");\n\n  switch (isHydrated) {\n    case true:\n      StatusIcon = () => <Icon name=\"status-alert\" />;\n\n      ToolTipMessage = () => (\n        <div>This Segmentation is loaded in the segmentation panel</div>\n      );\n      break;\n  case false:\n      StatusIcon = () => <Icon name=\"status-untracked\" />;\n\n      ToolTipMessage = () => <div>Click LOAD to load segmentation.</div>;\n  }\n\n  const StatusArea = () => (\n    <div className=\"flex h-6 leading-6 cursor-default text-sm text-white\">\n      <div className=\"min-w-[45px] flex items-center p-1 rounded-l-xl rounded-r bg-customgray-100\">\n        <StatusIcon />\n        <span className=\"ml-1\">SEG</span>\n      </div>\n      {!isHydrated && (\n        <div\n          className=\"ml-1 px-1.5 rounded cursor-pointer hover:text-black bg-primary-main hover:bg-primary-light\"\n          // Using onMouseUp here because onClick is not working when the viewport is not active and is styled with pointer-events:none\n          onMouseUp={onStatusClick}\n        >\n          {loadStr}\n        </div>\n      )}\n    </div>\n  );\n\n\n  return (\n    <>\n      {ToolTipMessage && (\n        <Tooltip content={<ToolTipMessage />} position=\"bottom-left\">\n          <StatusArea />\n        </Tooltip>\n      )}\n      {!ToolTipMessage && <StatusArea />}\n    </>\n  );\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * This file automatically generated from `pre-publish.js`.\n * Do not manually edit.\n */\n\nmodule.exports = {\n  \"area\": true,\n  \"base\": true,\n  \"br\": true,\n  \"col\": true,\n  \"embed\": true,\n  \"hr\": true,\n  \"img\": true,\n  \"input\": true,\n  \"link\": true,\n  \"meta\": true,\n  \"param\": true,\n  \"source\": true,\n  \"track\": true,\n  \"wbr\": true\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__807__;","module.exports = __WEBPACK_EXTERNAL_MODULE__762__;","module.exports = __WEBPACK_EXTERNAL_MODULE__369__;","module.exports = __WEBPACK_EXTERNAL_MODULE__836__;","import e from\"void-elements\";var t=/\\s([^'\"/\\s><]+?)[\\s/>]|([^\\s=]+)=\\s?(\".*?\"|'.*?')/g;function n(n){var r={type:\"tag\",name:\"\",voidElement:!1,attrs:{},children:[]},i=n.match(/<\\/?([^\\s]+?)[/\\s>]/);if(i&&(r.name=i[1],(e[i[1]]||\"/\"===n.charAt(n.length-2))&&(r.voidElement=!0),r.name.startsWith(\"!--\"))){var s=n.indexOf(\"--\\x3e\");return{type:\"comment\",comment:-1!==s?n.slice(4,s):\"\"}}for(var a=new RegExp(t),c=null;null!==(c=a.exec(n));)if(c[0].trim())if(c[1]){var o=c[1].trim(),l=[o,\"\"];o.indexOf(\"=\")>-1&&(l=o.split(\"=\")),r.attrs[l[0]]=l[1],a.lastIndex--}else c[2]&&(r.attrs[c[2]]=c[3].trim().substring(1,c[3].length-1));return r}var r=/<[a-zA-Z0-9\\-\\!\\/](?:\"[^\"]*\"|'[^']*'|[^'\">])*>/g,i=/^\\s*$/,s=Object.create(null);function a(e,t){switch(t.type){case\"text\":return e+t.content;case\"tag\":return e+=\"<\"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'=\"'+e[n]+'\"');return t.length?\" \"+t.join(\" \"):\"\"}(t.attrs):\"\")+(t.voidElement?\"/>\":\">\"),t.voidElement?e:e+t.children.reduce(a,\"\")+\"</\"+t.name+\">\";case\"comment\":return e+\"\\x3c!--\"+t.comment+\"--\\x3e\"}}var c={parse:function(e,t){t||(t={}),t.components||(t.components=s);var a,c=[],o=[],l=-1,m=!1;if(0!==e.indexOf(\"<\")){var u=e.indexOf(\"<\");c.push({type:\"text\",content:-1===u?e:e.substring(0,u)})}return e.replace(r,function(r,s){if(m){if(r!==\"</\"+a.name+\">\")return;m=!1}var u,f=\"/\"!==r.charAt(1),h=r.startsWith(\"\\x3c!--\"),p=s+r.length,d=e.charAt(p);if(h){var v=n(r);return l<0?(c.push(v),c):((u=o[l]).children.push(v),c)}if(f&&(l++,\"tag\"===(a=n(r)).type&&t.components[a.name]&&(a.type=\"component\",m=!0),a.voidElement||m||!d||\"<\"===d||a.children.push({type:\"text\",content:e.slice(p,e.indexOf(\"<\",p))}),0===l&&c.push(a),(u=o[l-1])&&u.children.push(a),o[l]=a),(!f||a.voidElement)&&(l>-1&&(a.voidElement||a.name===r.slice(2,-1))&&(l--,a=-1===l?c:o[l]),!m&&\"<\"!==d&&d)){u=-1===l?c:o[l].children;var x=e.indexOf(\"<\",p),g=e.slice(p,-1===x?void 0:x);i.test(g)&&(g=\" \"),(x>-1&&l+u.length>=0||\" \"!==g)&&u.push({type:\"text\",content:g})}}),c},stringify:function(e){return e.reduce(function(e,t){return e+a(\"\",t)},\"\")}};export default c;\n//# sourceMappingURL=html-parse-stringify.module.js.map\n","export function warn() {\n  if (console && console.warn) {\n    var _console;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[0] === 'string') args[0] = \"react-i18next:: \".concat(args[0]);\n\n    (_console = console).warn.apply(_console, args);\n  }\n}\nvar alreadyWarned = {};\nexport function warnOnce() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  if (typeof args[0] === 'string' && alreadyWarned[args[0]]) return;\n  if (typeof args[0] === 'string') alreadyWarned[args[0]] = new Date();\n  warn.apply(void 0, args);\n}\n\nvar loadedClb = function loadedClb(i18n, cb) {\n  return function () {\n    if (i18n.isInitialized) {\n      cb();\n    } else {\n      var initialized = function initialized() {\n        setTimeout(function () {\n          i18n.off('initialized', initialized);\n        }, 0);\n        cb();\n      };\n\n      i18n.on('initialized', initialized);\n    }\n  };\n};\n\nexport function loadNamespaces(i18n, ns, cb) {\n  i18n.loadNamespaces(ns, loadedClb(i18n, cb));\n}\nexport function loadLanguages(i18n, lng, ns, cb) {\n  if (typeof ns === 'string') ns = [ns];\n  ns.forEach(function (n) {\n    if (i18n.options.ns.indexOf(n) < 0) i18n.options.ns.push(n);\n  });\n  i18n.loadLanguages(lng, loadedClb(i18n, cb));\n}\n\nfunction oldI18nextHasLoadedNamespace(ns, i18n) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var lng = i18n.languages[0];\n  var fallbackLng = i18n.options ? i18n.options.fallbackLng : false;\n  var lastLng = i18n.languages[i18n.languages.length - 1];\n  if (lng.toLowerCase() === 'cimode') return true;\n\n  var loadNotPending = function loadNotPending(l, n) {\n    var loadState = i18n.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n    return loadState === -1 || loadState === 2;\n  };\n\n  if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18n.services.backendConnector.backend && i18n.isLanguageChangingTo && !loadNotPending(i18n.isLanguageChangingTo, ns)) return false;\n  if (i18n.hasResourceBundle(lng, ns)) return true;\n  if (!i18n.services.backendConnector.backend || i18n.options.resources && !i18n.options.partialBundledLanguages) return true;\n  if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n  return false;\n}\n\nexport function hasLoadedNamespace(ns, i18n) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (!i18n.languages || !i18n.languages.length) {\n    warnOnce('i18n.languages were undefined or empty', i18n.languages);\n    return true;\n  }\n\n  var isNewerI18next = i18n.options.ignoreJSONStructure !== undefined;\n\n  if (!isNewerI18next) {\n    return oldI18nextHasLoadedNamespace(ns, i18n, options);\n  }\n\n  return i18n.hasLoadedNamespace(ns, {\n    lng: options.lng,\n    precheck: function precheck(i18nInstance, loadNotPending) {\n      if (options.bindI18n && options.bindI18n.indexOf('languageChanging') > -1 && i18nInstance.services.backendConnector.backend && i18nInstance.isLanguageChangingTo && !loadNotPending(i18nInstance.isLanguageChangingTo, ns)) return false;\n    }\n  });\n}\nexport function getDisplayName(Component) {\n  return Component.displayName || Component.name || (typeof Component === 'string' && Component.length > 0 ? Component : 'Unknown');\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","var matchHtmlEntity = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g;\nvar htmlEntities = {\n  '&amp;': '&',\n  '&#38;': '&',\n  '&lt;': '<',\n  '&#60;': '<',\n  '&gt;': '>',\n  '&#62;': '>',\n  '&apos;': \"'\",\n  '&#39;': \"'\",\n  '&quot;': '\"',\n  '&#34;': '\"',\n  '&nbsp;': ' ',\n  '&#160;': ' ',\n  '&copy;': '©',\n  '&#169;': '©',\n  '&reg;': '®',\n  '&#174;': '®',\n  '&hellip;': '…',\n  '&#8230;': '…',\n  '&#x2F;': '/',\n  '&#47;': '/'\n};\n\nvar unescapeHtmlEntity = function unescapeHtmlEntity(m) {\n  return htmlEntities[m];\n};\n\nexport var unescape = function unescape(text) {\n  return text.replace(matchHtmlEntity, unescapeHtmlEntity);\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { unescape } from './unescape.js';\nvar defaultOptions = {\n  bindI18n: 'languageChanged',\n  bindI18nStore: '',\n  transEmptyNodeValue: '',\n  transSupportBasicHtmlNodes: true,\n  transWrapTextNodes: '',\n  transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'p'],\n  useSuspense: true,\n  unescape: unescape\n};\nexport function setDefaults() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  defaultOptions = _objectSpread(_objectSpread({}, defaultOptions), options);\n}\nexport function getDefaults() {\n  return defaultOptions;\n}","import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"format\"],\n    _excluded2 = [\"children\", \"count\", \"parent\", \"i18nKey\", \"context\", \"tOptions\", \"values\", \"defaults\", \"components\", \"ns\", \"i18n\", \"t\", \"shouldUnescape\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { isValidElement, cloneElement, createElement } from 'react';\nimport HTML from 'html-parse-stringify';\nimport { warn, warnOnce } from './utils.js';\nimport { getDefaults } from './defaults.js';\nimport { getI18n } from './i18nInstance.js';\n\nfunction hasChildren(node, checkLength) {\n  if (!node) return false;\n  var base = node.props ? node.props.children : node.children;\n  if (checkLength) return base.length > 0;\n  return !!base;\n}\n\nfunction getChildren(node) {\n  if (!node) return [];\n  return node.props ? node.props.children : node.children;\n}\n\nfunction hasValidReactChildren(children) {\n  if (Object.prototype.toString.call(children) !== '[object Array]') return false;\n  return children.every(function (child) {\n    return isValidElement(child);\n  });\n}\n\nfunction getAsArray(data) {\n  return Array.isArray(data) ? data : [data];\n}\n\nfunction mergeProps(source, target) {\n  var newTarget = _objectSpread({}, target);\n\n  newTarget.props = Object.assign(source.props, target.props);\n  return newTarget;\n}\n\nexport function nodesToString(children, i18nOptions) {\n  if (!children) return '';\n  var stringNode = '';\n  var childrenArray = getAsArray(children);\n  var keepArray = i18nOptions.transSupportBasicHtmlNodes && i18nOptions.transKeepBasicHtmlNodesFor ? i18nOptions.transKeepBasicHtmlNodesFor : [];\n  childrenArray.forEach(function (child, childIndex) {\n    if (typeof child === 'string') {\n      stringNode += \"\".concat(child);\n    } else if (isValidElement(child)) {\n      var childPropsCount = Object.keys(child.props).length;\n      var shouldKeepChild = keepArray.indexOf(child.type) > -1;\n      var childChildren = child.props.children;\n\n      if (!childChildren && shouldKeepChild && childPropsCount === 0) {\n        stringNode += \"<\".concat(child.type, \"/>\");\n      } else if (!childChildren && (!shouldKeepChild || childPropsCount !== 0)) {\n        stringNode += \"<\".concat(childIndex, \"></\").concat(childIndex, \">\");\n      } else if (child.props.i18nIsDynamicList) {\n        stringNode += \"<\".concat(childIndex, \"></\").concat(childIndex, \">\");\n      } else if (shouldKeepChild && childPropsCount === 1 && typeof childChildren === 'string') {\n        stringNode += \"<\".concat(child.type, \">\").concat(childChildren, \"</\").concat(child.type, \">\");\n      } else {\n        var content = nodesToString(childChildren, i18nOptions);\n        stringNode += \"<\".concat(childIndex, \">\").concat(content, \"</\").concat(childIndex, \">\");\n      }\n    } else if (child === null) {\n      warn(\"Trans: the passed in value is invalid - seems you passed in a null child.\");\n    } else if (_typeof(child) === 'object') {\n      var format = child.format,\n          clone = _objectWithoutProperties(child, _excluded);\n\n      var keys = Object.keys(clone);\n\n      if (keys.length === 1) {\n        var value = format ? \"\".concat(keys[0], \", \").concat(format) : keys[0];\n        stringNode += \"{{\".concat(value, \"}}\");\n      } else {\n        warn(\"react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.\", child);\n      }\n    } else {\n      warn(\"Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.\", child);\n    }\n  });\n  return stringNode;\n}\n\nfunction renderNodes(children, targetString, i18n, i18nOptions, combinedTOpts, shouldUnescape) {\n  if (targetString === '') return [];\n  var keepArray = i18nOptions.transKeepBasicHtmlNodesFor || [];\n  var emptyChildrenButNeedsHandling = targetString && new RegExp(keepArray.join('|')).test(targetString);\n  if (!children && !emptyChildrenButNeedsHandling) return [targetString];\n  var data = {};\n\n  function getData(childs) {\n    var childrenArray = getAsArray(childs);\n    childrenArray.forEach(function (child) {\n      if (typeof child === 'string') return;\n      if (hasChildren(child)) getData(getChildren(child));else if (_typeof(child) === 'object' && !isValidElement(child)) Object.assign(data, child);\n    });\n  }\n\n  getData(children);\n  var ast = HTML.parse(\"<0>\".concat(targetString, \"</0>\"));\n\n  var opts = _objectSpread(_objectSpread({}, data), combinedTOpts);\n\n  function renderInner(child, node, rootReactNode) {\n    var childs = getChildren(child);\n    var mappedChildren = mapAST(childs, node.children, rootReactNode);\n    return hasValidReactChildren(childs) && mappedChildren.length === 0 ? childs : mappedChildren;\n  }\n\n  function pushTranslatedJSX(child, inner, mem, i, isVoid) {\n    if (child.dummy) child.children = inner;\n    mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n      key: i\n    }), isVoid ? undefined : inner));\n  }\n\n  function mapAST(reactNode, astNode, rootReactNode) {\n    var reactNodes = getAsArray(reactNode);\n    var astNodes = getAsArray(astNode);\n    return astNodes.reduce(function (mem, node, i) {\n      var translationContent = node.children && node.children[0] && node.children[0].content && i18n.services.interpolator.interpolate(node.children[0].content, opts, i18n.language);\n\n      if (node.type === 'tag') {\n        var tmp = reactNodes[parseInt(node.name, 10)];\n        if (!tmp && rootReactNode.length === 1 && rootReactNode[0][node.name]) tmp = rootReactNode[0][node.name];\n        if (!tmp) tmp = {};\n        var child = Object.keys(node.attrs).length !== 0 ? mergeProps({\n          props: node.attrs\n        }, tmp) : tmp;\n        var isElement = isValidElement(child);\n        var isValidTranslationWithChildren = isElement && hasChildren(node, true) && !node.voidElement;\n        var isEmptyTransWithHTML = emptyChildrenButNeedsHandling && _typeof(child) === 'object' && child.dummy && !isElement;\n        var isKnownComponent = _typeof(children) === 'object' && children !== null && Object.hasOwnProperty.call(children, node.name);\n\n        if (typeof child === 'string') {\n          var value = i18n.services.interpolator.interpolate(child, opts, i18n.language);\n          mem.push(value);\n        } else if (hasChildren(child) || isValidTranslationWithChildren) {\n            var inner = renderInner(child, node, rootReactNode);\n            pushTranslatedJSX(child, inner, mem, i);\n          } else if (isEmptyTransWithHTML) {\n          var _inner = mapAST(reactNodes, node.children, rootReactNode);\n\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          }), _inner));\n        } else if (Number.isNaN(parseFloat(node.name))) {\n          if (isKnownComponent) {\n            var _inner2 = renderInner(child, node, rootReactNode);\n\n            pushTranslatedJSX(child, _inner2, mem, i, node.voidElement);\n          } else if (i18nOptions.transSupportBasicHtmlNodes && keepArray.indexOf(node.name) > -1) {\n            if (node.voidElement) {\n              mem.push(createElement(node.name, {\n                key: \"\".concat(node.name, \"-\").concat(i)\n              }));\n            } else {\n              var _inner3 = mapAST(reactNodes, node.children, rootReactNode);\n\n              mem.push(createElement(node.name, {\n                key: \"\".concat(node.name, \"-\").concat(i)\n              }, _inner3));\n            }\n          } else if (node.voidElement) {\n            mem.push(\"<\".concat(node.name, \" />\"));\n          } else {\n            var _inner4 = mapAST(reactNodes, node.children, rootReactNode);\n\n            mem.push(\"<\".concat(node.name, \">\").concat(_inner4, \"</\").concat(node.name, \">\"));\n          }\n        } else if (_typeof(child) === 'object' && !isElement) {\n          var content = node.children[0] ? translationContent : null;\n          if (content) mem.push(content);\n        } else if (node.children.length === 1 && translationContent) {\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          }), translationContent));\n        } else {\n          mem.push(cloneElement(child, _objectSpread(_objectSpread({}, child.props), {}, {\n            key: i\n          })));\n        }\n      } else if (node.type === 'text') {\n        var wrapTextNodes = i18nOptions.transWrapTextNodes;\n\n        var _content = shouldUnescape ? i18nOptions.unescape(i18n.services.interpolator.interpolate(node.content, opts, i18n.language)) : i18n.services.interpolator.interpolate(node.content, opts, i18n.language);\n\n        if (wrapTextNodes) {\n          mem.push(createElement(wrapTextNodes, {\n            key: \"\".concat(node.name, \"-\").concat(i)\n          }, _content));\n        } else {\n          mem.push(_content);\n        }\n      }\n\n      return mem;\n    }, []);\n  }\n\n  var result = mapAST([{\n    dummy: true,\n    children: children || []\n  }], ast, getAsArray(children || []));\n  return getChildren(result[0]);\n}\n\nexport function Trans(_ref) {\n  var children = _ref.children,\n      count = _ref.count,\n      parent = _ref.parent,\n      i18nKey = _ref.i18nKey,\n      context = _ref.context,\n      _ref$tOptions = _ref.tOptions,\n      tOptions = _ref$tOptions === void 0 ? {} : _ref$tOptions,\n      values = _ref.values,\n      defaults = _ref.defaults,\n      components = _ref.components,\n      ns = _ref.ns,\n      i18nFromProps = _ref.i18n,\n      tFromProps = _ref.t,\n      shouldUnescape = _ref.shouldUnescape,\n      additionalProps = _objectWithoutProperties(_ref, _excluded2);\n\n  var i18n = i18nFromProps || getI18n();\n\n  if (!i18n) {\n    warnOnce('You will need to pass in an i18next instance by using i18nextReactModule');\n    return children;\n  }\n\n  var t = tFromProps || i18n.t.bind(i18n) || function (k) {\n    return k;\n  };\n\n  if (context) tOptions.context = context;\n\n  var reactI18nextOptions = _objectSpread(_objectSpread({}, getDefaults()), i18n.options && i18n.options.react);\n\n  var namespaces = ns || t.ns || i18n.options && i18n.options.defaultNS;\n  namespaces = typeof namespaces === 'string' ? [namespaces] : namespaces || ['translation'];\n  var defaultValue = defaults || nodesToString(children, reactI18nextOptions) || reactI18nextOptions.transEmptyNodeValue || i18nKey;\n  var hashTransKey = reactI18nextOptions.hashTransKey;\n  var key = i18nKey || (hashTransKey ? hashTransKey(defaultValue) : defaultValue);\n  var interpolationOverride = values ? tOptions.interpolation : {\n    interpolation: _objectSpread(_objectSpread({}, tOptions.interpolation), {}, {\n      prefix: '#$?',\n      suffix: '?$#'\n    })\n  };\n\n  var combinedTOpts = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, tOptions), {}, {\n    count: count\n  }, values), interpolationOverride), {}, {\n    defaultValue: defaultValue,\n    ns: namespaces\n  });\n\n  var translation = key ? t(key, combinedTOpts) : defaultValue;\n  var content = renderNodes(components || children, translation, i18n, reactI18nextOptions, combinedTOpts, shouldUnescape);\n  var useAsParent = parent !== undefined ? parent : reactI18nextOptions.defaultTransParent;\n  return useAsParent ? createElement(useAsParent, additionalProps, content) : content;\n}","var i18nInstance;\nexport function setI18n(instance) {\n  i18nInstance = instance;\n}\nexport function getI18n() {\n  return i18nInstance;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createContext } from 'react';\nimport { getDefaults, setDefaults } from './defaults.js';\nimport { getI18n, setI18n } from './i18nInstance.js';\nimport { initReactI18next } from './initReactI18next.js';\nexport { getDefaults, setDefaults, getI18n, setI18n, initReactI18next };\nexport var I18nContext = createContext();\nexport var ReportNamespaces = function () {\n  function ReportNamespaces() {\n    _classCallCheck(this, ReportNamespaces);\n\n    this.usedNamespaces = {};\n  }\n\n  _createClass(ReportNamespaces, [{\n    key: \"addUsedNamespaces\",\n    value: function addUsedNamespaces(namespaces) {\n      var _this = this;\n\n      namespaces.forEach(function (ns) {\n        if (!_this.usedNamespaces[ns]) _this.usedNamespaces[ns] = true;\n      });\n    }\n  }, {\n    key: \"getUsedNamespaces\",\n    value: function getUsedNamespaces() {\n      return Object.keys(this.usedNamespaces);\n    }\n  }]);\n\n  return ReportNamespaces;\n}();\nexport function composeInitialProps(ForComponent) {\n  return function (ctx) {\n    return new Promise(function (resolve) {\n      var i18nInitialProps = getInitialProps();\n\n      if (ForComponent.getInitialProps) {\n        ForComponent.getInitialProps(ctx).then(function (componentsInitialProps) {\n          resolve(_objectSpread(_objectSpread({}, componentsInitialProps), i18nInitialProps));\n        });\n      } else {\n        resolve(i18nInitialProps);\n      }\n    });\n  };\n}\nexport function getInitialProps() {\n  var i18n = getI18n();\n  var namespaces = i18n.reportNamespaces ? i18n.reportNamespaces.getUsedNamespaces() : [];\n  var ret = {};\n  var initialI18nStore = {};\n  i18n.languages.forEach(function (l) {\n    initialI18nStore[l] = {};\n    namespaces.forEach(function (ns) {\n      initialI18nStore[l][ns] = i18n.getResourceBundle(l, ns) || {};\n    });\n  });\n  ret.initialI18nStore = initialI18nStore;\n  ret.initialLanguage = i18n.language;\n  return ret;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useContext, useRef } from 'react';\nimport { getI18n, getDefaults, ReportNamespaces, I18nContext } from './context.js';\nimport { warnOnce, loadNamespaces, loadLanguages, hasLoadedNamespace } from './utils.js';\n\nvar usePrevious = function usePrevious(value, ignore) {\n  var ref = useRef();\n  useEffect(function () {\n    ref.current = ignore ? ref.current : value;\n  }, [value, ignore]);\n  return ref.current;\n};\n\nexport function useTranslation(ns) {\n  var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var i18nFromProps = props.i18n;\n\n  var _ref = useContext(I18nContext) || {},\n      i18nFromContext = _ref.i18n,\n      defaultNSFromContext = _ref.defaultNS;\n\n  var i18n = i18nFromProps || i18nFromContext || getI18n();\n  if (i18n && !i18n.reportNamespaces) i18n.reportNamespaces = new ReportNamespaces();\n\n  if (!i18n) {\n    warnOnce('You will need to pass in an i18next instance by using initReactI18next');\n\n    var notReadyT = function notReadyT(k, optsOrDefaultValue) {\n      if (typeof optsOrDefaultValue === 'string') return optsOrDefaultValue;\n      if (optsOrDefaultValue && _typeof(optsOrDefaultValue) === 'object' && typeof optsOrDefaultValue.defaultValue === 'string') return optsOrDefaultValue.defaultValue;\n      return Array.isArray(k) ? k[k.length - 1] : k;\n    };\n\n    var retNotReady = [notReadyT, {}, false];\n    retNotReady.t = notReadyT;\n    retNotReady.i18n = {};\n    retNotReady.ready = false;\n    return retNotReady;\n  }\n\n  if (i18n.options.react && i18n.options.react.wait !== undefined) warnOnce('It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.');\n\n  var i18nOptions = _objectSpread(_objectSpread(_objectSpread({}, getDefaults()), i18n.options.react), props);\n\n  var useSuspense = i18nOptions.useSuspense,\n      keyPrefix = i18nOptions.keyPrefix;\n  var namespaces = ns || defaultNSFromContext || i18n.options && i18n.options.defaultNS;\n  namespaces = typeof namespaces === 'string' ? [namespaces] : namespaces || ['translation'];\n  if (i18n.reportNamespaces.addUsedNamespaces) i18n.reportNamespaces.addUsedNamespaces(namespaces);\n  var ready = (i18n.isInitialized || i18n.initializedStoreOnce) && namespaces.every(function (n) {\n    return hasLoadedNamespace(n, i18n, i18nOptions);\n  });\n\n  function getT() {\n    return i18n.getFixedT(props.lng || null, i18nOptions.nsMode === 'fallback' ? namespaces : namespaces[0], keyPrefix);\n  }\n\n  var _useState = useState(getT),\n      _useState2 = _slicedToArray(_useState, 2),\n      t = _useState2[0],\n      setT = _useState2[1];\n\n  var joinedNS = namespaces.join();\n  if (props.lng) joinedNS = \"\".concat(props.lng).concat(joinedNS);\n  var previousJoinedNS = usePrevious(joinedNS);\n  var isMounted = useRef(true);\n  useEffect(function () {\n    var bindI18n = i18nOptions.bindI18n,\n        bindI18nStore = i18nOptions.bindI18nStore;\n    isMounted.current = true;\n\n    if (!ready && !useSuspense) {\n      if (props.lng) {\n        loadLanguages(i18n, props.lng, namespaces, function () {\n          if (isMounted.current) setT(getT);\n        });\n      } else {\n        loadNamespaces(i18n, namespaces, function () {\n          if (isMounted.current) setT(getT);\n        });\n      }\n    }\n\n    if (ready && previousJoinedNS && previousJoinedNS !== joinedNS && isMounted.current) {\n      setT(getT);\n    }\n\n    function boundReset() {\n      if (isMounted.current) setT(getT);\n    }\n\n    if (bindI18n && i18n) i18n.on(bindI18n, boundReset);\n    if (bindI18nStore && i18n) i18n.store.on(bindI18nStore, boundReset);\n    return function () {\n      isMounted.current = false;\n      if (bindI18n && i18n) bindI18n.split(' ').forEach(function (e) {\n        return i18n.off(e, boundReset);\n      });\n      if (bindI18nStore && i18n) bindI18nStore.split(' ').forEach(function (e) {\n        return i18n.store.off(e, boundReset);\n      });\n    };\n  }, [i18n, joinedNS]);\n  var isInitial = useRef(true);\n  useEffect(function () {\n    if (isMounted.current && !isInitial.current) {\n      setT(getT);\n    }\n\n    isInitial.current = false;\n  }, [i18n, keyPrefix]);\n  var ret = [t, i18n, ready];\n  ret.t = t;\n  ret.i18n = i18n;\n  ret.ready = ready;\n  if (ready) return ret;\n  if (!ready && !useSuspense) return ret;\n  throw new Promise(function (resolve) {\n    if (props.lng) {\n      loadLanguages(i18n, props.lng, namespaces, function () {\n        return resolve();\n      });\n    } else {\n      loadNamespaces(i18n, namespaces, function () {\n        return resolve();\n      });\n    }\n  });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.F = {};\n__webpack_require__.E = (chunkId) => {\n\tObject.keys(__webpack_require__.F).map((key) => {\n\t\t__webpack_require__.F[key](chunkId);\n\t});\n}","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.O(0, [143], () => {\n\t__webpack_require__.E(143);\n}, 5);","import packageJson from '../package.json';\n\nconst id = packageJson.name;\nconst SOPClassHandlerName = 'dicom-seg';\nconst SOPClassHandlerId = `${id}.sopClassHandlerModule.${SOPClassHandlerName}`;\n\nexport { id, SOPClassHandlerId, SOPClassHandlerName };\n","import vtkMath from '@kitware/vtk.js/Common/Core/Math';\n\nimport { utils } from '@ohif/core';\n\nimport { SOPClassHandlerId } from './id';\nimport dcmjs from 'dcmjs';\n\nconst { DicomMessage, DicomMetaDictionary } = dcmjs.data;\n\nconst sopClassUids = ['1.2.840.10008.5.1.4.1.1.66.4'];\n\nlet loadPromises = {};\n\nfunction _getDisplaySetsFromSeries(\n  instances,\n  servicesManager,\n  extensionManager\n) {\n  const instance = instances[0];\n\n  const {\n    StudyInstanceUID,\n    SeriesInstanceUID,\n    SOPInstanceUID,\n    SeriesDescription,\n    SeriesNumber,\n    SeriesDate,\n    SOPClassUID,\n    wadoRoot,\n    wadoUri,\n    wadoUriRoot,\n  } = instance;\n\n  const displaySet = {\n    Modality: 'SEG',\n    loading: false,\n    isReconstructable: true, // by default for now since it is a volumetric SEG currently\n    displaySetInstanceUID: utils.guid(),\n    SeriesDescription,\n    SeriesNumber,\n    SeriesDate,\n    SOPInstanceUID,\n    SeriesInstanceUID,\n    StudyInstanceUID,\n    SOPClassHandlerId,\n    SOPClassUID,\n    referencedImages: null,\n    referencedSeriesInstanceUID: null,\n    referencedDisplaySetInstanceUID: null,\n    isDerivedDisplaySet: true,\n    isLoaded: false,\n    isHydrated: false,\n    segments: {},\n    sopClassUids,\n    instance,\n    instances: [instance],\n    wadoRoot,\n    wadoUriRoot,\n    wadoUri,\n    isOverlayDisplaySet: true,\n  };\n\n  const referencedSeriesSequence = instance.ReferencedSeriesSequence;\n\n  if (!referencedSeriesSequence) {\n    throw new Error('ReferencedSeriesSequence is missing for the SEG');\n  }\n\n  const referencedSeries = referencedSeriesSequence[0];\n\n  displaySet.referencedImages =\n    instance.ReferencedSeriesSequence.ReferencedInstanceSequence;\n  displaySet.referencedSeriesInstanceUID = referencedSeries.SeriesInstanceUID;\n\n  displaySet.getReferenceDisplaySet = () => {\n    const { displaySetService } = servicesManager.services;\n    const referencedDisplaySets = displaySetService.getDisplaySetsForSeries(\n      displaySet.referencedSeriesInstanceUID\n    );\n\n    if (!referencedDisplaySets || referencedDisplaySets.length === 0) {\n      throw new Error('Referenced DisplaySet is missing for the SEG');\n    }\n\n    const referencedDisplaySet = referencedDisplaySets[0];\n\n    displaySet.referencedDisplaySetInstanceUID =\n      referencedDisplaySet.displaySetInstanceUID;\n\n    // Todo: this needs to be able to work with other reference volumes (other than streaming) such as nifti, etc.\n    displaySet.referencedVolumeURI = referencedDisplaySet.displaySetInstanceUID;\n    const referencedVolumeId = `cornerstoneStreamingImageVolume:${displaySet.referencedVolumeURI}`;\n    displaySet.referencedVolumeId = referencedVolumeId;\n\n    return referencedDisplaySet;\n  };\n\n  displaySet.load = async ({ headers }) =>\n    await _load(displaySet, servicesManager, extensionManager, headers);\n\n  return [displaySet];\n}\n\nfunction _load(segDisplaySet, servicesManager, extensionManager, headers) {\n  const { SOPInstanceUID } = segDisplaySet;\n  const { segmentationService } = servicesManager.services;\n\n  if (\n    (segDisplaySet.loading || segDisplaySet.isLoaded) &&\n    loadPromises[SOPInstanceUID] &&\n    _segmentationExists(segDisplaySet, segmentationService)\n  ) {\n    return loadPromises[SOPInstanceUID];\n  }\n\n  segDisplaySet.loading = true;\n\n  // We don't want to fire multiple loads, so we'll wait for the first to finish\n  // and also return the same promise to any other callers.\n  loadPromises[SOPInstanceUID] = new Promise(async (resolve, reject) => {\n    if (\n      !segDisplaySet.segments ||\n      Object.keys(segDisplaySet.segments).length === 0\n    ) {\n      const segments = await _loadSegments(\n        extensionManager,\n        segDisplaySet,\n        headers\n      );\n\n      segDisplaySet.segments = segments;\n    }\n\n    const suppressEvents = true;\n    segmentationService\n      .createSegmentationForSEGDisplaySet(segDisplaySet, null, suppressEvents)\n      .then(() => {\n        segDisplaySet.loading = false;\n        resolve();\n      })\n      .catch(error => {\n        segDisplaySet.loading = false;\n        reject(error);\n      });\n  });\n\n  return loadPromises[SOPInstanceUID];\n}\n\nasync function _loadSegments(extensionManager, segDisplaySet, headers) {\n  const utilityModule = extensionManager.getModuleEntry(\n    '@ohif/extension-cornerstone.utilityModule.common'\n  );\n\n  const { dicomLoaderService } = utilityModule.exports;\n  const segArrayBuffer = await dicomLoaderService.findDicomDataPromise(\n    segDisplaySet,\n    null,\n    headers\n  );\n\n  const dicomData = DicomMessage.readFile(segArrayBuffer);\n  const dataset = DicomMetaDictionary.naturalizeDataset(dicomData.dict);\n  dataset._meta = DicomMetaDictionary.namifyDataset(dicomData.meta);\n\n  if (!Array.isArray(dataset.SegmentSequence)) {\n    dataset.SegmentSequence = [dataset.SegmentSequence];\n  }\n\n  const segments = _getSegments(dataset);\n  return segments;\n}\n\nfunction _segmentationExists(segDisplaySet, segmentationService) {\n  // This should be abstracted with the CornerstoneCacheService\n  return segmentationService.getSegmentation(\n    segDisplaySet.displaySetInstanceUID\n  );\n}\n\nfunction _getPixelData(dataset, segments) {\n  let frameSize = Math.ceil((dataset.Rows * dataset.Columns) / 8);\n  let nextOffset = 0;\n\n  Object.keys(segments).forEach(segmentKey => {\n    const segment = segments[segmentKey];\n    segment.numberOfFrames = segment.functionalGroups.length;\n    segment.size = segment.numberOfFrames * frameSize;\n    segment.offset = nextOffset;\n    nextOffset = segment.offset + segment.size;\n    const packedSegment = dataset.PixelData[0].slice(\n      segment.offset,\n      nextOffset\n    );\n\n    segment.pixelData = dcmjs.data.BitArray.unpack(packedSegment);\n    segment.geometry = geometryFromFunctionalGroups(\n      dataset,\n      segment.functionalGroups\n    );\n  });\n\n  return segments;\n}\n\nfunction geometryFromFunctionalGroups(dataset, perFrame) {\n  let pixelMeasures =\n    dataset.SharedFunctionalGroupsSequence.PixelMeasuresSequence;\n  let planeOrientation =\n    dataset.SharedFunctionalGroupsSequence.PlaneOrientationSequence;\n  let planePosition = perFrame[0].PlanePositionSequence; // TODO: assume sorted frames!\n\n  const geometry = {};\n\n  // NB: DICOM PixelSpacing is defined as Row then Column,\n  // unlike ImageOrientationPatient\n  let spacingBetweenSlices = pixelMeasures.SpacingBetweenSlices;\n  if (!spacingBetweenSlices) {\n    if (pixelMeasures.SliceThickness) {\n      console.log('Using SliceThickness as SpacingBetweenSlices');\n      spacingBetweenSlices = pixelMeasures.SliceThickness;\n    }\n  }\n  geometry.spacing = [\n    pixelMeasures.PixelSpacing[1],\n    pixelMeasures.PixelSpacing[0],\n    spacingBetweenSlices,\n  ].map(Number);\n\n  geometry.dimensions = [dataset.Columns, dataset.Rows, perFrame.length].map(\n    Number\n  );\n\n  let orientation = planeOrientation.ImageOrientationPatient.map(Number);\n  const columnStepToPatient = orientation.slice(0, 3);\n  const rowStepToPatient = orientation.slice(3, 6);\n  geometry.planeNormal = [];\n  vtkMath.cross(columnStepToPatient, rowStepToPatient, geometry.planeNormal);\n\n  let firstPosition = perFrame[0].PlanePositionSequence.ImagePositionPatient.map(\n    Number\n  );\n  let lastPosition = perFrame[\n    perFrame.length - 1\n  ].PlanePositionSequence.ImagePositionPatient.map(Number);\n  geometry.sliceStep = [];\n  vtkMath.subtract(lastPosition, firstPosition, geometry.sliceStep);\n  vtkMath.normalize(geometry.sliceStep);\n  geometry.direction = columnStepToPatient\n    .concat(rowStepToPatient)\n    .concat(geometry.sliceStep);\n  geometry.origin = planePosition.ImagePositionPatient.map(Number);\n\n  return geometry;\n}\n\nfunction _getSegments(dataset) {\n  const segments = {};\n\n  dataset.SegmentSequence.forEach(segment => {\n    const cielab = segment.RecommendedDisplayCIELabValue;\n    const rgba = dcmjs.data.Colors.dicomlab2RGB(cielab).map(x =>\n      Math.round(x * 255)\n    );\n\n    rgba.push(255);\n    const segmentNumber = segment.SegmentNumber;\n\n    segments[segmentNumber] = {\n      color: rgba,\n      functionalGroups: [],\n      offset: null,\n      size: null,\n      pixelData: null,\n      label: segment.SegmentLabel,\n    };\n  });\n\n  // make a list of functional groups per segment\n  dataset.PerFrameFunctionalGroupsSequence.forEach(functionalGroup => {\n    const segmentNumber =\n      functionalGroup.SegmentIdentificationSequence.ReferencedSegmentNumber;\n    segments[segmentNumber].functionalGroups.push(functionalGroup);\n  });\n\n  return _getPixelData(dataset, segments);\n}\n\nfunction getSopClassHandlerModule({ servicesManager, extensionManager }) {\n  const getDisplaySetsFromSeries = instances => {\n    return _getDisplaySetsFromSeries(\n      instances,\n      servicesManager,\n      extensionManager\n    );\n  };\n\n  return [\n    {\n      name: 'dicom-seg',\n      sopClassUids,\n      getDisplaySetsFromSeries,\n    },\n  ];\n}\n\nexport default getSopClassHandlerModule;\n","import React from 'react';\nimport { Input, Dialog } from '@ohif/ui';\n\nfunction callInputDialog(uiDialogService, label, callback) {\n  const dialogId = 'enter-segment-label';\n\n  const onSubmitHandler = ({ action, value }) => {\n    switch (action.id) {\n      case 'save':\n        callback(value.label, action.id);\n        break;\n      case 'cancel':\n        callback('', action.id);\n        break;\n    }\n    uiDialogService.dismiss({ id: dialogId });\n  };\n\n  if (uiDialogService) {\n    uiDialogService.create({\n      id: dialogId,\n      centralize: true,\n      isDraggable: false,\n      showOverlay: true,\n      content: Dialog,\n      contentProps: {\n        title: 'Segment',\n        value: { label },\n        noCloseButton: true,\n        onClose: () => uiDialogService.dismiss({ id: dialogId }),\n        actions: [\n          { id: 'cancel', text: 'Cancel', type: 'primary' },\n          { id: 'save', text: 'Confirm', type: 'secondary' },\n        ],\n        onSubmit: onSubmitHandler,\n        body: ({ value, setValue }) => {\n          return (\n            <Input\n              label=\"Enter the segment label\"\n              labelClassName=\"text-white text-[14px] leading-[1.2]\"\n              autoFocus\n              className=\"bg-black border-primary-main\"\n              type=\"text\"\n              value={value.label}\n              onChange={event => {\n                event.persist();\n                setValue(value => ({ ...value, label: event.target.value }));\n              }}\n              onKeyPress={event => {\n                if (event.key === 'Enter') {\n                  onSubmitHandler({ value, action: { id: 'save' } });\n                }\n              }}\n            />\n          );\n        },\n      },\n    });\n  }\n}\n\nexport default callInputDialog;\n","import React, { useEffect, useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { SegmentationGroupTable } from '@ohif/ui';\nimport callInputDialog from './callInputDialog';\n\nimport { useTranslation } from 'react-i18next';\n\nexport default function PanelSegmentation({\n  servicesManager,\n  commandsManager,\n}) {\n  const { segmentationService, uiDialogService } = servicesManager.services;\n\n  const { t } = useTranslation('PanelSegmentation');\n  const [selectedSegmentationId, setSelectedSegmentationId] = useState(null);\n  const [segmentationConfiguration, setSegmentationConfiguration] = useState(\n    segmentationService.getConfiguration()\n  );\n\n  const [segmentations, setSegmentations] = useState(() =>\n    segmentationService.getSegmentations()\n  );\n\n  const [isMinimized, setIsMinimized] = useState({});\n\n  const onToggleMinimizeSegmentation = useCallback(\n    id => {\n      setIsMinimized(prevState => ({\n        ...prevState,\n        [id]: !prevState[id],\n      }));\n    },\n    [setIsMinimized]\n  );\n\n  // Only expand the last segmentation added to the list and collapse the rest\n  useEffect(() => {\n    const lastSegmentationId = segmentations[segmentations.length - 1]?.id;\n    if (lastSegmentationId) {\n      setIsMinimized(prevState => ({\n        ...prevState,\n        [lastSegmentationId]: false,\n      }));\n    }\n  }, [segmentations, setIsMinimized]);\n\n  useEffect(() => {\n    // ~~ Subscription\n    const added = segmentationService.EVENTS.SEGMENTATION_ADDED;\n    const updated = segmentationService.EVENTS.SEGMENTATION_UPDATED;\n    const removed = segmentationService.EVENTS.SEGMENTATION_REMOVED;\n    const subscriptions = [];\n\n    [added, updated, removed].forEach(evt => {\n      const { unsubscribe } = segmentationService.subscribe(evt, () => {\n        const segmentations = segmentationService.getSegmentations();\n        setSegmentations(segmentations);\n        setSegmentationConfiguration(segmentationService.getConfiguration());\n      });\n      subscriptions.push(unsubscribe);\n    });\n\n    return () => {\n      subscriptions.forEach(unsub => {\n        unsub();\n      });\n    };\n  }, []);\n\n  const onSegmentationClick = (segmentationId: string) => {\n    segmentationService.setActiveSegmentationForToolGroup(segmentationId);\n  };\n\n  const onSegmentationDelete = (segmentationId: string) => {\n    segmentationService.remove(segmentationId);\n  };\n\n  const getToolGroupIds = segmentationId => {\n    const toolGroupIds = segmentationService.getToolGroupIdsWithSegmentation(\n      segmentationId\n    );\n\n    return toolGroupIds;\n  };\n\n  const onSegmentClick = (segmentationId, segmentIndex) => {\n    segmentationService.setActiveSegmentForSegmentation(\n      segmentationId,\n      segmentIndex\n    );\n\n    const toolGroupIds = getToolGroupIds(segmentationId);\n\n    toolGroupIds.forEach(toolGroupId => {\n      // const toolGroupId =\n      segmentationService.setActiveSegmentationForToolGroup(\n        segmentationId,\n        toolGroupId\n      );\n      segmentationService.jumpToSegmentCenter(\n        segmentationId,\n        segmentIndex,\n        toolGroupId\n      );\n    });\n  };\n\n  const onSegmentEdit = (segmentationId, segmentIndex) => {\n    const segmentation = segmentationService.getSegmentation(segmentationId);\n\n    const segment = segmentation.segments[segmentIndex];\n    const { label } = segment;\n\n    callInputDialog(uiDialogService, label, (label, actionId) => {\n      if (label === '') {\n        return;\n      }\n\n      segmentationService.setSegmentLabelForSegmentation(\n        segmentationId,\n        segmentIndex,\n        label\n      );\n    });\n  };\n\n  const onSegmentationEdit = segmentationId => {\n    const segmentation = segmentationService.getSegmentation(segmentationId);\n    const { label } = segmentation;\n\n    callInputDialog(uiDialogService, label, (label, actionId) => {\n      if (label === '') {\n        return;\n      }\n\n      segmentationService.addOrUpdateSegmentation(\n        {\n          id: segmentationId,\n          label,\n        },\n        false, // suppress event\n        true // notYetUpdatedAtSource\n      );\n    });\n  };\n\n  const onSegmentColorClick = (segmentationId, segmentIndex) => {\n    // Todo: Implement color picker later\n    return;\n  };\n\n  const onSegmentDelete = (segmentationId, segmentIndex) => {\n    // segmentationService.removeSegmentFromSegmentation(\n    //   segmentationId,\n    //   segmentIndex\n    // );\n    console.warn('not implemented yet');\n  };\n\n  const onToggleSegmentVisibility = (segmentationId, segmentIndex) => {\n    const segmentation = segmentationService.getSegmentation(segmentationId);\n    const segmentInfo = segmentation.segments[segmentIndex];\n    const isVisible = !segmentInfo.isVisible;\n    const toolGroupIds = getToolGroupIds(segmentationId);\n\n    // Todo: right now we apply the visibility to all tool groups\n    toolGroupIds.forEach(toolGroupId => {\n      segmentationService.setSegmentVisibility(\n        segmentationId,\n        segmentIndex,\n        isVisible,\n        toolGroupId\n      );\n    });\n  };\n\n  const onToggleSegmentationVisibility = segmentationId => {\n    segmentationService.toggleSegmentationVisibility(segmentationId);\n  };\n\n  const _setSegmentationConfiguration = useCallback(\n    (segmentationId, key, value) => {\n      segmentationService.setConfiguration({\n        segmentationId,\n        [key]: value,\n      });\n    },\n    [segmentationService]\n  );\n\n  return (\n    <div className=\"flex flex-col flex-auto min-h-0 justify-between mt-1\">\n      {/* show segmentation table */}\n      {segmentations?.length ? (\n        <SegmentationGroupTable\n          title={t('Segmentations')}\n          showAddSegmentation={false}\n          segmentations={segmentations}\n          isMinimized={isMinimized}\n          activeSegmentationId={selectedSegmentationId || ''}\n          onSegmentationClick={onSegmentationClick}\n          onSegmentationDelete={onSegmentationDelete}\n          onSegmentationEdit={onSegmentationEdit}\n          onSegmentClick={onSegmentClick}\n          onSegmentEdit={onSegmentEdit}\n          onSegmentColorClick={onSegmentColorClick}\n          onSegmentDelete={onSegmentDelete}\n          onToggleSegmentVisibility={onToggleSegmentVisibility}\n          onToggleSegmentationVisibility={onToggleSegmentationVisibility}\n          onToggleMinimizeSegmentation={onToggleMinimizeSegmentation}\n          segmentationConfig={{ initialConfig: segmentationConfiguration }}\n          setRenderOutline={value =>\n            _setSegmentationConfiguration(\n              selectedSegmentationId,\n              'renderOutline',\n              value\n            )\n          }\n          setOutlineOpacityActive={value =>\n            _setSegmentationConfiguration(\n              selectedSegmentationId,\n              'outlineOpacity',\n              value\n            )\n          }\n          setRenderFill={value =>\n            _setSegmentationConfiguration(\n              selectedSegmentationId,\n              'renderFill',\n              value\n            )\n          }\n          setRenderInactiveSegmentations={value =>\n            _setSegmentationConfiguration(\n              selectedSegmentationId,\n              'renderInactiveSegmentations',\n              value\n            )\n          }\n          setOutlineWidthActive={value =>\n            _setSegmentationConfiguration(\n              selectedSegmentationId,\n              'outlineWidthActive',\n              value\n            )\n          }\n          setFillAlpha={value =>\n            _setSegmentationConfiguration(\n              selectedSegmentationId,\n              'fillAlpha',\n              value\n            )\n          }\n          setFillAlphaInactive={value =>\n            _setSegmentationConfiguration(\n              selectedSegmentationId,\n              'fillAlphaInactive',\n              value\n            )\n          }\n        />\n      ) : null}\n    </div>\n  );\n}\n\nPanelSegmentation.propTypes = {\n  commandsManager: PropTypes.shape({\n    runCommand: PropTypes.func.isRequired,\n  }),\n  servicesManager: PropTypes.shape({\n    services: PropTypes.shape({\n      segmentationService: PropTypes.shape({\n        getSegmentation: PropTypes.func.isRequired,\n        getSegmentations: PropTypes.func.isRequired,\n        toggleSegmentationVisibility: PropTypes.func.isRequired,\n        subscribe: PropTypes.func.isRequired,\n        EVENTS: PropTypes.object.isRequired,\n      }).isRequired,\n    }).isRequired,\n  }).isRequired,\n};\n","import { Types } from '@ohif/core';\n\nconst segProtocol: Types.HangingProtocol.Protocol = {\n  id: '@ohif/seg',\n  // Don't store this hanging protocol as it applies to the currently active\n  // display set by default\n  // cacheId: null,\n  hasUpdatedPriorsInformation: false,\n  name: 'Segmentations',\n  // Just apply this one when specifically listed\n  protocolMatchingRules: [],\n  toolGroupIds: ['default'],\n  // -1 would be used to indicate active only, whereas other values are\n  // the number of required priors referenced - so 0 means active with\n  // 0 or more priors.\n  numberOfPriorsReferenced: 0,\n  // Default viewport is used to define the viewport when\n  // additional viewports are added using the layout tool\n  defaultViewport: {\n    viewportOptions: {\n      viewportType: 'stack',\n      toolGroupId: 'default',\n      allowUnmatchedView: true,\n    },\n    displaySets: [\n      {\n        id: 'segDisplaySetId',\n        matchedDisplaySetsIndex: -1,\n      },\n    ],\n  },\n  displaySetSelectors: {\n    segDisplaySetId: {\n      seriesMatchingRules: [\n        {\n          attribute: 'Modality',\n          constraint: {\n            equals: 'SEG',\n          },\n        },\n      ],\n    },\n  },\n  stages: [\n    {\n      name: 'Segmentations',\n      viewportStructure: {\n        layoutType: 'grid',\n        properties: {\n          rows: 1,\n          columns: 1,\n        },\n      },\n      viewports: [\n        {\n          viewportOptions: { allowUnmatchedView: true },\n          displaySets: [\n            {\n              id: 'segDisplaySetId',\n            },\n          ],\n        },\n      ],\n    },\n  ],\n};\n\nfunction getHangingProtocolModule() {\n  return [\n    {\n      name: segProtocol.id,\n      protocol: segProtocol,\n    },\n  ];\n}\n\nexport default getHangingProtocolModule;\nexport { segProtocol };\n","import { id } from './id';\nimport React from 'react';\n\nimport { Types } from '@ohif/core';\n\nimport getSopClassHandlerModule from './getSopClassHandlerModule';\nimport PanelSegmentation from './panels/PanelSegmentation';\nimport getHangingProtocolModule from './getHangingProtocolModule';\n\nconst Component = React.lazy(() => {\n  return import(\n    /* webpackPrefetch: true */ './viewports/OHIFCornerstoneSEGViewport'\n  );\n});\n\nconst OHIFCornerstoneSEGViewport = props => {\n  return (\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <Component {...props} />\n    </React.Suspense>\n  );\n};\n\n/**\n * You can remove any of the following modules if you don't need them.\n */\nconst extension = {\n  /**\n   * Only required property. Should be a unique value across all extensions.\n   * You ID can be anything you want, but it should be unique.\n   */\n  id,\n\n  /**\n   * PanelModule should provide a list of panels that will be available in OHIF\n   * for Modes to consume and render. Each panel is defined by a {name,\n   * iconName, iconLabel, label, component} object. Example of a panel module\n   * is the StudyBrowserPanel that is provided by the default extension in OHIF.\n   */\n  getPanelModule: ({\n    servicesManager,\n    commandsManager,\n    extensionManager,\n  }): Types.Panel[] => {\n    const wrappedPanelSegmentation = () => {\n      return (\n        <PanelSegmentation\n          commandsManager={commandsManager}\n          servicesManager={servicesManager}\n          extensionManager={extensionManager}\n        />\n      );\n    };\n\n    return [\n      {\n        name: 'panelSegmentation',\n        iconName: 'tab-segmentation',\n        iconLabel: 'Segmentation',\n        label: 'Segmentation',\n        component: wrappedPanelSegmentation,\n      },\n    ];\n  },\n\n  getViewportModule({ servicesManager, extensionManager }) {\n    const ExtendedOHIFCornerstoneSEGViewport = props => {\n      return (\n        <OHIFCornerstoneSEGViewport\n          servicesManager={servicesManager}\n          extensionManager={extensionManager}\n          {...props}\n        />\n      );\n    };\n\n    return [\n      { name: 'dicom-seg', component: ExtendedOHIFCornerstoneSEGViewport },\n    ];\n  },\n  /**\n   * SopClassHandlerModule should provide a list of sop class handlers that will be\n   * available in OHIF for Modes to consume and use to create displaySets from Series.\n   * Each sop class handler is defined by a { name, sopClassUids, getDisplaySetsFromSeries}.\n   * Examples include the default sop class handler provided by the default extension\n   */\n  getSopClassHandlerModule,\n  getHangingProtocolModule,\n};\n\nexport default extension;"],"names":["root","factory","exports","module","require","define","amd","globalThis","__WEBPACK_EXTERNAL_MODULE__807__","__WEBPACK_EXTERNAL_MODULE__762__","__WEBPACK_EXTERNAL_MODULE__836__","__WEBPACK_EXTERNAL_MODULE__369__","deferred","installedChunks","ToolGroupService","customizationService","toolGroupId","tools","get","createToolGroupAndAddTools","async","_ref","segDisplaySet","viewportIndex","servicesManager","segmentationService","hangingProtocolService","viewportGridService","services","displaySetInstanceUID","referencedDisplaySetInstanceUID","segmentationId","createSegmentationForSEGDisplaySet","hydrateSegmentation","viewports","getState","updatedViewports","getViewportsRequireUpdate","forEach","viewport","index","shouldRenderSegmentation","displaySetInstanceUIDs","push","viewportOptions","initialImageOptions","preset","setDisplaySetsForViewports","RESPONSE","NO_NEVER","CANCEL","HYDRATE_SEG","uiViewportDialogService","Promise","resolve","reject","promptResult","message","actions","type","text","value","onSubmit","result","hide","show","onOutsideClick","_askHydrate","hydrateSEGDisplaySet","formatDate","utils","OHIFCornerstoneSEGViewport","props","children","displaySets","viewportLabel","extensionManager","t","useTranslation","displaySetService","toolGroupService","uiNotificationService","length","Error","viewportGrid","useViewportGrid","isToolGroupCreated","setToolGroupCreated","useState","selectedSegment","setSelectedSegment","isHydrated","setIsHydrated","segIsLoading","setSegIsLoading","isLoaded","element","setElement","processingProgress","setProcessingProgress","percentComplete","totalSegments","referencedDisplaySetRef","useRef","activeViewportIndex","referencedDisplaySet","getReferenceDisplaySet","referencedDisplaySetMetadata","image0","images","PatientID","PatientName","PatientSex","PatientAge","SliceThickness","StudyDate","SeriesDescription","SeriesInstanceUID","SeriesNumber","ManufacturerModelName","SpacingBetweenSlices","_getReferencedDisplaySetMetadata","current","displaySet","metadata","onElementEnabled","evt","detail","onElementDisabled","getCornerstoneViewport","useCallback","component","Component","getModuleEntry","React","_extends","viewportType","orientation","viewportId","onSegmentChange","direction","segmentation","getSegmentation","segments","numberOfSegments","Object","keys","newSelectedSegmentIndex","jumpToSegmentCenter","useEffect","promptHydrateSEG","then","unsubscribe","subscribe","EVENTS","SEGMENTATION_LOADING_COMPLETE","overlappingSegments","title","SEGMENT_LOADING_COMPLETE","numSegments","onDisplaySetsRemovedSubscription","DISPLAY_SETS_REMOVED","_ref2","activeViewport","includes","setDisplaySetsForViewport","toolGroup","getToolGroup","createSEGToolGroupAndAddTools","removeSegmentationRepresentationFromToolGroup","destroyToolGroup","childrenWithProps","map","child","key","onStatusClick","ViewportActionBar","onDoubleClick","stopPropagation","preventDefault","onArrowsClick","getStatusComponent","ToolTipMessage","StatusIcon","loadStr","Icon","name","StatusArea","className","onMouseUp","Tooltip","content","position","_getStatusComponent","studyData","label","useAltStyling","studyDate","seriesDescription","patientInformation","patientName","OHIF","formatPN","Alphabetic","patientSex","patientAge","MRN","thickness","toFixed","spacing","undefined","scanner","LoadingIndicatorTotalPercent","totalNumbers","loadingText","propTypes","PropTypes","isRequired","dataSource","customProps","defaultProps","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","n","join","test3","split","letter","err","shouldUseNative","target","source","from","symbols","to","val","TypeError","toObject","s","arguments","call","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","location","propFullName","secret","getShim","ReactPropTypes","array","bigint","bool","func","number","object","string","symbol","any","arrayOf","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","l","p","Fragment","StrictMode","Profiler","q","r","Suspense","u","v","Symbol","for","w","x","iterator","z","a","b","c","encodeURIComponent","A","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","B","C","this","context","refs","updater","D","E","isReactComponent","setState","forceUpdate","F","constructor","isPureReactComponent","G","H","I","ref","__self","__source","J","e","d","k","h","g","f","Array","m","$$typeof","_owner","L","M","N","replace","escape","toString","O","isArray","K","y","next","done","P","Q","_status","_result","default","R","S","T","ReactCurrentDispatcher","ReactCurrentBatchConfig","transition","ReactCurrentOwner","IsSomeRendererActing","Children","apply","count","toArray","only","PureComponent","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","cloneElement","createContext","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_context","createElement","createFactory","bind","createRef","forwardRef","render","isValidElement","lazy","_payload","_init","memo","compare","useContext","useDebugValue","useImperativeHandle","useLayoutEffect","useMemo","useReducer","version","create","console","warn","_console","_len","args","_key","concat","alreadyWarned","_len2","_key2","Date","loadedClb","i18n","cb","isInitialized","on","initialized","setTimeout","off","loadNamespaces","ns","loadLanguages","lng","options","indexOf","obj","_toPropertyKey","arg","input","hint","prim","toPrimitive","res","Number","defineProperty","enumerable","configurable","writable","matchHtmlEntity","htmlEntities","unescapeHtmlEntity","defaultOptions","bindI18n","bindI18nStore","transEmptyNodeValue","transSupportBasicHtmlNodes","transWrapTextNodes","transKeepBasicHtmlNodesFor","useSuspense","unescape","i18nInstance","_defineProperties","descriptor","ReportNamespaces","instance","Constructor","_classCallCheck","usedNamespaces","protoProps","staticProps","namespaces","_this","_arrayLikeToArray","arr","len","arr2","_i","_s","_e","_x","_r","_arr","_n","_d","o","minLen","slice","test","enumerableOnly","filter","sym","getOwnPropertyDescriptor","getOwnPropertyDescriptors","defineProperties","usePrevious","ignore","i18nFromProps","i18nFromContext","defaultNSFromContext","defaultNS","reportNamespaces","notReadyT","optsOrDefaultValue","defaultValue","retNotReady","ready","react","wait","i18nOptions","keyPrefix","addUsedNamespaces","initializedStoreOnce","every","languages","ignoreJSONStructure","hasLoadedNamespace","precheck","loadNotPending","backendConnector","backend","isLanguageChangingTo","fallbackLng","lastLng","toLowerCase","loadState","state","hasResourceBundle","resources","partialBundledLanguages","oldI18nextHasLoadedNamespace","getT","getFixedT","nsMode","_useState2","setT","joinedNS","previousJoinedNS","boundReset","store","isInitial","ret","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","splice","chunkId","getter","__esModule","definition","prop","toStringTag","link","document","nc","setAttribute","rel","as","href","head","appendChild","id","packageJson","SOPClassHandlerId","DicomMessage","DicomMetaDictionary","dcmjs","sopClassUids","loadPromises","_getDisplaySetsFromSeries","instances","StudyInstanceUID","SOPInstanceUID","SeriesDate","SOPClassUID","wadoRoot","wadoUri","wadoUriRoot","Modality","loading","isReconstructable","guid","referencedImages","referencedSeriesInstanceUID","isDerivedDisplaySet","isOverlayDisplaySet","referencedSeriesSequence","ReferencedSeriesSequence","referencedSeries","ReferencedInstanceSequence","referencedDisplaySets","getDisplaySetsForSeries","referencedVolumeURI","referencedVolumeId","load","headers","_segmentationExists","utilityModule","dicomLoaderService","segArrayBuffer","findDicomDataPromise","dicomData","readFile","dataset","naturalizeDataset","dict","_meta","namifyDataset","meta","SegmentSequence","segment","cielab","RecommendedDisplayCIELabValue","rgba","Colors","dicomlab2RGB","Math","round","segmentNumber","SegmentNumber","color","functionalGroups","offset","size","pixelData","SegmentLabel","PerFrameFunctionalGroupsSequence","functionalGroup","SegmentIdentificationSequence","ReferencedSegmentNumber","frameSize","ceil","Rows","Columns","nextOffset","segmentKey","numberOfFrames","packedSegment","PixelData","BitArray","unpack","geometry","perFrame","pixelMeasures","SharedFunctionalGroupsSequence","PixelMeasuresSequence","planeOrientation","PlaneOrientationSequence","planePosition","PlanePositionSequence","spacingBetweenSlices","log","PixelSpacing","dimensions","ImageOrientationPatient","columnStepToPatient","rowStepToPatient","planeNormal","vtkMath","firstPosition","ImagePositionPatient","lastPosition","sliceStep","origin","geometryFromFunctionalGroups","_getPixelData","_getSegments","_loadSegments","suppressEvents","catch","error","_load","getDisplaySetsFromSeries","uiDialogService","callback","dialogId","onSubmitHandler","action","dismiss","centralize","isDraggable","showOverlay","Dialog","contentProps","noCloseButton","onClose","body","setValue","Input","labelClassName","autoFocus","onChange","event","persist","onKeyPress","PanelSegmentation","commandsManager","selectedSegmentationId","setSelectedSegmentationId","segmentationConfiguration","setSegmentationConfiguration","getConfiguration","segmentations","setSegmentations","getSegmentations","isMinimized","setIsMinimized","onToggleMinimizeSegmentation","prevState","lastSegmentationId","added","SEGMENTATION_ADDED","updated","SEGMENTATION_UPDATED","removed","SEGMENTATION_REMOVED","subscriptions","unsub","getToolGroupIds","getToolGroupIdsWithSegmentation","_setSegmentationConfiguration","setConfiguration","SegmentationGroupTable","showAddSegmentation","activeSegmentationId","onSegmentationClick","setActiveSegmentationForToolGroup","onSegmentationDelete","remove","onSegmentationEdit","callInputDialog","actionId","addOrUpdateSegmentation","onSegmentClick","segmentIndex","setActiveSegmentForSegmentation","onSegmentEdit","setSegmentLabelForSegmentation","onSegmentColorClick","onSegmentDelete","onToggleSegmentVisibility","isVisible","setSegmentVisibility","onToggleSegmentationVisibility","toggleSegmentationVisibility","segmentationConfig","initialConfig","setRenderOutline","setOutlineOpacityActive","setRenderFill","setRenderInactiveSegmentations","setOutlineWidthActive","setFillAlpha","setFillAlphaInactive","runCommand","segProtocol","hasUpdatedPriorsInformation","protocolMatchingRules","toolGroupIds","numberOfPriorsReferenced","defaultViewport","allowUnmatchedView","matchedDisplaySetsIndex","displaySetSelectors","segDisplaySetId","seriesMatchingRules","attribute","constraint","equals","stages","viewportStructure","layoutType","properties","rows","columns","protocol","fallback","getPanelModule","iconName","iconLabel","wrappedPanelSegmentation","getViewportModule","getSopClassHandlerModule","getHangingProtocolModule"],"sourceRoot":""}